<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.photonstudio.mapper.QuerydbinfoMapper">
	<select id="findObject" resultType="Querydbinfo">
	select a.* , b.conditionName,c.resultName from `${dBname}`.querydbinfo a 
	LEFT JOIN `${dBname}`.querycondition b ON a.conditionId=b.conditionId 
	LEFT JOIN `${dBname}`.queryresult c ON a.resultId=c.resultId 
	<if test="pageSize!=null and pageSize!=''">
          limit #{startIndex},#{pageSize}
		</if>
	</select>
	<select id="findObjectById" resultType="Querydbinfo">
	select a.* , b.conditionName,c.resultName from `${dBname}`.querydbinfo a 
	LEFT JOIN `${dBname}`.querycondition b ON a.conditionId=b.conditionId 
	LEFT JOIN `${dBname}`.queryresult c ON a.resultId=c.resultId 
	<where>
	1=1
	<if test="id!=null">
	and a.id=#{id}
	</if>
	</where>
	</select>
	<select id="getRowCount" resultType="int">
	select count(*) from `${dBname}`.querydbinfo
	</select>
	<insert id="insertObject">
	insert into `${dBname}`.querydbinfo (dbtype,conditionId,resultId,conUrl,conUserName,
	conPassword,dbname,dbsql,httpUrl,comments) values (#{querydbinfo.dbtype},
	#{querydbinfo.conditionId},#{querydbinfo.resultId},#{querydbinfo.conUrl},
	#{querydbinfo.conUserName},#{querydbinfo.conPassword},#{querydbinfo.dbname},
	#{querydbinfo.dbsql},#{querydbinfo.httpUrl},#{querydbinfo.comments})
	</insert>
	<delete id="deleteObjectById">
	delete from  `${dBname}`.querydbinfo
	<where>
	id=#{id}
	</where>
	</delete>
	<update id="updateObject">
	update `${dBname}`.querydbinfo 
	<set>
	dbtype=#{querydbinfo.dbtype},
	conditionId=#{querydbinfo.conditionId},
	resultId=#{querydbinfo.resultId},
	conUrl=#{querydbinfo.conUrl},
	conUserName=#{querydbinfo.conUserName},
	conPassword=#{querydbinfo.conPassword},
	dbname=#{querydbinfo.dbname},
	dbsql=#{querydbinfo.dbsql},
	httpUrl=#{querydbinfo.httpUrl},
	comments=#{querydbinfo.comments}
	</set>
	<where>
	id=#{querydbinfo.id}
	</where>
	</update>
</mapper>