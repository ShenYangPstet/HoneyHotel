<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.photonstudio.mapper.DepartmentpicMapper">
<select id="findObject" resultType="Departmentpic">
select a.*,b.picname,c.departmentname from `${dBname}`.departmentpic a 
left join `${dBname}`.pic b on a.picid=b.picid 
left join `${dBname}`.department c on a.departmentid=c.departmentid
<where>
<if test="departmentid!=null and departmentid!=''">
a.departmentid=#{departmentid}
</if>
</where>
</select>
<select id="findPicByDepartmentid" resultType="Pic">
select * from `${dBname}`.pic 
<where>
picid in (select picid from `${dBname}`.departmentpic where departmentid=#{departmentid})
</where>
</select>
<insert id="insertObject">
delete from `${dBname}`.departmentpic where departmentid=#{departmentid};
insert into `${dBname}`.departmentpic (departmentid,picid,pictype) values 
<foreach collection="picids" 
                separator=","
                item="picid">
			(#{departmentid},#{picid},#{pictype})
                </foreach>
</insert>
<delete id="deleteObjectById">
	delete from `${dBname}`.departmentpic 
	<where>
	id in
	<foreach collection="ids" open="("
                close=")"
                separator=","
                item="id">
                #{id}
         </foreach>
         </where>
	</delete>
</mapper>