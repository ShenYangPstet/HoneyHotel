(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6dd0b18"],{"37cd":function(a,e,t){"use strict";t.d(e,"a",(function(){return l}));var l="zsqy_v2"},"5d1f":function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"admin-container"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{xs:4,sm:6,md:8,lg:9,xl:7}},[t("div",{staticClass:"admin-header"},[t("div",{staticClass:"admin-header-left"},[t("div",{staticClass:"admin-header-left-tit"},[a._v("报警类型定义")])]),a._v(" "),t("div",{staticClass:"admin-header-right"})]),a._v(" "),t("div",{staticClass:"admin-tablebox"},[t("el-form",{ref:"ruleForm",staticClass:"admin-form",attrs:{"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"类型名称",required:""}},[t("el-input",{attrs:{placeholder:"请输入类型名称",clearable:""},model:{value:a.alarmTypeName,callback:function(e){a.alarmTypeName=e},expression:"alarmTypeName"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"报警级别",required:""}},[t("el-input",{attrs:{placeholder:"请输入报警级别",clearable:""},model:{value:a.alarmTypeLevel,callback:function(e){a.alarmTypeLevel=e},expression:"alarmTypeLevel"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"类型描述"}},[t("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入类型描述"},model:{value:a.alarmTypeSrc,callback:function(e){a.alarmTypeSrc=e},expression:"alarmTypeSrc"}})],1)],1),a._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:a.addAlarm}},[a._v("增加")]),a._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:a.updateAlarm}},[a._v("确认修改")])],1)]),a._v(" "),t("el-col",{attrs:{xs:20,sm:18,md:16,lg:15,xl:17}},[t("div",{staticClass:"admin-header"},[t("div",{staticClass:"admin-header-left"},[t("div",{staticClass:"admin-header-left-tit"},[a._v("报警类型信息")])]),a._v(" "),t("div",{staticClass:"admin-header-right"},[t("el-button",{attrs:{type:"danger"},on:{click:a.deleteAlarms}},[a._v("批量删除")])],1)]),a._v(" "),t("div",{staticClass:"admin-tablebox"},[t("el-table",{staticClass:"admin-table",attrs:{data:a.alarmTypeTableDatas,border:""},on:{"selection-change":a.selectAlarmType}},[t("el-table-column",{attrs:{type:"selection",width:"60"}}),a._v(" "),t("af-table-column",{attrs:{prop:"id",label:"序号"}}),a._v(" "),t("af-table-column",{attrs:{prop:"alarmtypename",label:"类型名称"}}),a._v(" "),t("af-table-column",{attrs:{prop:"alarmtypelevel",label:"报警级别"}}),a._v(" "),t("af-table-column",{attrs:{prop:"alarmtypeExpain",label:"类型描述"}}),a._v(" "),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return a.editAlarm(e.$index,e.row)}}},[a._v("\n                编辑\n              ")]),a._v(" "),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return a.deleteAlarm(e.$index,e.row)}}},[a._v("\n                删除\n              ")])]}}])})],1),a._v(" "),t("div",{staticClass:"el-pagination admin-pagination"},[t("div",{staticClass:"btn"},[t("button",{on:{click:a.prev}},[a._v("上一页")]),a._v(" "),t("span",[a._v(a._s(a.AcurrentPage))]),a._v(" "),t("button",{on:{click:a.next}},[a._v("下一页")])]),a._v(" "),t("div",[t("el-pagination",{attrs:{"current-page":a.AcurrentPage,"page-sizes":[5,10,20,40],"page-size":a.Apagesize,layout:"total, sizes, jumper",total:a.ArowCount},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}})],1)])],1)])],1)],1)},r=[],n=(t("ac6a"),t("d373")),i=t("37cd"),s={inject:["reload"],name:"AlarmManage",data:function(){return{path:i["a"],alarmTypes:[],alarmTypeName:"",alarmTypeLevel:"",alarmTypeSrc:"",AcurrentPage:1,Apagesize:10,ArowCount:0,alarmTypeTableDatas:[],alarmTypeEditData:{}}},created:function(){this.findAllAlarm(this.path,this.AcurrentPage,this.Apagesize)},methods:{findAllAlarm:function(a,e,t){var l=this;Object(n["c"])(a,e,t).then((function(a){l.ArowCount=a.data.rowCount,l.alarmTypeTableDatas=a.data.records})).catch(console.log)},handleSizeChange:function(a){this.Apagesize=a,this.AcurrentPage=1,this.findAllAlarm(this.path,this.AcurrentPage,this.Apagesize)},handleCurrentChange:function(a){this.AcurrentPage=a,this.tableDatas.length<this.ArowCount&&this.findAllAlarm(this.path,this.AcurrentPage,this.Apagesize)},prev:function(){1===this.AcurrentPage?this.AcurrentPage=1:(this.AcurrentPage--,this.tableDatas.length<this.ArowCount&&this.findAllAlarm(this.path,this.AcurrentPage,this.Apagesize))},next:function(){var a=Math.ceil(this.ArowCount/this.Apagesize);this.AcurrentPage<a&&(this.AcurrentPage++,this.tableDatas.length<this.ArowCount&&this.findAllAlarm(this.path,this.AcurrentPage,this.Apagesize))},addAlarm:function(){var a=this,e=new FormData;e.append("alarmtypename",this.alarmTypeName),e.append("alarmtypelevel",this.alarmTypeLevel),e.append("alarmtypeExpain",this.alarmTypeSrc),Object(n["a"])(this.path,e).then((function(e){2e4===e.status&&(a.$message.success("新增成功!"),a.reload())})).catch(console.log)},editAlarm:function(a,e){this.alarmTypeEditData=e,this.alarmTypeName=e.alarmtypename,this.alarmTypeLevel=e.alarmtypelevel,this.alarmTypeSrc=e.alarmtypeExpain},updateAlarm:function(){var a=this,e=new FormData;e.append("id",this.alarmTypeEditData.id),e.append("alarmtypename",this.alarmTypeName),e.append("alarmtypelevel",this.alarmTypeLevel),e.append("alarmtypeExpain",this.alarmTypeSrc),Object(n["d"])(this.path,e).then((function(e){2e4===e.status&&(a.$message.success("修改成功!"),a.reload())})).catch(console.log)},deleteAlarm:function(a,e){var t=this,l=confirm("确定要删除该报警类型吗？");l&&Object(n["b"])(this.path,e.id).then((function(a){2e4===a.status&&(t.$message.success("删除成功!"),t.reload())})).catch(console.log)},selectAlarmType:function(a){this.alarmTypes=a},deleteAlarms:function(){var a=this,e=confirm("确定要批量删除报警类型吗？");if(e){this.alarmTypes.forEach((function(a){ids.push(a.id)})),Object(n["b"])(this.path,ids.join(",")).then((function(e){2e4===e.status&&(a.$message.success("批量删除成功!"),a.reload())})).catch(console.log)}}}},c=s,o=t("2877"),p=Object(o["a"])(c,l,r,!1,null,"3312e266",null);e["default"]=p.exports},d373:function(a,e,t){"use strict";t.d(e,"c",(function(){return r})),t.d(e,"a",(function(){return n})),t.d(e,"d",(function(){return i})),t.d(e,"b",(function(){return s}));var l=t("b775");function r(a,e,t){return Object(l["a"])({url:"zsqy/alarmtype/".concat(a,"/findObject"),method:"get",params:{pageCurrent:e,pageSize:t}})}function n(a,e){return Object(l["a"])({url:"zsqy/alarmtype/".concat(a,"/save"),method:"post",data:e})}function i(a,e){return Object(l["a"])({url:"zsqy/alarmtype/".concat(a,"/update"),method:"put",data:e})}function s(a,e){return Object(l["a"])({url:"zsqy/alarmtype/".concat(a,"/delete"),method:"delete",params:{ids:e}})}}}]);