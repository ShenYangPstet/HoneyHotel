(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7468acbb"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,a){var r=l(),o=e-r,s=20,p=0;t="undefined"===typeof t?500:t;var u=function e(){p+=s;var l=Math.easeInOutQuad(p,r,o,t);i(l),p<t?n(e):a&&"function"===typeof a&&a()};u()}},6536:function(e,t,a){"use strict";a("a981")},"6c3c":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));a("ac6a");function n(e,t){var a="";return isNaN(e)||null==e||"null"==e?""!=e&&null!=e&&"null"!=e?(t.forEach((function(t){e==t.value&&(a=t.id)})),a):a:e}function i(e,t){var a="";return null!=e&&"null"!=e&&""!==e?isNaN(parseInt(e))?e:(t.forEach((function(t){parseInt(e)==t.id&&(a=t.value)})),a):a}function l(e){return null===e||"null"===e?(e="",e):e}},"9df2":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pages-container"},[a("div",{staticClass:"pages-header"},[e._v("用户编辑")]),e._v(" "),a("div",{staticClass:"pages-filter"},[a("div",{staticClass:"filter-btn"},[a("el-button",{staticClass:"btn-add",on:{click:function(t){e.addVisible=!0}}},[e._v("新增")])],1)]),e._v(" "),a("div",{staticClass:"pages-tablebox"},[a("el-table",{staticClass:"pages-table",attrs:{data:e.tableDatas,size:"mini"}},[a("af-table-column",{attrs:{prop:"userid",label:"ID",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"username",label:"用户名",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"phonenum",label:"手机号",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"email",label:"邮箱",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"usergroupname",label:"用户组",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"departmentname",label:"部门",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"isJB",label:"是否交班",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"usertype",label:"设备权限控制",align:"center"}}),e._v(" "),a("af-table-column",{attrs:{prop:"permission",formatter:e.faultTypeForm,label:"App用户",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("\n            编辑\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1),e._v(" "),a("pages-pagination",{directives:[{name:"show",rawName:"v-show",value:e.filterObj.rowCount>0,expression:"filterObj.rowCount > 0"}],staticClass:"pages-pagination",attrs:{total:e.filterObj.rowCount,page:e.filterObj.pageCurrent,limit:e.filterObj.pageSize},on:{"update:page":function(t){return e.$set(e.filterObj,"pageCurrent",t)},"update:limit":function(t){return e.$set(e.filterObj,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),a("el-dialog",{attrs:{title:"用户新增",visible:e.addVisible,width:"30%",modal:!1},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{attrs:{"label-width":"130px","label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组"}},[a("el-select",{attrs:{placeholder:"请选择用户组"},model:{value:e.usergroup,callback:function(t){e.usergroup=t},expression:"usergroup"}},e._l(e.userGroupOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"授权时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择授权时间",editable:!1,clearable:!1},model:{value:e.qxTime,callback:function(t){e.qxTime=t},expression:"qxTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.departmentid,callback:function(t){e.departmentid=t},expression:"departmentid"}},[a("el-option",{staticStyle:{height:"auto"},attrs:{label:e.departmentname,value:e.departmentid}},[a("el-tree",{ref:"tree",attrs:{data:e.departmentTree,"node-key":"ldRwId","highlight-current":"",props:e.defaultProps},on:{"node-click":e.handleCheck}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否交班"}},[a("el-select",{attrs:{placeholder:"请选择是否交班"},model:{value:e.isJB,callback:function(t){e.isJB=t},expression:"isJB"}},e._l(e.JBOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备权限控制"}},[a("el-select",{attrs:{placeholder:"请选择设备权限控制"},model:{value:e.deviceControl,callback:function(t){e.deviceControl=t},expression:"deviceControl"}},e._l(e.deviceControlOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"App类型",prop:"permission"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择App类型"},model:{value:e.permission,callback:function(t){e.permission=t},expression:"permission"}},e._l(e.applist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"用户编辑",visible:e.updateVisible,width:"30%",modal:!1},on:{"update:visible":function(t){e.updateVisible=t}}},[a("el-form",{attrs:{"label-width":"130px","label-position":"left"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{clearable:"",readonly:""},model:{value:e.editData.username,callback:function(t){e.$set(e.editData,"username",t)},expression:"editData.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组"}},[a("el-select",{attrs:{placeholder:"请选择用户组"},model:{value:e.editData.usergroupid,callback:function(t){e.$set(e.editData,"usergroupid",t)},expression:"editData.usergroupid"}},e._l(e.userGroupOptions,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.editData.phonenum,callback:function(t){e.$set(e.editData,"phonenum",t)},expression:"editData.phonenum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.editData.email,callback:function(t){e.$set(e.editData,"email",t)},expression:"editData.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门"}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.editData.departmentid,callback:function(t){e.$set(e.editData,"departmentid",t)},expression:"editData.departmentid"}},[a("el-option",{staticStyle:{height:"auto"},attrs:{label:e.editData.departmentname,value:e.editData.departmentid}},[a("el-tree",{ref:"tree",attrs:{data:e.departmentTree,"node-key":"ldRwId","highlight-current":"",props:e.defaultProps},on:{"node-click":e.handleCheck}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否交班"}},[a("el-select",{attrs:{placeholder:"请选择是否交班"},model:{value:e.editData.isJB,callback:function(t){e.$set(e.editData,"isJB",t)},expression:"editData.isJB"}},e._l(e.JBOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备权限控制"}},[a("el-select",{attrs:{placeholder:"请选择设备权限控制"},model:{value:e.editData.usertype,callback:function(t){e.$set(e.editData,"usertype",t)},expression:"editData.usertype"}},e._l(e.deviceControlOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"App类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择App类型"},model:{value:e.editData.permission,callback:function(t){e.$set(e.editData,"permission",t)},expression:"editData.permission"}},e._l(e.applist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateTrue}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("8e6e"),a("456d"),a("ac6a"),a("ade3")),r=a("2f62"),o=a("b775");function s(e,t,a){return Object(o["a"])({url:"zsqy/appuser/".concat(e,"/findObject"),method:"get",params:{pageCurrent:t,pageSize:a}})}function p(e,t){return Object(o["a"])({url:"zsqy/usergroup/".concat(e,"/findAll"),method:"get",params:{appid:t}})}function u(e,t){return Object(o["a"])({url:"zsqy/department/".concat(e,"/findAll"),method:"get",params:{appid:t}})}function c(e,t){return Object(o["a"])({url:"zsqy/appuser/".concat(e,"/saveAppuser"),method:"post",data:t})}function d(e,t){return Object(o["a"])({url:"zsqy/appuser/".concat(e,"/update"),method:"put",data:t})}function m(e,t,a){return Object(o["a"])({url:"zsqy/appuser/".concat(e,"/delete"),method:"delete",params:{appid:t,ids:a}})}var b=a("6c3c"),f=a("b190");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={inject:["reload"],components:{PagesPagination:f["a"]},computed:v({},Object(r["b"])(["path","projectId"])),data:function(){var e=new Date;return{filterObj:{pageCurrent:1,pageCount:1,pageSize:9,rowCount:0},username:"",phone:"",email:"",usergroup:"",qxTime:e,departmentid:"",departmentname:"",isJB:"",deviceControl:"否",permission:"",applist:[{id:0,value:"维修端"},{id:1,value:"用户端"}],rules:{permission:[{required:!0,message:"请输入App类型",trigger:"blur"}]},tableDatas:[],editData:{},addVisible:!1,updateVisible:!1,departmentTree:[],defaultProps:{children:"children",label:"departmentname"},userGroupOptions:[],departmentOptions:[],JBOptions:[{id:1,value:"是"},{id:0,value:"否"}],deviceControlOptions:[{id:1,value:"是"},{id:0,value:"否"}]}},created:function(){var e=this;p(this.path,this.projectId).then((function(t){t.data.forEach((function(t){var a={id:t.id,value:t.usergroupname};e.userGroupOptions.push(a)}))})).catch(console.log),u(this.path,this.projectId).then((function(t){e.departmentTree=t.data})).catch(console.log),this.getList()},methods:{faultTypeForm:function(e,t){return 0==e.permission?"维修端":1==e.permission?"用户端":void 0},getList:function(){var e=this;s(this.path,this.filterObj.pageCurrent,this.filterObj.pageSize).then((function(t){e.filterObj.rowCount=t.data.rowCount,e.tableDatas=t.data.records,e.tableDatas.forEach((function(t){t.isJB=Object(b["a"])(t.isJB,e.JBOptions),t.usertype=Object(b["a"])(t.usertype,e.deviceControlOptions)}))})).catch(console.log)},handleCheck:function(e){this.departmentid=e.departmentid,this.departmentname=e.departmentname,this.editData!={}&&(this.editData.departmentid=e.departmentid,this.editData.departmentname=e.departmentname)},handleAdd:function(){var e=this,t=new FormData;t.append("appid",this.projectId),t.append("username",this.username),t.append("phonenum",this.phone),t.append("email",this.email),t.append("usergroupid",this.usergroup),t.append("licensetime",this.qxTime),t.append("departmentid",this.departmentid),t.append("isJB",this.isJB),t.append("usertype",Object(b["c"])(this.deviceControl,this.deviceControlOptions)),t.append("permission",this.permission),c(this.path,t).then((function(t){2e4===t.status&&(e.$message.success("新增成功!"),e.addVisible=!1,e.reload())})).catch(console.log)},handleEdit:function(e,t){this.updateVisible=!0,this.editData=t},updateTrue:function(){var e=this,t=new FormData;t.append("appid",this.projectId),t.append("userid",this.editData.userid),t.append("username",this.editData.username),t.append("phonenum",this.editData.phonenum),t.append("email",this.editData.email),t.append("usergroupid",Object(b["c"])(this.editData.usergroupid,this.userGroupOptions)),t.append("departmentid",Object(b["b"])(this.editData.departmentid)),t.append("isJB",Object(b["c"])(this.editData.isJB,this.JBOptions)),t.append("usertype",Object(b["c"])(this.editData.usertype,this.deviceControlOptions)),t.append("permission",Object(b["b"])(this.editData.permission)),d(this.path,t).then((function(t){2e4===t.status&&(e.$message.success("修改成功!"),e.addVisible=!1,e.reload())})).catch(console.log)},handleDelete:function(e,t){var a=this,n=confirm("确定要删除吗？");n&&m(this.path,this.projectId,t.userid).then((function(e){2e4===e.status&&(a.$message.success("删除成功!"),a.reload())})).catch(console.log)}}},O=g,y=(a("6536"),a("2877")),D=Object(y["a"])(O,n,i,!1,null,"ce60abcc",null);t["default"]=D.exports},a981:function(e,t,a){}}]);