(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-621ddb84"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),Math.easeInOutQuad=function(t,e,a,l){return t/=l/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function n(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,a){var o=i(),c=t-o,r=20,s=0;e="undefined"===typeof e?500:e;var d=function t(){s+=r;var i=Math.easeInOutQuad(s,o,c,e);n(i),s<e?l(t):a&&"function"===typeof a&&a()};d()}},"31df":function(t,e,a){"use strict";a("4e2d")},"4e2d":function(t,e,a){},"6c3c":function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));a("ac6a");function l(t,e){var a="";return isNaN(t)||null==t||"null"==t?""!=t&&null!=t&&"null"!=t?(e.forEach((function(e){t==e.value&&(a=e.id)})),a):a:t}function n(t,e){var a="";return null!=t&&"null"!=t&&""!==t?isNaN(parseInt(t))?t:(e.forEach((function(e){parseInt(t)==e.id&&(a=e.value)})),a):a}function i(t){return null===t||"null"===t?(t="",t):t}},"98c6":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-container"},[a("div",{staticClass:"lay"},[a("div",{staticClass:"lay-left"},[t._m(0),t._v(" "),a("div",{staticClass:"admin-tablebox"},[a("el-form",{ref:"form",staticClass:"admin-form",attrs:{"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"设备名称",required:""}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入设备名称"},model:{value:t.deviceName,callback:function(e){t.deviceName=e},expression:"deviceName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"驱动",required:""}},[a("el-select",{attrs:{placeholder:"请选择驱动"},model:{value:t.drdll,callback:function(e){t.drdll=e},expression:"drdll"}},t._l(t.drdllOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"驱动类型"}},[a("el-select",{attrs:{placeholder:"请选择驱动类型"},model:{value:t.drdlltype,callback:function(e){t.drdlltype=e},expression:"drdlltype"}},t._l(t.drdlltypeOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"设备地址"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入设备地址"},model:{value:t.deviceIPPort,callback:function(e){t.deviceIPPort=e},expression:"deviceIPPort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"COM口"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入串口"},model:{value:t.COM,callback:function(e){t.COM=e},expression:"COM"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"波特率"}},[a("el-select",{attrs:{placeholder:"请选择波特率"},model:{value:t.bandRate,callback:function(e){t.bandRate=e},expression:"bandRate"}},t._l(t.bandRateOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"数据位"}},[a("el-select",{attrs:{placeholder:"请选择数据位"},model:{value:t.dataBit,callback:function(e){t.dataBit=e},expression:"dataBit"}},t._l(t.dataBitOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"停止位"}},[a("el-select",{attrs:{placeholder:"请选择停止位"},model:{value:t.stopBit,callback:function(e){t.stopBit=e},expression:"stopBit"}},t._l(t.stopBitOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"校验"}},[a("el-select",{attrs:{placeholder:"请选择校验"},model:{value:t.check,callback:function(e){t.check=e},expression:"check"}},t._l(t.checkOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"采集周期"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入采集周期"},model:{value:t.collectionTime,callback:function(e){t.collectionTime=e},expression:"collectionTime"}}),t._v(" "),a("span",[t._v("毫秒")])],1),t._v(" "),a("el-form-item",{attrs:{label:"MacID"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入MacID"},model:{value:t.MacID,callback:function(e){t.MacID=e},expression:"MacID"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handelAdd}},[t._v("增加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handelUpdate}},[t._v("修改")])],1)]),t._v(" "),a("div",{staticClass:"lay-right"},[a("div",{staticClass:"admin-header"},[t._m(1),t._v(" "),a("div",{staticClass:"admin-header-right"},[a("el-button",{staticClass:"headermr",attrs:{type:"primary"},on:{click:t.exportQsTag}},[t._v("\n            数据导出\n          ")]),t._v(" "),a("ExcelUpload",{staticClass:"headermr",attrs:{btnName:t.btnName},on:{excelUpload:t.uploadFile}}),t._v(" "),a("el-button",{staticClass:"headermr",attrs:{type:"danger"},on:{click:t.handelDeletes}},[t._v("\n            批量删除\n          ")])],1)]),t._v(" "),a("div",{staticClass:"admin-tablebox"},[a("el-table",{staticClass:"admin-table",attrs:{data:t.tableDatas,border:""},on:{"selection-change":t.selectQsTags}},[a("el-table-column",{attrs:{type:"selection",width:"60"}}),t._v(" "),a("af-table-column",{attrs:{prop:"drid",label:"设备ID"}}),t._v(" "),a("af-table-column",{attrs:{prop:"drname",label:"设备名"}}),t._v(" "),a("af-table-column",{attrs:{prop:"drllname",label:"驱动"}}),t._v(" "),a("af-table-column",{attrs:{prop:"type",label:"驱动类型"}}),t._v(" "),a("af-table-column",{attrs:{prop:"ipport",label:"IP和端口"}}),t._v(" "),a("af-table-column",{attrs:{prop:"com",label:"COM口"}}),t._v(" "),a("af-table-column",{attrs:{prop:"baudRate",label:"波特率"}}),t._v(" "),a("af-table-column",{attrs:{prop:"dataBits",label:"数据位"}}),t._v(" "),a("af-table-column",{attrs:{prop:"stopBits",label:"停止位"}}),t._v(" "),a("af-table-column",{attrs:{prop:"parity",label:"校验"}}),t._v(" "),a("af-table-column",{attrs:{prop:"cycle",label:"采集周期"}}),t._v(" "),a("af-table-column",{attrs:{prop:"macID",label:"MacID"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.handelEdit(e.$index,e.row)}}},[t._v("\n                编辑\n              ")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.handelDelete(e.$index,e.row)}}},[t._v("\n                删除\n              ")])]}}])})],1),t._v(" "),a("pages-pagination",{directives:[{name:"show",rawName:"v-show",value:t.filterObj.rowCount>0,expression:"filterObj.rowCount > 0"}],staticClass:"admin-pagination",attrs:{total:t.filterObj.rowCount,page:t.filterObj.pageCurrent,limit:t.filterObj.pageSize},on:{"update:page":function(e){return t.$set(t.filterObj,"pageCurrent",e)},"update:limit":function(e){return t.$set(t.filterObj,"pageSize",e)},pagination:t.getList}})],1)])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-header"},[a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[t._v("设备采集数据编辑")])]),t._v(" "),a("div",{staticClass:"admin-header-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[t._v("设备采集数据信息")])])}],i=(a("8e6e"),a("456d"),a("ac6a"),a("ade3")),o=a("2f62"),c=a("b775");function r(t){return Object(c["a"])({url:"zsqy/dlldrinfo/".concat(t,"/export"),method:"get",responseType:"blob"})}function s(t,e){return Object(c["a"])({url:"zsqy/dlldrinfo/".concat(t,"/import"),method:"post",data:e})}function d(t,e,a){return Object(c["a"])({url:"zsqy/dlldrinfo/".concat(t,"/findObject"),method:"get",params:{pageCurrent:e,pageSize:a}})}function u(t){return Object(c["a"])({url:"zsqy/dlldrinfo/".concat(t,"//findDrllinfo"),method:"get"})}function p(t,e){return Object(c["a"])({url:"zsqy/dlldrinfo/".concat(t,"/save"),method:"post",data:e})}function h(t,e){return Object(c["a"])({url:"zsqy/dlldrinfo/".concat(t,"/update"),method:"put",data:e})}function b(t,e){return Object(c["a"])({url:"zsqy/dlldrinfo/".concat(t,"/delete"),method:"delete",params:{ids:e}})}var f=a("e4a7"),m=a("cd77"),v=a("ed08"),O=a("6c3c"),y=a("b190");function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,l)}return a}function _(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var j={inject:["reload"],components:{PagesPagination:y["a"],ExcelUpload:f["a"]},computed:_({},Object(o["b"])(["path"])),data:function(){return{btnName:"数据导入",deviceName:"",drdll:"",drdllOptions:[],drdlltype:0,drdlltypeOptions:[{id:0,value:"网络"},{id:1,value:"串口"}],deviceIPPort:"",COM:"com1",bandRate:1200,bandRateOptions:[{id:1200,value:"1200"},{id:2400,value:"2400"},{id:4800,value:"4800"},{id:9600,value:"9600"},{id:19200,value:"19200"},{id:38400,value:"38400"},{id:76800,value:"76800"},{id:153600,value:"153600"}],dataBit:8,dataBitOptions:[{id:7,value:"7"},{id:8,value:"8"}],stopBit:1,stopBitOptions:[{id:1,value:"1"},{id:1.5,value:"1.5"},{id:2,value:"2"}],check:0,checkOptions:[{id:0,value:"无"},{id:1,value:"奇校验"},{id:2,value:"偶校验"}],collectionTime:"3000",drdlls:[],MacID:"",filterObj:{pageCurrent:1,pageCount:1,pageSize:10,rowCount:0},tableDatas:[],editData:{}}},mounted:function(){var t=this;u(this.path).then((function(e){e.data.forEach((function(e){var a={id:e.drllid,value:e.drllname};t.drdllOptions.push(a)}))})).catch(console.log),this.getList()},methods:{getList:function(){var t=this;d(this.path,this.filterObj.pageCurrent,this.filterObj.pageSize).then((function(e){t.filterObj.rowCount=e.data.rowCount,t.tableDatas=e.data.records,t.tableDatas.forEach((function(e){e.type=Object(O["a"])(e.type,t.drdlltypeOptions),e.parity=Object(O["a"])(e.parity,t.checkOptions)}))})).catch(console.log)},handelAdd:function(){var t=this,e=new FormData;e.append("drname",this.deviceName),e.append("drllid",this.drdll),e.append("type",this.drdlltype),e.append("ipport",this.deviceIPPort),e.append("com",this.COM),e.append("baudRate",this.bandRate),e.append("dataBits",this.dataBit),e.append("stopBits",this.stopBit),e.append("parity",this.check),e.append("cycle",this.collectionTime),""!=this.macID&&void 0!=this.macID&&null!=this.macID&&e.append("macID",this.MacID),p(this.path,e).then((function(e){2e4===e.status&&(t.$message.success("新增成功!"),t.getList())})).catch(console.log)},handelEdit:function(t,e){this.editData=e,this.deviceName=e.drname,this.drdll=e.drllname,this.drdlltype=e.type,this.deviceIPPort=e.ipport,this.COM=e.com,this.bandRate=baudRate,this.dataBit=e.dataBits,this.stopBit=e.stopBits,this.check=Object(O["a"])(e.parity,this.checkOptions),this.collectionTime=e.cycle,this.MacID=e.macID},handelUpdate:function(){var t=this,e=new FormData;e.append("drid",this.editData.drid),e.append("drname",this.deviceName),e.append("drllid",Object(O["c"])(this.drdll,this.drdllOptions)),e.append("type",Object(O["c"])(this.drdlltype,this.drdlltypeOptions)),e.append("ipport",Object(O["b"])(this.deviceIPPort)),e.append("com",Object(O["b"])(this.COM)),e.append("baudRate",Object(O["c"])(this.bandRate,this.bandRateOptions)),e.append("dataBits",Object(O["c"])(this.dataBit,this.dataBitOptions)),e.append("stopBits",Object(O["c"])(this.stopBit,this.stopBitOptions)),e.append("parity",Object(O["c"])(this.check,this.checkOptions)),e.append("cycle",Object(O["b"])(this.collectionTime)),e.append("macID",this.MacID),h(this.path,e).then((function(e){2e4===e.status&&(t.$message.success("修改成功!"),t.getList())})).catch(console.log)},handelDelete:function(t,e){var a=this,l=confirm("确定要删除吗？");l&&b(this.path,e.drid).then((function(t){2e4===t.status&&(a.$message.success("删除成功!"),a.getList())})).catch(console.log)},selectQsTags:function(t){this.drdlls=t},handelDeletes:function(){var t=this,e=confirm("确定要批量删除吗？");if(e){var a=[];this.drdlls.forEach((function(t){a.push(t.drid)})),b(this.path,a.join(",")).then((function(e){2e4===e.status&&(t.$message.success("批量删除成功!"),t.getList())})).catch(console.log)}},uploadFile:function(t){var e=this,a=new FormData;a.append("file",t);var l=this.$loading({lock:!0,text:"数据正在导入数据库，请稍等",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});s(this.path,a).then((function(t){2e4===t.status&&(l.close(),e.$message.success("成功导入数据库!"),e.reload())})).catch(console.log)},exportQsTag:function(){r(this.path).then((function(t){var e=Object(v["c"])(new Date),a="设备采集数据信息"+e+".xls";Object(m["a"])(t,a)})).catch(console.log)}}},k=j,C=(a("31df"),a("2877")),w=Object(C["a"])(k,l,n,!1,null,"501098c7",null);e["default"]=w.exports},cd77:function(t,e,a){"use strict";function l(t,e){var a=new Blob([t]),l=document.createElement("a");l.download=e,l.style.display="none",l.href=URL.createObjectURL(a),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}a.d(e,"a",(function(){return l}))}}]);