(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06b0b224"],{3911:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"edit"==t.editMode?n("div",{staticClass:"v-text",on:{keydown:t.handleKeydown,keyup:t.handleKeyup}},[n("div",{ref:"text",class:{canEdit:t.canEdit},style:{verticalAlign:t.element.style.verticalAlign,fontFamily:t.element.style.fontFamily},attrs:{contenteditable:t.canEdit,tabindex:t.element.id},domProps:{innerHTML:t._s(t.element.propValue)},on:{dblclick:t.setEdit,paste:t.clearStyle,mousedown:t.handleMousedown,blur:t.handleBlur,input:t.handleInput}})]):n("div",{staticClass:"v-text preview"},[n("div",{style:{verticalAlign:t.element.style.verticalAlign},domProps:{innerHTML:t._s(t.element.propValue)}})])},o=[],r=(n("6762"),n("2fdb"),n("2f62")),i=n("590f"),c={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:Object(r["c"])({editMode:function(t){return t.drag.editMode}}),methods:{handleInput:function(t){this.$emit("input",this.element,t.target.innerHTML)},handleKeydown:function(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&i["a"].includes(t.keyCode)||46==t.keyCode)&&t.stopPropagation()},handleKeyup:function(t){this.canEdit&&t.stopPropagation(),t.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown:function(t){this.canEdit&&t.stopPropagation()},clearStyle:function(t){t.preventDefault();var e=t.clipboardData,n=e.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,t.target.innerHTML)},handleBlur:function(t){var e=this;this.element.propValue=t.target.innerHTML||"&nbsp;";var n=t.target.innerHTML;""!==n?this.element.propValue=t.target.innerHTML:(this.element.propValue="",this.$nextTick((function(){e.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit:function(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText:function(t){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}},s=c,d=(n("8cb1"),n("2877")),l=Object(d["a"])(s,a,o,!1,null,"4b1a82b0",null);e["default"]=l.exports},"590f":function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return A}));n("8e6e"),n("456d"),n("ac6a"),n("673e");var a,o,r=n("ade3"),i=n("4360"),c=n("cbe5a"),s=n("ab2a"),d=n("4128"),l=n.n(d);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=17,f=91,b=86,g=67,h=88,y=89,v=90,w=71,O=66,j=76,k=85,C=83,E=80,D=68,P=46,S=69,x=37,I=38,L=39,M=40,T=[66,67,68,69,71,76,80,83,85,86,88,89,90],N=(a={},Object(r["a"])(a,b,F),Object(r["a"])(a,y,J),Object(r["a"])(a,v,X),Object(r["a"])(a,C,z),Object(r["a"])(a,E,Q),Object(r["a"])(a,S,W),a),K=p(p({},N),{},Object(r["a"])({},k,tt)),V=p(p({},N),{},(o={},Object(r["a"])(o,g,B),Object(r["a"])(o,h,G),Object(r["a"])(o,w,Y),Object(r["a"])(o,O,q),Object(r["a"])(o,D,U),Object(r["a"])(o,P,U),Object(r["a"])(o,j,Z),o)),H=!1;function A(){window.onkeydown=function(t){if(i["a"].state.drag.isInEdiotr){var e=i["a"].state.drag.curComponent,n=t.keyCode;n==x?R("left"):n==I?R("up"):n==L?R("right"):n==M?R("down"):n===m||n===f?(H=!0,_("isCtrl",!0)):n==P&&e?(i["a"].commit("drag/deleteComponent"),i["a"].commit("drag/recordSnapshot")):H&&(!V[n]||e&&e.isLock?K[n]&&e&&e.isLock&&(t.preventDefault(),K[n]()):(t.preventDefault(),V[n]()))}},window.onkeyup=function(t){t.keyCode!==m&&t.keyCode!==f||(H=!1,_("isCtrl",!1))},window.onmousedown=function(){i["a"].commit("drag/setInEditorStatus",!1)}}function R(t){var e=i["a"].state.drag,n=e.curComponent,a=e.canvasStyleData;if(n&&n.style){var o=n.style,r=o.top,c=o.left,s=o.width,d=o.height,u=a.width,p=a.height;switch(t){case"left":n.style.left=c>=1?--c:0;break;case"right":var m=u-s-c>=1?++c:l.a.sub(u,s).toNumber();n.style.left=m;break;case"up":var f=r>=1?--r:0;n.style.top=f;break;case"down":var b=p-d-r>=1?++r:l.a.sub(p,d).toNumber();n.style.top=b;break}}}function _(t,e){i["a"].commit("drag/setKeyboardEvent",{key:t,value:e})}function B(){i["a"].commit("drag/copy")}function F(){i["a"].commit("drag/paste"),i["a"].commit("drag/recordSnapshot")}function G(){i["a"].commit("drag/cut")}function J(){i["a"].commit("drag/redo")}function X(){i["a"].commit("drag/undo")}function Y(){var t=this,e=i["a"].state.drag,n=e.areaData,a=e.ctrlComponentList;if(!n.length&&a.length>0){var o=1/0,r=1/0,c=-1/0,d=-1/0,u=a;u.forEach((function(e){var n={};"Group"==e.component?e.propValue.forEach((function(e){var a=$("#component".concat(e.id)).getBoundingClientRect();n.left=l.a.sub(parseInt(a.left),parseInt(t.editorX)).toNumber(),n.top=l.a.sub(parseInt(a.top),parseInt(t.editorY)).toNumber(),n.right=l.a.sub(parseInt(a.right),parseInt(t.editorX)).toNumber(),n.bottom=l.a.sub(parseInt(a.bottom),parseInt(t.editorY)).toNumber(),n.left<r&&(r=n.left),n.top<o&&(o=n.top),n.right>c&&(c=n.right),n.bottom>d&&(d=n.bottom)})):n=Object(s["c"])(e.style),n.left<r&&(r=n.left),n.top<o&&(o=n.top),n.right>c&&(c=n.right),n.bottom>d&&(d=n.bottom)})),i["a"].commit("drag/setAreaData",{style:{left:r,top:o,width:l.a.sub(c,r).toNumber(),height:l.a.sub(d,o).toNumber()},components:u})}i["a"].commit("drag/compose"),i["a"].commit("drag/recordSnapshot")}function q(){var t=i["a"].state.drag.curComponent;t&&!t.isLock&&"Group"==t.component&&(i["a"].commit("drag/decompose"),i["a"].commit("drag/recordSnapshot"))}function z(){c["a"].$emit("drag/save")}function Q(){c["a"].$emit("drag/preview")}function U(){i["a"].state.drag.curComponent&&(i["a"].commit("drag/deleteComponent"),i["a"].commit("drag/recordSnapshot"))}function W(){c["a"].$emit("drag/clearCanvas")}function Z(){i["a"].commit("drag/lock")}function tt(){i["a"].commit("drag/unlock")}},"6f5a":function(t,e,n){},"8cb1":function(t,e,n){"use strict";n("6f5a")}}]);