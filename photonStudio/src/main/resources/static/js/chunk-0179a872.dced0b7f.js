(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0179a872"],{"16b2":function(t,e,a){"use strict";a("373d")},"373d":function(t,e,a){},"37cd":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var i="zsqy_v2"},"6c3c":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));a("ac6a");function i(t,e){var a="";return isNaN(t)||null==t||"null"==t?""!=t&&null!=t&&"null"!=t?(e.forEach((function(e){t==e.value&&(a=e.id)})),a):a:t}function n(t,e){var a="";return null!=t&&"null"!=t&&""!==t?isNaN(parseInt(t))?t:(e.forEach((function(e){parseInt(t)==e.id&&(a=e.value)})),a):a}function r(t){return null===t||"null"===t?(t="",t):t}},7856:function(t,e,a){"use strict";a.r(e);var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"admin-header"},[a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[t._v("详细")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveDeviceType}},[t._v("\n            保存设备类型\n          ")])],1),t._v(" "),a("div",{staticClass:"admin-header-right"})]),t._v(" "),a("div",{staticClass:"admin-tablebox"},[a("div",{staticClass:"treebox"},[a("el-tree",{ref:"leftTree",staticClass:"admin-tree",attrs:{"node-key":"drtypeid",props:t.props,data:t.totalTreeData,"show-checkbox":"","default-expand-all":""}}),t._v(" "),a("el-tree",{staticClass:"admin-tree",attrs:{props:t.props,data:t.treeData},on:{"node-click":t.update}})],1)])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"admin-header"},[a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[t._v("子系统类型")])]),t._v(" "),a("div",{staticClass:"admin-header-right"})]),t._v(" "),a("div",{staticClass:"admin-tablebox"},[a("div",{staticClass:"page-info"},[a("ul",[a("li",[a("p",[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("\n                类型名\n              ")]),t._v(" "),a("el-input",{attrs:{name:"text",placeholder:"请输入类型名",clearable:""},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}})],1),t._v(" "),a("li",[a("p",[t._v("隶属类型")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择隶属类型",clearable:""},model:{value:t.input2,callback:function(e){t.input2=e},expression:"input2"}},t._l(t.parentMenus,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("li",[a("p",[t._v("类型图标")]),t._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择类型图标"},model:{value:t.input3,callback:function(e){t.input3=e},expression:"input3"}},t._l(t.iconMenus,(function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("li",[a("p",[t._v("是否显示")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择是否显示"},model:{value:t.input4,callback:function(e){t.input4=e},expression:"input4"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("li",[a("p",[t._v("是否结构图")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择是否显示"},model:{value:t.input5,callback:function(e){t.input5=e},expression:"input5"}},t._l(t.options,(function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("li",[a("p",[t._v("连接页面")]),t._v(" "),a("el-cascader",{attrs:{options:t.pageOptions,"show-all-levels":!1,props:{expandTrigger:"hover",label:"picname",value:"picid"},clearable:""},model:{value:t.input6,callback:function(e){t.input6=e},expression:"input6"}})],1),t._v(" "),a("li",[a("p",[t._v("设备监控页面配置项")])]),t._v(" "),a("li",[a("p",[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v("\n                展示设备参数\n              ")]),t._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择是否显示"},model:{value:t.parameterDisplay,callback:function(e){t.parameterDisplay=e},expression:"parameterDisplay"}},t._l(t.parameterOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.value,value:t.id}})})),1)],1),t._v(" "),a("li",[a("p",[t._v("设备信息菜单")]),t._v(" "),a("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},model:{value:t.parameterList,callback:function(e){t.parameterList=e},expression:"parameterList"}},t._l(t.parameterlistOption,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1)],1)])]),t._v(" "),a("div",{staticClass:"page-btnbox"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handelAdd}},[t._v("增加")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.updateTrue}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deleteSubsystem}},[t._v("删除")])],1)])])],1)],1)},r=[],s=(a("8e6e"),a("456d"),a("ac6a"),a("28a5"),a("ade3")),c=a("2f62"),p=a("37cd"),o=a("7bcf"),u=a("f788"),l=a("6c3c");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={inject:["reload"],components:{},data:function(){return{parameterDisplay:null,input1:"",input2:"",input3:"",input4:"显示",input5:"不显示",input6:"",totalTreeData:[],treeData:[],pageOptions:[],iconMenus:[],props:{children:"drtypeinfoList",label:"drtypename",isLeaf:"leaf"},parameterList:[],options:[{id:1,value:"显示"},{id:0,value:"不显示"}],parameterOptions:[{id:1,value:"显示"},{id:0,value:"不显示"}],parameterlistOption:[{id:0,value:"参数信息"},{id:1,value:"资产信息"},{id:2,value:"历史数据"},{id:3,value:"报警记录"}],parentMenus:[]}},computed:h({},Object(c["b"])(["path"])),watch:{},methods:(i={initData:function(){this.findDeviceTypeApi(),this.projectfindDeviceTypeApi(),this.findAllSubsystemapi(),this.findIconapi(),this.findPagesapi()},deleteSubsystem:function(){var t=this,e=confirm("该目录下的子目录将全部删除，确定要删除吗？");e&&Object(u["b"])(this.path,this.updateData.drtypeid).then((function(e){2e4===e.status&&(t.$message.success("删除成功!"),t.reload())})).catch(console.log)},updateTrue:function(){var t=this;if(""===this.input1&&""==this.parameterDisplay)this.$message.error("类型名为必填项！！");else{var e=new FormData;e.append("drtypeid",this.updateData.drtypeid),e.append("drtypename",this.input1),e.append("parentid",Object(l["c"])(this.input2,this.parentMenus)),e.append("drtypeiconid",Object(l["c"])(this.input3,this.iconMenus)),e.append("isshow",Object(l["c"])(this.input4,this.options)),e.append("isdrtype",Object(l["c"])(this.input5,this.options)),this.parameterList&&e.append("parameterList",this.parameterList.join(",")),this.parameterDisplay&&e.append("parameterDisplay",this.parameterDisplay),e.append("picid",Object(l["c"])(this.input6[this.input6.length-1],this.pageOptions)),Object(u["g"])(this.path,e).then((function(e){2e4===e.status&&(t.$message.success("修改成功!"),t.reload())})).catch(console.log)}},update:function(t){var e=this;this.parameterDisplay=Object(l["a"])(parseInt(t.parameterDisplay),this.parameterOptions),this.parameterDisplay=t.parameterDisplay,this.input6="",this.updateData=t,this.input1=t.drtypename,this.input2=Object(l["a"])(t.parentid,this.parentMenus),this.input3=Object(l["a"])(t.drtypeiconid,this.iconMenus),this.input4=Object(l["a"])(t.isshow,this.options),this.input5=Object(l["a"])(t.isdrtype,this.options);var a=t.parameterList.split(",")||"",i=[];a.forEach((function(t){t&&i.push(parseInt(t))})),this.parameterList=i,this.pageOptions.forEach((function(a){null!=a.children?a.children.forEach((function(a){a.picid===t.picid&&(e.input6=[a.parentid,t.picid])})):""===e.input6&&(e.input6=[t.picid])}))},handelAdd:function(){var t=this;if(""===this.input1&&""==this.parameterDisplay)this.$message.error("类型名为必填项！");else{var e=new FormData;e.append("drtypename",Object(l["b"])(this.input1)),e.append("parentid",Object(l["c"])(this.input2,this.parentMenus)),e.append("drtypeiconid",Object(l["c"])(this.input3,this.iconMenus)),e.append("isshow",Object(l["c"])(this.input4,this.options)),e.append("isdrtype",Object(l["c"])(this.input5,this.options)),this.parameterList&&e.append("parameterList",this.parameterList.join(",")),this.parameterDisplay&&e.append("parameterDisplay",this.parameterDisplay),e.append("iscustomType",0),e.append("picid",Object(l["c"])(this.input6[this.input6.length-1],this.pageOptions)),Object(u["a"])(this.path,e).then((function(e){2e4===e.status&&(t.$message.success("新增成功!"),t.reload())})).catch(console.log)}}},Object(s["a"])(i,"update",(function(t){var e=this;this.parameterDisplay=Object(l["a"])(parseInt(t.parameterDisplay),this.parameterOptions),this.parameterDisplay=t.parameterDisplay,this.input6="",this.updateData=t,this.input1=t.drtypename,this.input2=Object(l["a"])(t.parentid,this.parentMenus),this.input3=Object(l["a"])(t.drtypeiconid,this.iconMenus),this.input4=Object(l["a"])(t.isshow,this.options),this.input5=Object(l["a"])(t.isdrtype,this.options);var a=t.parameterList.split(",")||"",i=[];a.forEach((function(t){t&&i.push(parseInt(t))})),this.parameterList=i,this.pageOptions.forEach((function(a){null!=a.children?a.children.forEach((function(a){a.picid===t.picid&&(e.input6=[a.parentid,t.picid])})):""===e.input6&&(e.input6=[t.picid])}))})),Object(s["a"])(i,"findPagesapi",(function(){var t=this;Object(u["e"])(this.path).then((function(e){t.pageOptions=e.data})).catch(console.log)})),Object(s["a"])(i,"findIconapi",(function(){var t=this;Object(u["d"])().then((function(e){e.data.forEach((function(e){var a={id:e.iconid,value:e.iconname};t.iconMenus.push(a)}))})).catch(console.log)})),Object(s["a"])(i,"findAllSubsystemapi",(function(){var t=this;Object(u["c"])(this.path).then((function(e){e.data.forEach((function(e){var a={id:e.drtypeid,value:e.drtypename};t.parentMenus.push(a)}))})).catch(console.log)})),Object(s["a"])(i,"saveDeviceType",(function(){var t=this,e=confirm("确定要保存菜单吗？一旦保存将覆盖右侧菜单");if(e){var a=this.$refs.leftTree.getCheckedKeys().concat(this.$refs.leftTree.getHalfCheckedKeys());a.forEach((function(t,e){void 0===t&&a.splice(e,1)}));var i=new FormData;i.append("drtypeids",a.join(","));var n=this.$loading({lock:!0,text:"数据正在导入数据库，请稍等",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(u["f"])(this.path,i).then((function(e){2e4===e.status&&(n.close(),t.$message.success("菜单保存成功!"),t.reload())})).catch(console.log)}})),Object(s["a"])(i,"findDeviceTypeApi",(function(){var t=this;Object(o["e"])(p["a"]).then((function(e){var a={id:0,drtypename:"全选",drtypeinfoList:e.data};t.totalTreeData.push(a)})).catch(console.log)})),Object(s["a"])(i,"projectfindDeviceTypeApi",(function(){var t=this;Object(o["e"])(this.path).then((function(e){t.deviceTypeTree=e.data,t.treeData=e.data})).catch(console.log)})),i),created:function(){this.initData()},mounted:function(){}},v=f,b=(a("16b2"),a("2877")),m=Object(b["a"])(v,n,r,!1,null,"07a13ac7",null);e["default"]=m.exports},"7bcf":function(t,e,a){"use strict";a.d(e,"e",(function(){return n})),a.d(e,"h",(function(){return r})),a.d(e,"g",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return p})),a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return u})),a.d(e,"i",(function(){return l})),a.d(e,"b",(function(){return d}));var i=a("b775");function n(t){return Object(i["a"])({url:"zsqy/Drtypeinfo/".concat(t,"/findAllDrtypeAndDr"),method:"get"})}function r(t,e){return Object(i["a"])({url:"zsqy/Drtypemode/".concat(t,"/export"),method:"get",responseType:"blob",params:{drtypeid:e}})}function s(t,e){return Object(i["a"])({url:"zsqy/Drtypemode/".concat(t,"/import"),method:"post",data:e})}function c(t){return Object(i["a"])({url:"zsqy/sub/".concat(t,"/findAll"),method:"get"})}function p(t){return Object(i["a"])({url:"zsqy/alarmtype/".concat(t,"/findAll"),method:"get"})}function o(t,e,a,n){return Object(i["a"])({url:"zsqy/Drtypemode/".concat(t,"/findObject"),method:"get",params:{pageCurrent:e,pageSize:a,drtypeid:n}})}function u(t,e){return Object(i["a"])({url:"zsqy/Drtypemode/".concat(t,"/save"),method:"post",data:e})}function l(t,e){return Object(i["a"])({url:"zsqy/Drtypemode/".concat(t,"/update"),method:"put",data:e})}function d(t,e){return Object(i["a"])({url:"zsqy/Drtypemode/".concat(t,"/delete"),method:"delete",params:{ids:e}})}},f788:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return p})),a.d(e,"g",(function(){return o})),a.d(e,"b",(function(){return u}));var i=a("b775");function n(){return Object(i["a"])({url:"zsqy/icon/findAll",method:"get"})}function r(t){return Object(i["a"])({url:"zsqy/pic/".concat(t,"/findObjectInPicmodeid"),method:"get"})}function s(t,e){return Object(i["a"])({url:"zsqy/Drtypeinfo/".concat(t,"/moveDrtypeAndModle"),method:"post",data:e})}function c(t){return Object(i["a"])({url:"zsqy/Drtypeinfo/".concat(t,"/findAllByIscustom"),method:"get",params:{iscustomType:0}})}function p(t,e){return Object(i["a"])({url:"zsqy/Drtypeinfo/".concat(t,"/save"),method:"post",data:e})}function o(t,e){return Object(i["a"])({url:"zsqy/Drtypeinfo/".concat(t,"/update"),method:"put",data:e})}function u(t,e){return Object(i["a"])({url:"zsqy/Drtypeinfo/".concat(t,"/delete"),method:"delete",params:{drtypeid:e}})}}}]);