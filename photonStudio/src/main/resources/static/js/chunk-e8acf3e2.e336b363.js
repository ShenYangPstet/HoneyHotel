(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8acf3e2"],{"0b4e":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"j",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"i",(function(){return l})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return p})),a.d(t,"k",(function(){return d})),a.d(t,"l",(function(){return h})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return m}));var n=a("b775");function i(e,t){return Object(n["a"])({url:"zsqy/user/findUser",method:"get",params:{pageCurrent:e,pageSize:t}})}function r(e){return Object(n["a"])({url:"zsqy/user/findUserByName",method:"get",params:{username:e}})}function s(){return Object(n["a"])({url:"zsqy/user/findAll",method:"get"})}function u(e){return Object(n["a"])({url:"zsqy/manager/findObjectByUser",method:"get",params:{userid:e}})}function l(e,t,a){return Object(n["a"])({url:"zsqy/appusergroup/findObject",method:"get",params:{pageCurrent:e,pageSize:t,userid:a}})}function o(e){return Object(n["a"])({url:"zsqy/usergroup/".concat(e,"/findAll"),method:"get"})}function c(e){return Object(n["a"])({url:"zsqy/user/saveUser",method:"post",data:e})}function p(e){return Object(n["a"])({url:"zsqy/appusergroup/save",method:"post",data:e})}function d(e){return Object(n["a"])({url:"zsqy/user/updateUser",method:"put",data:e})}function h(e){return Object(n["a"])({url:"zsqy/appusergroup/update",method:"put",data:e})}function f(e){return Object(n["a"])({url:"zsqy/user/deleteUser",method:"delete",params:{ids:e+","}})}function m(e,t,a,i){return Object(n["a"])({url:"zsqy/appusergroup/delete",method:"delete",params:{id:e,appid:t,appName:a,userid:i}})}},4599:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-container"},[a("div",{staticClass:"lay"},[a("div",{staticClass:"lay-left"},[e._m(0),e._v(" "),a("div",{staticClass:"admin-tablebox"},[a("div",{staticClass:"buiding-info"},[a("ul",[a("li",[e._m(1),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择用户名"},on:{change:e.selectUser},model:{value:e.input3,callback:function(t){e.input3=t},expression:"input3"}},e._l(e.usernameOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.username,value:e.id}})})),1)],1),e._v(" "),a("li",[e._m(2),e._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择项目名"},on:{change:e.selectProject},model:{value:e.input4,callback:function(t){e.input4=t},expression:"input4"}},e._l(e.projectOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.appexplain,value:e.appid}})})),1)],1),e._v(" "),a("li",[e._m(3),e._v(" "),a("el-select",{attrs:{clearable:"",placeholder:"请选择项目权限"},model:{value:e.input5,callback:function(t){e.input5=t},expression:"input5"}},e._l(e.projectPermission,(function(e){return a("el-option",{key:e.value,attrs:{label:e.usergroupname,value:e.id}})})),1)],1)]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handelAdd}},[e._v("增加权限")])],1)])]),e._v(" "),a("div",{staticClass:"lay-right"},[e._m(4),e._v(" "),a("div",{staticClass:"admin-tablebox"},[a("el-table",{staticClass:"admin-tree",attrs:{data:e.tableDatas2}},[a("af-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("af-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("af-table-column",{attrs:{prop:"appName",label:"项目名"}}),e._v(" "),a("af-table-column",{attrs:{prop:"usergroupname",label:"权限"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("\n                编辑\n              ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),e._v(" "),a("div",{staticClass:"el-pagination admin-pagination"},[a("div",{staticClass:"btn"},[a("button",{on:{click:e.prev}},[e._v("上一页")]),e._v(" "),a("span",[e._v(e._s(e.currentPage2))]),e._v(" "),a("button",{on:{click:e.next}},[e._v("下一页")])]),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.currentPage2,"page-sizes":[5,10,20,40],"page-size":e.pageSize2,layout:"total, sizes, jumper",total:e.rowCount2},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)])]),e._v(" "),a("el-dialog",{attrs:{title:"修改用户权限",visible:e.updateVisible2},on:{"update:visible":function(t){e.updateVisible2=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.editData2,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{readonly:"",clearable:""},model:{value:e.editData2.username,callback:function(t){e.$set(e.editData2,"username",t)},expression:"editData2.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名"}},[a("el-input",{attrs:{readonly:"",clearable:""},model:{value:e.editData2.appName,callback:function(t){e.$set(e.editData2,"appName",t)},expression:"editData2.appName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目权限"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择项目权限"},model:{value:e.editData2.usergroupname,callback:function(t){e.$set(e.editData2,"usergroupname",t)},expression:"editData2.usergroupname"}},e._l(e.projectPermission,(function(e){return a("el-option",{key:e.value,attrs:{label:e.usergroupname,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible2=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateTure}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-header"},[a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[e._v("权限编辑")])]),e._v(" "),a("div",{staticClass:"admin-header-right"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n                用户名\n              ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n                项目名\n              ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n                项目权限\n              ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-header"},[a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[e._v("权限详细")])]),e._v(" "),a("div",{staticClass:"admin-header-right"})])}],r=(a("96cf"),a("1da1")),s=(a("ac6a"),a("967e")),u=a.n(s),l=a("6c3c"),o=a("0b4e"),c=(a("ed08"),{inject:["reload"],name:"UserManage",data:function(){return{currentPage2:1,rowCount2:0,pageSize2:7,input3:"",input4:"",input5:"",permission:"",updateVisible2:!1,usernameOptions:[],projectOptions:[],projectPermission:[],editData2:{},tableDatas2:[]}},created:function(){var e=this;this.findUserRole(this.currentPage2,this.pageSize2),Object(o["e"])().then((function(t){e.usernameOptions=t.data})).catch(console.log)},methods:{faultTypestate:function(e,t){return 1==e.permission?"用户端":0==e.permission?"维修端":void 0},findUserRole:function(e,t,a){var n=this;Object(o["i"])(e,t,a).then((function(e){n.rowCount2=e.data.rowCount,n.tableDatas2=e.data.records})).catch(console.log)},handleSizeChange:function(e){this.pageSize2=e,this.currentpage2=1,this.findUserRole(this.currentPage2,this.pageSize2,this.input3)},handleCurrentChange:function(e){this.currentPage2=e,this.tableDatas2.length<this.rowCount2&&this.findUserRole(this.currentPage2,this.pageSize2,this.input3)},prev:function(){console.log(this.input3,"input3"),1===this.currentPage2?this.currentPage2=1:(this.currentPage2--,this.tableDatas2.length<this.rowCount2&&this.findUserRole(this.currentPage2,this.pageSize2,this.input3))},next:function(){console.log(this.input3,"input3");var e=Math.ceil(this.rowCount2/this.pageSize2);this.currentPage2<e&&(this.currentPage2++,this.tableDatas2.length<this.rowCount2&&this.findUserRole(this.currentPage2,this.pageSize2,this.input3))},selectUser:function(e){var t=this;this.findUserRole(this.currentPage2,this.pageSize2,e),Object(o["f"])(e).then((function(e){t.projectOptions=e.data})).catch(console.log)},selectProject:function(e){var t=this,a="";this.projectOptions.forEach((function(t){t.appid===e&&(a=e+t.appName)})),""!=e&&Object(o["g"])(a).then((function(e){t.projectPermission=e.data})).catch(console.log)},handelAdd:function(){var e=this;if(""===this.input3||""===this.input4||""===this.input5)this.$message.error("*为必填项，请重新填写！");else{var t="",a="",n="";this.usernameOptions.forEach((function(i){i.id===e.input3&&(t=i.username,a=i.phonenum,n=i.email)}));var i="";this.projectOptions.forEach((function(t){t.appid===e.input4&&(i=t.appName)}));var r=new FormData;r.append("userid",this.input3),r.append("username",t),r.append("appid",this.input4),r.append("appName",i),r.append("phonenum",a),r.append("email",n),r.append("appuserground",this.input5),Object(o["b"])(r).then((function(t){var a=t.msg;"OK"==a&&(e.$message.success("新增成功!"),e.reload())})).catch(console.log)}},handleEdit:function(e,t){var a=this;if(this.updateVisible2=!0,this.editData2=t,""!=this.editData2.usergroupname){var n=this.editData2.appid+this.editData2.appName;Object(o["g"])(n).then((function(e){a.projectPermission=e.data})).catch(console.log)}},updateTure:function(){var e=this,t=new FormData;t.append("id",this.editData2.id),t.append("userid",this.editData2.userid),t.append("appid",this.editData2.appid),t.append("appName",this.editData2.appName),t.append("appuserground",Object(l["c"])(this.editData2.usergroupname,this.projectPermission)),Object(o["l"])(t).then((function(t){var a=t.msg;"OK"==a&&(e.$message.success("修改成功!"),e.reload())})).catch(console.log)},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除用户信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(u.a.mark((function e(){var n,i;return u.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["d"])(t.id,t.appid,t.appName,t.userid);case 2:n=e.sent,i=n.status,2e4==i&&(a.$message.success("删除成功!"),a.reload());case 5:case"end":return e.stop()}}),e)})))).catch((function(){}))}}}),p=c,d=(a("7ff4"),a("2877")),h=Object(d["a"])(p,n,i,!1,null,"5c0f863a",null);t["default"]=h.exports},"6c3c":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));a("ac6a");function n(e,t){var a="";return isNaN(e)||null==e||"null"==e?""!=e&&null!=e&&"null"!=e?(t.forEach((function(t){e==t.value&&(a=t.id)})),a):a:e}function i(e,t){var a="";return null!=e&&"null"!=e&&""!==e?isNaN(parseInt(e))?e:(t.forEach((function(t){parseInt(e)==t.id&&(a=t.value)})),a):a}function r(e){return null===e||"null"===e?(e="",e):e}},7962:function(e,t,a){},"7ff4":function(e,t,a){"use strict";a("7962")}}]);