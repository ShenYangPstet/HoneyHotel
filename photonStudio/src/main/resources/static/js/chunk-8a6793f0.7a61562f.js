(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a6793f0"],{"013a":function(e,t,n){},"0345":function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return l}));var a=n("b775");function i(e,t){return Object(a["a"])({url:"zsqy/drinfo/".concat(e,"/findDr"),method:"get",params:{drid:t}})}function r(e,t){return Object(a["a"])({url:"zsqy/regdata/".concat(e,"/findObjByDrid"),method:"post",data:t})}function s(e,t){return Object(a["a"])({url:"zsqy/qsAlarmlog/".concat(e,"/findObjectByDrid"),method:"post",data:t})}function o(e,t,n){return Object(a["a"])({url:"zsqy/qsLdJgr/".concat(e,"/doimplements"),method:"get",params:{appid:t,msg:n}})}function l(e,t){return Object(a["a"])({url:"zsqy/qsLdJgr/".concat(e,"/doimplements"),method:"post",data:t})}},"0384":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"switchreg",style:{background:e.state?e.activeBgc:e.inactiveBgc},on:{click:function(t){e.ispage.includes("/device/index/")&&e.funcSwitchReg()}}},[e._v("\n  "+e._s(e.propValue)+"\n")])},i=[],r={props:{propValue:{type:String,default:""},element:{type:Object,default:function(){}}},components:{},data:function(){return{ispage:this.$route.path,loading:!1,state:!0,activeBgc:"linear-gradient(90deg, #3db8ff 0%, rgba(53, 138, 225, 0.77) 52%, #3db8ff 100%)",inactiveBgc:"linear-gradient(90deg, #acc9e0 0%, rgba(185, 203, 218, 0.77) 52%, #acc9e0 100%)"}},computed:{},watch:{},methods:{funcSwitchReg:function(){this.state=!this.state,this.$store.commit("drag/set_switchRegstate",this.state)}},created:function(){},mounted:function(){}},s=r,o=(n("5244"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"d0991684",null);t["default"]=l.exports},"09b5":function(e,t,n){},"0bb3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("iframe",{attrs:{src:e.element.propValue}})},i=[],r={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{src:""}},watch:{"element.style.src":{handler:function(e,t){this.src=e}},deep:!0}},s=r,o=(n("d807"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"8dbf4e80",null);t["default"]=l.exports},"0c33":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-search"},[n("el-input",{staticClass:"searchText",attrs:{placeholder:"设备名称、视频ID",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.eventSearch(e.element.events)}}},[e._v("\n    "+e._s(e.propValue)+"\n  ")])],1)},i=[],r={props:{propValue:{type:String,default:""},element:{type:Object,default:function(){}}},data:function(){return{searchValue:""}},methods:{eventSearch:function(e){console.log(this.element,this.searchValue,"e"),this.$store.commit("project/SET_SEARCHTEXT",this.searchValue)}}},s=r,o=(n("dc7d"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"55e5b912",null);t["default"]=l.exports},"0d34":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("el-dialog",{attrs:{title:"报警记录",visible:e.alarminfoVisible,width:"70%","append-to-body":""},on:{"update:visible":function(t){e.alarminfoVisible=t}}},[n("div",{staticClass:"alarm-records"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini"}},[n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.alarmStartTime,callback:function(t){e.alarmStartTime=t},expression:"alarmStartTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"结束时间"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.alarmEndTime,callback:function(t){e.alarmEndTime=t},expression:"alarmEndTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"级别"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择报警级别"},model:{value:e.alarmLevel,callback:function(t){e.alarmLevel=t},expression:"alarmLevel"}},e._l(e.alarmLevelOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.alarmtypename,value:e.alarmtypelevel}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"应答"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择应答"},model:{value:e.respond,callback:function(t){e.respond=t},expression:"respond"}},e._l(e.respondOption,(function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.getAlarmRecordsApi}},[e._v("查询")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.alarmTableData,"max-height":"500","default-sort":{prop:"time",order:"descending"}}},[n("el-table-column",{attrs:{prop:"time",label:"时间",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"drname",label:"设备名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"regName",label:"变量名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmvalue",label:"参数值"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmtypename",label:"级别"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmanswer",label:"应答"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmhandle",label:"应答说明"}})],1)],1)])],1)},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("96cf"),n("1da1")),s=n("ade3"),o=(n("c5f6"),n("967e")),l=n.n(o),c=n("2f62"),u=n("ed08"),d=n("0345"),p=n("e465");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={props:{visible:{type:Boolean,default:!1},drid:{type:Number,default:""}},components:{},data:function(){return{alarmStartTime:"",alarmEndTime:"",alarmLevel:"",alarmLevelOptions:[],respond:"",respondOption:[{id:1,value:"报警"},{id:2,value:"误报"},{id:3,value:"测试"}],alarmTableData:[]}},computed:h(h({},Object(c["b"])(["path"])),{},{alarminfoVisible:{get:function(){return this.visible},set:function(e){this.$emit("updateVisible",e)}}}),watch:{},methods:{getAlarmRecordsApi:function(){var e=Object(r["a"])(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.alarmStartTime||!this.alarmEndTime){e.next=7;break}return t={drid:this.drid,startTime:this.alarmStartTime,endTime:this.alarmEndTime,alarmtypelevel:this.alarmLevel,alarmanswer:this.respond},e.next=4,Object(d["b"])(this.path,this.$formatJson(t));case 4:n=res,a=n.data,this.alarmTableData=a,this.alarmTableData.forEach((function(e){e.time=Object(u["c"])(e.time)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),findAlarmLevelApi:function(){var e=Object(r["a"])(l.a.mark((function e(){var t;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["b"])(this.path);case 2:t=e.sent,this.alarmLevelOptions=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getAlarmRecordsApi(),this.findAlarmLevelApi()},mounted:function(){}},v=m,b=(n("818f"),n("2877")),g=Object(b["a"])(v,a,i,!1,null,"50cfa94a",null);t["default"]=g.exports},"0ef3":function(e,t,n){"use strict";n("4a67")},"0ff8":function(e,t,n){},1511:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"property"},[n("div",{staticClass:"property-info"},[n("p",[n("span",[e._v("产品型号:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drManufactureStyle))])]),e._v(" "),n("p",[n("span",[e._v("生产厂家:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drManufactureFactory))])]),e._v(" "),n("p",[n("span",[e._v("厂家电话:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drFactoryphone))])]),e._v(" "),n("p",[n("span",[e._v("安装时间:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drInstallTime))])]),e._v(" "),n("p",[n("span",[e._v("安装厂家:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drInstallFactory))])]),e._v(" "),n("p",[n("span",[e._v("联系人:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drInstallPhone))])]),e._v(" "),n("p",[n("span",[e._v("使用情况:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drUseState))])]),e._v(" "),n("p",[n("span",[e._v("使用说明:")]),e._v(" "),n("span",[e._v(e._s(e.propertyInfo.drUseExplain))])])]),e._v(" "),n("div",{staticClass:"QRcode"},[n("div",{ref:"qrcode",attrs:{id:"qrcode"}})])])},i=[],r={props:["propertyInfo"],components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){}},s=r,o=(n("47d6"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"177ba533",null);t["default"]=l.exports},"185a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"drmap",attrs:{visible:e.isshowdevicemap,"append-to-body":"",title:e.dialogTitle,center:"",modal:!1,width:e.structureWidth,height:"100%"},on:{"update:visible":function(t){e.isshowdevicemap=t},close:function(t){e.isshowdevicemap=!1}}},[n("div",{style:e.structureStyle},e._l(e.componentData,(function(e,t){return n("ComponentWrapper",{key:t,attrs:{config:e}})})),1)])},i=[],r=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),s=n("2f62"),o=n("8898"),l=n("6386");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={props:{visible:{type:Boolean,default:!1},drInfo:{type:Object,default:{}},drElementInfo:{type:Object}},components:{ComponentWrapper:o["a"]},data:function(){return{dialogTitle:"结构图",canvasStyleData:{},componentData:[],drid:"",structureWidth:"",structureStyle:""}},computed:u(u({},Object(s["b"])(["path"])),{},{isshowdevicemap:{get:function(){return this.visible},set:function(e){this.$emit("closeES",e)}}}),watch:{drElementInfo:{deep:!0,immediate:!0,handler:function(e){if(e){this.devicetypeInfo=[];var t=JSON.parse(e.canvasData),n=JSON.parse(e.canvasStyle);this.canvasStyleData=n,this.componentData=Object(l["c"])(t);var a=parseInt(n.width);this.structureWidth=a+60+"px",this.structureStyle="width:".concat(a,"px;height:").concat(n.height,"px;")}}},drInfo:{deep:!0,immediate:!0,handler:function(e,t){e&&(this.drid=e.drid,this.dialogTitle="".concat(e.drname,"结构图"))}}},methods:{},created:function(){},mounted:function(){}},p=d,f=(n("3938"),n("cfd9"),n("2877")),h=Object(f["a"])(p,a,i,!1,null,"7f72d05a",null);t["default"]=h.exports},"1f97":function(e,t,n){},"20f2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isClicked,expression:"!isClicked"}],class:e.isSearchImage?"device devicelarge":"device",on:{click:function(t){return e.handleDevice()}}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[e.element.drInfo?n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[e._v("设备ID: "+e._s(e.element.drInfo.drid))]),e._v(" "),n("p",[e._v("设备名称: "+e._s(e.element.drInfo.drname))]),e._v(" "),e.element.drInfo.spid?n("p",[e._v("视频ID: "+e._s(e.element.drInfo.spid))]):e._e(),e._v(" "),e.element.drInfo.mdcode?n("p",[e._v("\n          统一编码: "+e._s(e.element.drInfo.mdcode)+"\n        ")]):e._e()]):e._e(),e._v(" "),n("el-image",{staticStyle:{display:"block",width:"100%",height:"100%",cursor:"pointer"},attrs:{src:this.global.baseUrl+e.element.propValue}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])])],1),e._v(" "),n("equipment-structure",{attrs:{visible:e.equipmentStructure.show,drElementInfo:e.equipmentStructure.drTypeElementInfo,drInfo:e.element.drInfo},on:{"update:visible":function(t){return e.$set(e.equipmentStructure,"show",t)},closeES:e.closeEquipmentStructure}}),e._v(" "),n("device-params",{attrs:{isdeviceParamsShow:e.deviceParams.show,drname:e.deviceName,readParams:e.canBeReadParams,readAndWriteParams:e.canReadButWriteParams,inputdata:e.inputdata,optinosdata:e.optinosdata},on:{closeDP:e.closeDeviceParam,openDPTimer:e.opendeviceTimer,submitDPReg:e.submitReg}}),e._v(" "),e.switchgear.show?n("SwitchgearPopupBox",{attrs:{PopupBoxobj:e.switchgear.obj},on:{closepopup:function(t){e.switchgear.show=!1},closeDevice:e.closeSwitchgear,openDevice:e.openSwitchgear}}):e._e(),e._v(" "),n("el-drawer",{staticClass:"drawer-wapper",attrs:{visible:e.drawer.show,wrapperClosable:!0,withHeader:!1,"append-to-body":!0,modal:!1,direction:"btt"},on:{"update:visible":function(t){return e.$set(e.drawer,"show",t)},close:e.closeTab}},[n("div",{staticClass:"device-drawer"},[n("div",{staticClass:"device-drawer-nav"},e._l(e.tabnamelist,(function(t,a){return n("div",{key:a,class:e.drawer.tabIndex==a?"device-drawer-nav-li active":"device-drawer-nav-li",on:{click:function(n){return e.handleTabinfo(t,a)}}},[e._v("\n            "+e._s(t.value)+"\n          ")])})),0),e._v(" "),n("div",{staticClass:"device-drawer-info"},e._l(e.tabnamelist,(function(t){return n("div",{key:t.id},[0==t.id?n("div",[e.drawer.isCollectionParams?n("CollectionParams",{attrs:{drname:e.deviceName,readParams:e.canBeReadParams,readAndWriteParams:e.canReadButWriteParams,inputdata:e.inputdata,optinosdata:e.optinosdata},on:{openCPTimer:e.opendeviceTimer,submitReg:e.submitReg}}):e._e()],1):e._e(),e._v(" "),1==t.id?n("div",[e.drawer.isProperty?n("Property",{attrs:{propertyInfo:e.drawer.propertyInfo}}):e._e()],1):e._e(),e._v(" "),2==t.id?n("div",[e.drawer.visibleHistory?n("HistoryData",{attrs:{visible:e.drawer.visibleHistory,drid:e.deviceId,drname:e.deviceName},on:{"update:visible":function(t){return e.$set(e.drawer,"visibleHistory",t)},updateVisible:e.updateVisibleId}}):e._e()],1):e._e(),e._v(" "),3==t.id?n("div",[e.drawer.visibleAlarm?n("AlarmRecord",{attrs:{visible:e.drawer.visibleAlarm,drid:e.deviceId},on:{"update:visible":function(t){return e.$set(e.drawer,"visibleAlarm",t)},updateVisible:e.closeAlarm}}):e._e()],1):e._e()])})),0),e._v(" "),n("div",{staticClass:"device-drawer-close"},[n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.closeTab()}}})])])])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isClicked,expression:"isClicked"}]},[n("i",{staticClass:"el-icon-loading",staticStyle:{color:"#e6a23c"}})])])},i=[],r=(n("8e6e"),n("456d"),n("28a5"),n("ac6a"),n("96cf"),n("1da1")),s=(n("6762"),n("2fdb"),n("ade3")),o=n("967e"),l=n.n(o),c=n("0345"),u=n("a140"),d=n("1511"),p=n("7c9f"),f=n("a07f"),h=n("2f62"),m=n("f1c4"),v=n("2480"),b=n("185a"),g=n("681f"),y=[{id:"0",value:"参数信息"},{id:"1",value:"资产信息"},{id:"2",value:"历史数据"},{id:"3",value:"报警记录"}],w=n("d42d"),O=n("d8ad");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={components:{CollectionParams:u["default"],Property:d["default"],HistoryData:p["default"],AlarmRecord:f["default"],SwitchgearPopupBox:v["default"],EquipmentStructure:b["default"],DeviceParams:g["default"]},props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){return null}}},data:function(){return{pageId:null,isClicked:!1,deviceId:"",deviceName:"",equipmentStructure:{show:!1,drTypeElementInfo:null},deviceParams:{show:!1},tabnamelist:y,drawer:{show:!1,tabIndex:0,isCollectionParams:!1,isProperty:!1,visibleHistory:!1,visibleAlarm:!1,propertyInfo:{}},switchgear:{show:!1,obj:{}},canBeReadParams:[],canReadButWriteParams:[],inputdata:[],optinosdata:[],paramsTimer:null,collectTimer:null,isSearchImage:!1}},computed:x(x({},Object(h["c"])({canvasStyleData:function(e){return e.drag.canvasStyleData}})),Object(h["b"])(["path","userid","searchText"])),watch:{searchText:{handler:function(e,t){-1===this.element.drInfo.spid.toLowerCase().indexOf(e.toLowerCase())&&-1===this.element.drInfo.drname.toLowerCase().indexOf(e.toLowerCase())||""==e?this.isSearchImage=!1:this.isSearchImage=!0}}},created:function(){var e=this;this.$route.query.id&&(this.pageId=this.$route.query.id),O["a"].$on("_controlTimes",(function(t){console.log("eventBus:"+t),t?e.setCollectTime():e.clearAllInterval()}))},mounted:function(){},methods:{handleDevice:function(){var e=this,t=this.$route.path;if(this.clearAllInterval(),t.includes("/device/index/")){this.isClicked=!0,setTimeout((function(){e.isClicked=!1}),3e3);var n=this.element.drInfo;this.deviceName=this.element.drInfo.drname,this.deviceId=this.element.drInfo.drid,this.$store.commit("device/SetDrInfo",this.element);var a=this.canvasStyleData.selectedBtnId;0===a?(this.drawer.isCollectionParams=!0,this.getDeviceInfo(),n.spid&&this.popupVideo(n.spid),0==n.typeYT&&this.setParamsTimer()):1===a&&(this.getDeviceStyleByDrtypeIdApi(this.deviceId),this.setCollectTime())}else this.drawer.show=!1},getDeviceStyleByDrtypeIdApi:function(){var e=Object(r["a"])(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(w["b"])(this.path,t);case 2:n=e.sent,a=n.data,a?(this.equipmentStructure.show=!0,this.equipmentStructure.drTypeElementInfo=a):(this.equipmentStructure.show=!1,this.$message.warning("该设备暂无结构图哦!"));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),closeEquipmentStructure:function(){this.equipmentStructure.show=!1,this.clearAllInterval()},collecttask:function(){var e=Object(r["a"])(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.equipmentStructure.show){e.next=8;break}return e.next=3,Object(w["b"])(this.path,this.deviceId);case 3:t=e.sent,n=t.data,n&&(this.equipmentStructure.drTypeElementInfo=n),e.next=9;break;case 8:this.clearAllInterval();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDeviceParam:function(){this.deviceParams.show=!1,this.clearAllInterval()},opendeviceTimer:function(e){e?this.setParamsTimer():this.clearAllInterval()},submitReg:function(){this.clearAllInterval(),this.setParamsTimer()},openSwitchgear:function(){this.handelopenDevice(this.deviceId,"1"),this.switchgear.show=!1},closeSwitchgear:function(){this.clearAllInterval(),"取消"==this.switchgear.obj.cancelButtonText?this.switchgear.show=!1:(this.switchgear.show=!1,this.handelopenDevice(this.deviceId,"0"))},handelopenDevice:function(){var e=Object(r["a"])(l.a.mark((function e(t,n){var a,i,r=this;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])(this.path,t);case 2:a=e.sent,i=a.data[0].reglist||[],i.forEach((function(e){"2"===e.regReadWrite&&(null!=e.tagName&&""!=e.tagName?r.controlDeviceApi(e.tagName,n):r.$message.warning("该变量没有绑定寄存器，无法控制"))}));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),controlDeviceApi:function(e,t){var n=this,a=e+":"+t;Object(c["e"])(this.path,parseInt(this.path),a).then((function(e){2e4===e.status&&n.$message.success("已下发至设备,请等待设备反馈!")})).catch(console.log)},specialDevice:function(e,t){1==e||2==e?this.setPopupBoxInfo(t,"开启","取消"):3==e&&this.setPopupBoxInfo(t,"开启","关闭")},setPopupBoxInfo:function(e,t,n){this.switchgear.show=!0,this.switchgear.obj={text:"是否开启或关闭".concat(e,"设备?"),confirmButtonText:t,cancelButtonText:n}},handleTabinfo:function(e,t){this.drawer.tabIndex=t,"0"==e.id?(this.drawer.isCollectionParams=!0,this.drawer.isProperty=!1,this.getDeviceInfo(),this.setParamsTimer()):"1"==e.id?this.getPropertyInfoApi():"2"==e.id?(this.drawer.visibleHistory=!0,this.clearAllInterval()):"3"==e.id&&(this.drawer.visibleAlarm=!0,this.clearAllInterval())},getDeviceInfo:function(){var e=Object(r["a"])(l.a.mark((function e(){var t,n,a,i,r,s,o,c,u,d,p=this;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])(this.path,this.deviceId);case 2:if(t=e.sent,n=t||{},a=n.data,this.isClicked=!1,i=a[0].typeYT,r=a[0].drname,0==i){e.next=10;break}return this.specialDevice(i,r),e.abrupt("return");case 10:s=a[0].reglist||[],o=[],c=[],u=[],d=[],s.forEach((function(e,t){var n=e.newtagvalue||e.tagValue;e.tagValue=n,"1"===e.regReadWrite?o.push(e):"2"===e.regReadWrite&&(c.push(e),d.push(p.handleRegitemObj(e)))})),u=this.handlecanReadButWriteParams(c),this.removeData(),this.canBeReadParams=o,c.forEach((function(e,t){e.originalIndex=t})),this.canReadButWriteParams=c,this.inputdata=u,this.optinosdata=d,this.handelShowDeviceInfo(a[0]);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleRegitemObj:function(e){var t=[],n=[],a=[];if(e.subinfoList){var i=e.subinfoList;i.length>0&&i.forEach((function(t){t.subid===parseInt(e.regSub)&&(a={id:t.value,value:t.text},n.push(a))}))}t.push(n);var r=[];return t.forEach((function(e){r.push(e)})),r},popupVideo:function(e){e&&window.open("NetVideoPlant:Command["+e+"]","_self")},handelShowDeviceInfo:function(e){if(1==e.parameterDisplay){var t=e.parameterList;if(t.includes("1")||t.includes("2")||t.includes("3")){this.drawer.show=!0;var n=t.split(","),a=this.tabnamelist.filter((function(e){return n.includes(e.id)}));this.tabnamelist=a}else"0"===t&&(this.drawer.show=!1,this.deviceParams.show=!0)}},handlecanReadButWriteParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(e,"处理可读可写属性");var t=[];return e.length>0&&e.forEach((function(e){if(e.subinfoList){var n=e.subinfoList;n.forEach((function(n){e.regSub&&e.regSub==n.subid&&"1"==n.valueType&&e.tagValue==n.value?t.push(n.text):(e.regSub&&e.regSub==n.subid&&"2"==n.valueType&&"1"==n.andOr&&e.tagValue>=n.valueMin&&e.tagValue<=n.valueMax||e.regSub&&e.regSub==n.subid&&"2"==n.valueType&&"2"==n.andOr&&(e.tagValue<n.valueMin||e.tagValue>n.valueMax))&&t.push(e.tagValue)}))}e.regSub||t.push(e.tagValue)})),t},getPropertyInfoApi:function(){var e=Object(r["a"])(l.a.mark((function e(){var t;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.drawer.isCollectionParams=!1,this.drawer.isProperty=!0,this.clearAllInterval(),e.next=5,Object(c["d"])(this.path,this.deviceId);case 5:t=e.sent,this.drawer.propertyInfo=t.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),timingTask:function(){var e=Object(r["a"])(l.a.mark((function e(){var t,n,a,i,r,s,o,c,u=this;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])(this.path,this.deviceId);case 2:t=e.sent,n=t||{},a=n.data,i=a[0].reglist||[],this.removeData(),r=[],s=[],o=[],c=[],i.forEach((function(e){var t=e.newtagvalue||e.tagValue;e.tagValue=t,"1"===e.regReadWrite?r.push(e):"2"===e.regReadWrite&&(s.push(e),c.push(u.handleRegitemObj(e)))})),o=this.handlecanReadButWriteParams(s),this.canBeReadParams=r,s.forEach((function(e,t){e.originalIndex=t})),this.canReadButWriteParams=s,this.inputdata=o,this.optinosdata=c;case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateVisibleId:function(e){this.drawer.visibleHistory=e,this.drawer.tabIndex=0,this.getDeviceInfo()},closeAlarm:function(e){this.drawer.visibleAlarm=e,this.drawer.tabIndex=0},removeData:function(){this.canBeReadParams=[],this.canReadButWriteParams=[],this.inputdata=[],this.optinosdata=[]},closeTab:function(){this.drawer.show=!1,this.clearAllInterval()},setParamsTimer:function(){var e=this;this.paramsTimer||(this.clearAllInterval(),this.paramsTimer=setInterval((function(){e.timingTask()}),3e3))},clearParamsTimer:function(){clearInterval(this.paramsTimer),this.paramsTimer=null},setCollectTime:function(){var e=this;this.collectTimer||(this.collectTimer=setInterval((function(){e.collecttask()}),3e3))},clearCollectTime:function(){clearInterval(this.collectTimer),this.collectTimer=null},clearAllInterval:function(){this.clearCollectTime(),this.clearParamsTimer()}},destroyed:function(){this.clearAllInterval()}},j=S,P=(n("cde9"),n("ef7a"),n("2877")),C=Object(P["a"])(j,a,i,!1,null,"17d48a68",null);t["default"]=C.exports},"23da":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"edit"==e.editMode?n("div",{staticClass:"v-text",on:{keydown:e.handleKeydown,keyup:e.handleKeyup}},[n("div",{ref:"text",staticClass:"btnbox",class:{canEdit:e.canEdit},style:{verticalAlign:e.element.style.verticalAlign,fontFamily:e.element.style.fontFamily,lineHeight:e.element.style.height+"px"},attrs:{contenteditable:e.canEdit,id:"badge",tabindex:e.element.id},domProps:{innerHTML:e._s(e.element.propValue)},on:{dblclick:function(t){!e.ispage.includes("/device/index/")&&e.setEdit()},paste:e.clearStyle,mousedown:e.handleMousedown,blur:e.handleBlur,input:e.handleInput,click:function(t){return e.btnimgshow()}}}),e._v(" "),e.imgshow?n("div",{ref:"img",staticClass:"img",style:{width:e.element.style.width+"px",height:e.element.style.imgheight+"px",background:"url("+(this.global.baseUrl+e.element.style.imgbackgroundImage)+") 0 0 / 100% 100%"}}):e._e()]):n("div",{staticClass:"v-text preview"},[n("div",{style:{verticalAlign:e.element.style.verticalAlign},domProps:{innerHTML:e._s(e.element.propValue)}})])},i=[],r=(n("6762"),n("2fdb"),n("2f62")),s=n("590f"),o={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{imgshow:!1,ispage:this.$route.path,canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:Object(r["c"])({editMode:function(e){return e.drag.editMode}}),methods:{btnimgshow:function(){this.imgshow=!this.imgshow},handleInput:function(e){this.$emit("input",this.element,e.target.innerHTML)},handleKeydown:function(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&s["a"].includes(e.keyCode)||46==e.keyCode)&&e.stopPropagation()},handleKeyup:function(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown:function(e){this.canEdit&&e.stopPropagation()},clearStyle:function(e){e.preventDefault();var t=e.clipboardData,n=t.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,e.target.innerHTML)},handleBlur:function(e){var t=this;this.element.propValue=e.target.innerHTML||"&nbsp;";var n=e.target.innerHTML;""!==n?this.element.propValue=e.target.innerHTML:(this.element.propValue="",this.$nextTick((function(){t.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit:function(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText:function(e){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}},l=o,c=(n("79c5"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"6359acbc",null);t["default"]=u.exports},2430:function(e,t,n){},2480:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"switchgearPop_upBox"},[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[n("span",[e._v("提示")]),e._v(" "),n("i",{staticClass:"el-icon-close",on:{click:function(t){return e.closepopup()}}})])]),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"message"},[n("p",[e._v("\n        "+e._s(e.PopupBoxobj.text)+"\n      ")])])]),e._v(" "),n("div",{staticClass:"btns"},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.open()}}},[e._v("\n      "+e._s(e.PopupBoxobj.confirmButtonText)+"\n    ")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.close()}}},[e._v("\n      "+e._s(e.PopupBoxobj.cancelButtonText)+"\n    ")])],1)])},i=[],r={props:{visible:{type:Boolean,default:!1},PopupBoxobj:{type:Object}},components:{},data:function(){return{}},computed:{},watch:{},methods:{close:function(){this.$emit("closeDevice")},open:function(){this.$emit("openDevice")},closepopup:function(){this.$emit("closepopup")}},created:function(){},mounted:function(){var e=this;this.$nextTick((function(){var t=document.querySelector("body");t.append?t.append(e.$el):t.appendChild(e.$el)}))}},s=r,o=(n("36c4"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"18a28239",null);t["default"]=l.exports},"28da":function(e,t,n){},"2edf":function(e,t,n){"use strict";n("013a")},"36c4":function(e,t,n){"use strict";n("4d79")},3761:function(e,t,n){},"379c":function(e,t,n){var a={"./":"9210","./Circular":"bf27","./Circular.vue":"bf27","./Device":"20f2","./Device.vue":"20f2","./Devicetype":"746e","./Devicetype.vue":"746e","./Group":"736d","./Group.vue":"736d","./Iframe":"0bb3","./Iframe.vue":"0bb3","./Legend":"23da","./Legend.vue":"23da","./Picture":"ac55","./Picture.vue":"ac55","./RectShape":"43dc","./RectShape.vue":"43dc","./SVGEllipse":"5656","./SVGEllipse.vue":"5656","./SVGHexagon":"df7a","./SVGHexagon.vue":"df7a","./SVGPolygon":"8f87","./SVGPolygon.vue":"8f87","./SVGStar":"4037","./SVGStar.vue":"4037","./SVGTriangle":"6274","./SVGTriangle.vue":"6274","./SwitchReg":"0384","./SwitchReg.vue":"0384","./TextMarkup":"bd38","./TextMarkup.vue":"bd38","./VButton":"dcb2","./VButton.vue":"dcb2","./VLine":"a980","./VLine.vue":"a980","./VSearch":"0c33","./VSearch.vue":"0c33","./VText":"d02c","./VText.vue":"d02c","./component-list":"4e67","./component-list.js":"4e67","./components/Chartcmp/ringchart":"f25c","./components/Chartcmp/ringchart.vue":"f25c","./components/EquipmentStructure":"185a","./components/EquipmentStructure/":"185a","./components/EquipmentStructure/index":"185a","./components/EquipmentStructure/index.vue":"185a","./components/Popupbox":"2480","./components/Popupbox/":"2480","./components/Popupbox/DeviceParams":"681f","./components/Popupbox/DeviceParams.vue":"681f","./components/Popupbox/EditableVirtualList":"8587","./components/Popupbox/EditableVirtualList.vue":"8587","./components/Popupbox/ReadonlyVirtualList":"759b","./components/Popupbox/ReadonlyVirtualList.vue":"759b","./components/Popupbox/index":"2480","./components/Popupbox/index.vue":"2480","./components/Popuptabs/AlarmRecord":"a07f","./components/Popuptabs/AlarmRecord.vue":"a07f","./components/Popuptabs/Alarminfo":"0d34","./components/Popuptabs/Alarminfo.vue":"0d34","./components/Popuptabs/collectionparams":"a140","./components/Popuptabs/collectionparams.vue":"a140","./components/Popuptabs/historydata":"7c9f","./components/Popuptabs/historydata.vue":"7c9f","./components/Popuptabs/property":"1511","./components/Popuptabs/property.vue":"1511","./components/chart/HistoryLine":"5f5d","./components/chart/HistoryLine.vue":"5f5d","./index":"9210","./index.js":"9210"};function i(e){var t=r(e);return n(t)}function r(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id="379c"},"386d":function(e,t,n){"use strict";var a=n("cb7c"),i=n("83a1"),r=n("5f1b");n("214f")("search",1,(function(e,t,n,s){return[function(n){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a):new RegExp(n)[t](String(a))},function(e){var t=s(n,e,this);if(t.done)return t.value;var o=a(e),l=String(this),c=o.lastIndex;i(c,0)||(o.lastIndex=0);var u=r(o,l);return i(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))},3938:function(e,t,n){"use strict";n("2430")},4037:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"svg-star-container"},[n("svg",{attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg"}},[n("polygon",{ref:"star",attrs:{points:e.points,stroke:e.element.style.borderColor,fill:e.element.style.backgroundColor,"stroke-width":"1"}})])])},i=[],r=(n("6b54"),{props:{element:{type:Object,default:function(){}}},data:function(){return{points:""}},watch:{"element.style.width":function(){this.draw()},"element.style.height":function(){this.draw()}},mounted:function(){this.draw()},methods:{draw:function(){var e=this.element.style,t=e.width,n=e.height;this.drawPolygon(t,n)},drawPolygon:function(e,t){var n=[[.5,0],[.625,.375],[1,.375],[.75,.625],[.875,1],[.5,.75],[.125,1],[.25,.625],[0,.375],[.375,.375]],a=n.map((function(n){return e*n[0]+" "+t*n[1]}));this.points=a.toString()}}}),s=r,o=(n("c85b"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"59e3007c",null);t["default"]=l.exports},"43dc":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rect-shape"},[n("v-text",{attrs:{"prop-value":e.element.propValue,element:e.element}})],1)},i=[],r={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}}},s=r,o=(n("2edf"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"0ad5de2a",null);t["default"]=l.exports},4425:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return y}));n("96cf"),n("386d"),n("28a5");var a=n("1da1"),i=n("967e"),r=n.n(i),s=n("4360"),o=n("0345"),l=n("ff97"),c=s["a"].getters.path,u=s["a"].getters.projectId;function d(e,t,n){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(r.a.mark((function e(t,n,a){var i,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["e"])(t,n,a);case 2:i=e.sent,s=i.status,2e4==s&&Object(l["a"])("已下发至设备,请等待设备反馈!!","success");case 5:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(c,t);case 2:n=e.sent,a=n.status,2e4==a&&Object(l["a"])("已下发至设备!!","success");case 5:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(e){var t={appid:u,msg:e};f(t)}function v(e){var t=e.split("_"),n=t[0],a=t[1],i=s["a"].state.drag.switchRegstate;m(i?n:a)}var b={redirect:function(e){e&&(1===e.redirectType?this.$router.push(e.redirectUrl):window.open(e.redirectUrl,"_blank"))},script:function(e){if(-1!=e.search("sendReg")){var t=e.slice(8,e.length-1);d(c,u,t)}else if(-1!=e.search("playVideo")){var n=e.slice(10,e.length-1);window.open("NetVideoPlant:Command["+n+"]","_self")}else if(-1!=e.search("wakeupApp")){var a=e.slice(10,e.length-1);window.open(a,"_blank")}else if(-1!=e.search("switchReg")){var i=e.slice(10,e.length-1);v(i)}}},g={methods:b},y=[{key:"redirect",label:"跳转事件",event:b.redirect,param:{redirectType:1,redirectUrl:""}},{key:"script",label:"脚本",param:""}]},"47d6":function(e,t,n){"use strict";n("28da")},"4a67":function(e,t,n){},"4d79":function(e,t,n){},"4eac":function(e,t,n){},5070:function(e,t,n){},5244:function(e,t,n){"use strict";n("b48f")},5656:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"svg-triangle-container"},[n("svg",{attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg"}},[n("ellipse",{attrs:{cx:e.rx,cy:e.ry,rx:e.rx,ry:e.ry,stroke:e.element.style.borderColor,fill:e.element.style.backgroundColor,"stroke-width":"0"}})])])},i=[],r={props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{rx:0,ry:0}},watch:{"element.style.width":function(){this.draw()},"element.style.height":function(){this.draw()}},mounted:function(){this.draw()},methods:{draw:function(){var e=this.element.style,t=e.width,n=e.height;this.drawTriangle(t,n)},drawTriangle:function(e,t){this.rx=e/2,this.ry=t/2}}},s=r,o=(n("0ef3"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"5667fde2",null);t["default"]=l.exports},"590f":function(e,t,n){"use strict";n.d(t,"a",(function(){return V})),n.d(t,"b",(function(){return R}));n("8e6e"),n("456d"),n("ac6a"),n("673e");var a,i,r=n("ade3"),s=n("4360"),o=n("cbe5a"),l=n("ab2a"),c=n("4128"),u=n.n(c);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=17,h=91,m=86,v=67,b=88,g=89,y=90,w=71,O=66,_=76,x=85,S=83,j=80,P=68,C=46,k=69,T=37,I=38,D=39,E=40,V=[66,67,68,69,71,76,80,83,85,86,88,89,90],N=(a={},Object(r["a"])(a,m,z),Object(r["a"])(a,g,U),Object(r["a"])(a,y,F),Object(r["a"])(a,S,J),Object(r["a"])(a,j,X),Object(r["a"])(a,k,Q),a),A=p(p({},N),{},Object(r["a"])({},x,ee)),L=p(p({},N),{},(i={},Object(r["a"])(i,v,H),Object(r["a"])(i,b,W),Object(r["a"])(i,w,K),Object(r["a"])(i,O,G),Object(r["a"])(i,P,Y),Object(r["a"])(i,C,Y),Object(r["a"])(i,_,Z),i)),M=!1;function R(){window.onkeydown=function(e){if(s["a"].state.drag.isInEdiotr){var t=s["a"].state.drag.curComponent,n=e.keyCode;n==T?B("left"):n==I?B("up"):n==D?B("right"):n==E?B("down"):n===f||n===h?(M=!0,q("isCtrl",!0)):n==C&&t?(s["a"].commit("drag/deleteComponent"),s["a"].commit("drag/recordSnapshot")):M&&(!L[n]||t&&t.isLock?A[n]&&t&&t.isLock&&(e.preventDefault(),A[n]()):(e.preventDefault(),L[n]()))}},window.onkeyup=function(e){e.keyCode!==f&&e.keyCode!==h||(M=!1,q("isCtrl",!1))},window.onmousedown=function(){s["a"].commit("drag/setInEditorStatus",!1)}}function B(e){var t=s["a"].state.drag,n=t.curComponent,a=t.canvasStyleData;if(n&&n.style){var i=n.style,r=i.top,o=i.left,l=i.width,c=i.height,d=a.width,p=a.height;switch(e){case"left":n.style.left=o>=1?--o:0;break;case"right":var f=d-l-o>=1?++o:u.a.sub(d,l).toNumber();n.style.left=f;break;case"up":var h=r>=1?--r:0;n.style.top=h;break;case"down":var m=p-c-r>=1?++r:u.a.sub(p,c).toNumber();n.style.top=m;break}}}function q(e,t){s["a"].commit("drag/setKeyboardEvent",{key:e,value:t})}function H(){s["a"].commit("drag/copy")}function z(){s["a"].commit("drag/paste"),s["a"].commit("drag/recordSnapshot")}function W(){s["a"].commit("drag/cut")}function U(){s["a"].commit("drag/redo")}function F(){s["a"].commit("drag/undo")}function K(){var e=this,t=s["a"].state.drag,n=t.areaData,a=t.ctrlComponentList;if(!n.length&&a.length>0){var i=1/0,r=1/0,o=-1/0,c=-1/0,d=a;d.forEach((function(t){var n={};"Group"==t.component?t.propValue.forEach((function(t){var a=$("#component".concat(t.id)).getBoundingClientRect();n.left=u.a.sub(parseInt(a.left),parseInt(e.editorX)).toNumber(),n.top=u.a.sub(parseInt(a.top),parseInt(e.editorY)).toNumber(),n.right=u.a.sub(parseInt(a.right),parseInt(e.editorX)).toNumber(),n.bottom=u.a.sub(parseInt(a.bottom),parseInt(e.editorY)).toNumber(),n.left<r&&(r=n.left),n.top<i&&(i=n.top),n.right>o&&(o=n.right),n.bottom>c&&(c=n.bottom)})):n=Object(l["c"])(t.style),n.left<r&&(r=n.left),n.top<i&&(i=n.top),n.right>o&&(o=n.right),n.bottom>c&&(c=n.bottom)})),s["a"].commit("drag/setAreaData",{style:{left:r,top:i,width:u.a.sub(o,r).toNumber(),height:u.a.sub(c,i).toNumber()},components:d})}s["a"].commit("drag/compose"),s["a"].commit("drag/recordSnapshot")}function G(){var e=s["a"].state.drag.curComponent;e&&!e.isLock&&"Group"==e.component&&(s["a"].commit("drag/decompose"),s["a"].commit("drag/recordSnapshot"))}function J(){o["a"].$emit("drag/save")}function X(){o["a"].$emit("drag/preview")}function Y(){s["a"].state.drag.curComponent&&(s["a"].commit("drag/deleteComponent"),s["a"].commit("drag/recordSnapshot"))}function Q(){o["a"].$emit("drag/clearCanvas")}function Z(){s["a"].commit("drag/lock")}function ee(){s["a"].commit("drag/unlock")}},"59b0":function(e,t,n){},"5c01":function(e,t,n){"use strict";n("798e")},"5f5d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.id}})},i=[],r=(n("ac6a"),n("313e")),s=n.n(r),o={props:["id","hislineData"],data:function(){return{charts:"",hislineName:"",hislineX:[],hislineValue:[]}},watch:{hislineData:function(e){var t=this;if(this.hislineX=[],this.hislineValue=[],void 0===e)this.hislineX=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.hislineValue=[820,932,901,934,1290,1330,1320];else for(var n in this.hislineData)this.hislineName=n,this.hislineData[n].forEach((function(e){t.hislineX.push(e.time),t.hislineValue.push(e.tagvalue)}));this.$nextTick((function(){t.initChart(t.id)}))}},created:function(){var e=this;if(void 0===this.hislineData)this.hislineX=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.hislineValue=[820,932,901,934,1290,1330,1320];else for(var t in this.hislineData)this.hislineName=t,this.hislineData[t].forEach((function(t){e.hislineX.push(t.time),e.hislineValue.push(t.tagvalue)}));this.$nextTick((function(){e.initChart(e.id)}))},methods:{initChart:function(e){this.charts=s.a.init(document.getElementById(e)),this.charts.setOption({title:{text:this.hislineName,textStyle:{fontFamily:"Arial",fontSize:12,fontStyle:"normal",fontWeight:"normal",color:"#3dadfe"}},tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,grid:{top:"15%",left:"3%",right:"3%",bottom:"1%",containLabel:!0},xAxis:{type:"category",data:this.hislineX,axisLine:{lineStyle:{color:"rgba(17,87,148,0.5)",width:1}},axisLabel:{show:!0,textStyle:{color:["#3dadfe"]}}},yAxis:{type:"value",splitLine:{lineStyle:{color:"rgba(17,87,148,0.5)",width:1}},axisLine:{lineStyle:{color:"rgba(17,87,148,0.5)",width:1}},axisLabel:{show:!0,textStyle:{color:["#3dadfe"]}}},series:[{data:this.hislineValue,type:"line",smooth:"true"}]})}}},l=o,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},6046:function(e,t,n){"use strict";n("dcfd")},6274:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"svg-triangle-container"},[n("svg",{attrs:{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg"}},[n("polygon",{ref:"triangle",attrs:{points:e.points,stroke:e.element.style.borderColor,fill:e.element.style.backgroundColor,"stroke-width":"1"}})])])},i=[],r=(n("6b54"),{props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{points:""}},watch:{"element.style.width":function(){this.draw()},"element.style.height":function(){this.draw()}},mounted:function(){this.draw()},methods:{draw:function(){var e=this.element.style,t=e.width,n=e.height;this.drawTriangle(t,n)},drawTriangle:function(e,t){var n=[[.5,.05],[1,.95],[0,.95]],a=n.map((function(n){return e*n[0]+" "+t*n[1]}));this.points=a.toString()}}}),s=r,o=(n("b1f7"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"5ae1692c",null);t["default"]=l.exports},"681f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"device-params",attrs:{visible:e.isdeviceParamsShow,"append-to-body":"",title:"采集参数",center:"",modal:!0,width:"70%"},on:{close:e.closeDeviceParamsDialog}},[n("div",{staticClass:"device-params-content"},[n("div",{staticClass:"readonly"},[n("div",{staticClass:"readonly-header pages-header"},[e._v(e._s(e.drname))]),e._v(" "),e.isdeviceParamsShow?n("readonly-virtual-list",{attrs:{listData:e.readParams}}):e._e()],1),e._v(" "),n("div",{staticClass:"editable"},[n("div",{staticClass:"editable-btns"},[e.readAndWriteParams.length?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.openModify}},[e._v("\n          "+e._s(e.modifyName)+"\n        ")]):e._e(),e._v(" "),e.readAndWriteParams.length?n("el-button",{attrs:{loading:e.submitloading,type:"primary",size:"mini"},on:{click:e.changeReg}},[e._v("\n          提交\n        ")]):e._e()],1),e._v(" "),e.isdeviceParamsShow?n("editable-virtual-list",{attrs:{listData:e.readAndWriteParams,modifyOrNot:e.modifyOrNot,inputdata:e.inputdata,optinosdata:e.optinosdata}}):e._e()],1)])])},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("ade3")),s=n("2f62"),o=n("6c3c"),l=n("0345"),c=n("759b"),u=n("8587");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={components:{ReadonlyVirtualList:c["default"],EditableVirtualList:u["default"]},props:{isdeviceParamsShow:{type:Boolean,default:!1},readParams:{type:Array,default:[]},readAndWriteParams:{type:Array,default:[]},drname:{type:String,default:""},inputdata:{type:Array,default:null},optinosdata:{type:Array,default:[]}},data:function(){return{submitloading:!1,modifyOrNot:!0,modifyName:"开启"}},computed:p({},Object(s["b"])(["path"])),watch:{},methods:{closeDeviceParamsDialog:function(){this.$emit("closeDP")},openModify:function(){this.modifyOrNot=!this.modifyOrNot,!1===this.modifyOrNot?this.modifyName="关闭":this.modifyName="开启",this.$emit("openDPTimer",this.modifyOrNot)},changeReg:function(){var e=this;if(this.modifyOrNot)this.$message.warning("请先点击开启按钮,再进行控制!");else{var t=[];if(0!=this.inputdata.length&&this.readAndWriteParams.forEach((function(n,a){null!=n.tagName&&""!=n.tagName?t.push(n.tagName+":"+Object(o["c"])(e.inputdata[a],e.optinosdata[a][0])):e.$message.warning("该变量没有绑定寄存器，无法控制")})),0!=t.length){this.submitloading=!0;var n={appid:parseInt(this.path),msg:t.join(",")};Object(l["a"])(this.path,n).then((function(t){2e4===t.status?(e.submitloading=!1,e.$message.success("已下发至设备!"),e.openModify()):e.submitloading=!1})).catch(console.log)}this.$emit("submitDPReg"),this.modifyOrNot=!0,this.modifyName="开启"}}},created:function(){},mounted:function(){}},h=f,m=(n("92aa"),n("2877")),v=Object(m["a"])(h,a,i,!1,null,"b24a551c",null);t["default"]=v.exports},"6c3c":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));n("ac6a");function a(e,t){var n="";return isNaN(e)||null==e||"null"==e?""!=e&&null!=e&&"null"!=e?(t.forEach((function(t){e==t.value&&(n=t.id)})),n):n:e}function i(e,t){var n="";return null!=e&&"null"!=e&&""!==e?isNaN(parseInt(e))?e:(t.forEach((function(t){parseInt(e)==t.id&&(n=t.value)})),n):n}function r(e){return null===e||"null"===e?(e="",e):e}},7300:function(e,t,n){"use strict";n("b756")},"736d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"group"},[n("div",e._l(e.propValue,(function(e){return n(e.component,{key:e.id,tag:"component",staticClass:"component",style:e.groupStyle,attrs:{id:"component"+e.id,"prop-value":e.propValue,element:e}})})),1)])},i=[],r={props:{propValue:{type:Array,default:function(){return[]}},element:{type:Object,default:function(){}}}},s=r,o=(n("b7fb"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"397c0b49",null);t["default"]=l.exports},"746e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"devicetype"},[n("div",{staticClass:"typemodel"},[e.showRoute()?n("div",[n("span",{staticClass:"regname"},[e._v(e._s(e.element.drtypeInfo.regName)+":")]),e._v(" "),e.showRegReadWrite(e.element.drtypeInfo.regReadWrite,"1")?n("span",[e._v("\n        "+e._s(e.element.drtypeInfo.tagValue)+"\n      ")]):e._e(),e._v(" "),e.showRegReadWrite(e.element.drtypeInfo.regReadWrite,"2")?n("el-input",{attrs:{value:e.element.drtypeInfo.tagValue,readonly:""}}):e._e(),e._v(" "),n("span",[e._v(e._s(e.element.drtypeInfo.regUnits))])],1):e._e(),e._v(" "),e.showUsermdoel()&&"1"===e.readonlydata.regReadWrite?n("div",{staticClass:"readonly"},[n("span",[e._v(e._s(e.readonlydata.regName)+":")]),e._v(" "),e._l(e.readonlydata.subinfoList,(function(t,a){return n("span",{directives:[{name:"show",rawName:"v-show",value:e.showReaDonly(e.readonlydata.tagValue,t),expression:"showReaDonly(readonlydata.tagValue, sub)"}],key:"index"+a},[e._v("\n        "+e._s(t.text)+"\n      ")])})),e._v(" "),e._l(e.readonlydata.subinfoList,(function(t,a){return n("span",{directives:[{name:"show",rawName:"v-show",value:e.showSubandOr(e.readonlydata.tagValue,t),expression:"showSubandOr(readonlydata.tagValue, sub)"}],key:"i"+a},[e._v("\n        "+e._s(t.text)+"\n      ")])})),e._v(" "),e._l(e.readonlydata.subinfoList,(function(t,a){return n("span",{directives:[{name:"show",rawName:"v-show",value:e.showSubandOr2(e.readonlydata.tagValue,t),expression:"showSubandOr2(readonlydata.tagValue, sub)"}],key:"x"+a},[e._v("\n        "+e._s(t.text)+"\n      ")])})),e._v(" "),e.readonlydata.regSub?e._e():n("span",[e._v(e._s(e.readonlydata.tagValue))]),e._v(" "),e.readonlydata.regSub?e._e():n("span",[e._v(e._s(e.readonlydata.regUnits))])],2):e._e(),e._v(" "),e.showUsermdoel()&&"2"===e.readonlydata.regReadWrite?n("div",{staticClass:"readonly"},[n("span",[e._v(e._s(e.readonlydata.regName)+":")]),e._v(" "),e._l(e.readonlydata.subinfoList,(function(t,a){return n("span",{key:"m"+a},[n("el-select",{directives:[{name:"show",rawName:"v-show",value:e.readonlydata.tagValue==t.value,expression:"readonlydata.tagValue == sub.value"}],on:{change:function(t){return e.changeSub(e.readonlydata,e.updateSub[0])}},model:{value:e.updateSub[0],callback:function(t){e.$set(e.updateSub,0,t)},expression:"updateSub[0]"}},e._l(e.optionsubs,(function(e,t){return n("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1),e._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showUserModel(e.readonlydata.tagValue,t),expression:"showUserModel(readonlydata.tagValue, sub)"}],on:{focus:function(t){return e.changeFocus()},blur:function(t){return e.changeBlur()},change:function(t){return e.changeSub(e.readonlydata,e.updateSub[0])}},model:{value:e.updateSub[0],callback:function(t){e.$set(e.updateSub,0,t)},expression:"updateSub[0]"}}),e._v(" "),n("el-input",{directives:[{name:"show",rawName:"v-show",value:e.showUserModelSub(e.readonlydata.tagValue,t),expression:"showUserModelSub(readonlydata.tagValue, sub)"}],on:{focus:function(t){return e.changeFocus()},blur:function(t){return e.changeBlur()},change:function(t){return e.changeSub(e.readonlydata,e.updateSub[0])}},model:{value:e.updateSub[0],callback:function(t){e.$set(e.updateSub,0,t)},expression:"updateSub[0]"}})],1)})),e._v(" "),e.readonlydata.regSub?e._e():n("el-input",{on:{focus:function(t){return e.changeFocus()},blur:function(t){return e.changeBlur()},change:function(t){return e.changeSub(e.readonlydata,e.updateSub[0])}},model:{value:e.updateSub[0],callback:function(t){e.$set(e.updateSub,0,t)},expression:"updateSub[0]"}}),e._v(" "),e.readonlydata.regSub?e._e():n("span",[e._v(e._s(e.readonlydata.regUnits))])],2):e._e()])])},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("ade3")),s=n("2f62"),o=n("0345"),l=n("d8ad");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{isviewtime:!0,readonlydata:null,canreadbutwrite:null,updateSub:null,optionsubs:[],timer:null,watchTime:null,_elementdrtypeInfo:null}},watch:{element:{deep:!0,immediate:!0,handler:function(e){this.watchdrtypeModel(e)}}},computed:u(u({},Object(s["b"])(["path"])),Object(s["c"])({drInfo:function(e){return e.device.drInfo}})),created:function(){},beforeDestroy:function(){},methods:{changeFocus:function(){l["a"].$emit("_controlTimes",!1)},changeBlur:function(){},watchdrtypeModel:function(e){var t=this,n=[];this.optionsubs=[];var a=e.drtypeInfo,i=a.tagValue,r=a.subinfoList||[];1==a.regReadWrite||(r.forEach((function(e){i==e.value?n.push(e.text):("1"==e.andOr&&i>=e.valueMin&&i<=e.valueMax||"2"==e.andOr&&(i<e.valueMin||i>e.valueMax))&&n.push(i),t.optionsubs.push(e)})),a.regSub||n.push(i),this.updateSub=n),this.readonlydata=a},changeSub:function(e,t){var n=this;if(null!=e.tagName&&""!=e.tagName){console.log("下发的参数对象是:",e),console.log("下发的值:",t);var a=e.tagName+":"+t;Object(o["e"])(this.path,parseInt(this.path),a).then((function(e){2e4===e.status&&(l["a"].$emit("_controlTimes",!0),n.$message.success("已下发至设备,请等待设备反馈"))})).catch((function(e){})).finally((function(){l["a"].$emit("_controlTimes",!0)}))}else this.$message.warning("该变量没有绑定寄存器，无法控制"),l["a"].$emit("_controlTimes",!0)},showRegReadWrite:function(e,t){return e==t},showRoute:function(){return"/project/drag"===this.$route.path},showUsermdoel:function(){var e=this.$route.params.id;return this.$route.path==="/device/index/"+e},showReaDonly:function(e,t){return e==t.value},showUserModel:function(e,t){return"1"==t.andOr&&e>=t.valueMin&&e<=t.valueMax},showUserModelSub:function(e,t){return"2"==t.andOr&&(e<t.valueMin||e>t.valueMax)},showSubandOr:function(e,t){return"1"==t.andOr&&e>=t.valueMin&&e<=t.valueMax},showSubandOr2:function(e,t){return"2"==t.andOr&&(e<t.valueMin||e>t.valueMax)}}},p=d,f=(n("df6a"),n("2877")),h=Object(f["a"])(p,a,i,!1,null,"33d27fd8",null);t["default"]=h.exports},"759b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"virtualRef",staticClass:"infinite-list-container",on:{scroll:function(t){return e.scrollEvent(t)}}},[n("div",{staticClass:"infinite-list-phantom",style:{height:e.listHeight+"px"}}),e._v(" "),n("div",{staticClass:"infinite-list",style:{transform:e.getTransform}},e._l(e.visibleData,(function(t,a){return n("div",{key:a+t.regId,staticClass:"infinite-list-item",style:{height:e.itemSize+"px",lineHeight:e.itemSize+"px"}},[n("span",{staticClass:"regName"},[e._v(e._s(t.regName.split(":")[1])+"：")]),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("div",{key:a.id+i},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.showText(t,a),expression:"showText(param, sub)"}]},[e._v("\n          "+e._s(a.text)+"\n        ")])])})),e._v(" "),t.regSub?e._e():n("div",[e._v("\n        "+e._s(t.tagValue)+" "+e._s(t.regUnits)+"\n      ")])],2)})),0)])},i=[],r=n("ed08"),s={name:"VirtualList",components:{},props:{listData:{type:Array,default:function(){return[]}}},data:function(){return{screenHeight:0,startOffset:0,start:0,end:null,itemSize:40,columns:4}},computed:{listHeight:function(){return this.listData.length*this.itemSize/this.columns},visibleCount:function(){return Math.ceil(this.screenHeight/this.itemSize*this.columns)},getTransform:function(){return"translate3d(0,".concat(this.startOffset,"px,0)")},visibleData:function(){return this.listData.slice(this.start,Math.min(this.end,this.listData.length))}},mounted:function(){this.screenHeight=this.$el.clientHeight,this.start=0,this.end=this.start+this.visibleCount},methods:{scrollEvent:function(){var e=this.$refs.virtualRef.scrollTop||0;Object(r["f"])(this.calculationOffset(e),30)},calculationOffset:function(e){this.start=Math.floor(e/this.itemSize*this.columns),this.end=this.start+this.visibleCount,this.startOffset=e-e%this.itemSize},showText:function(e,t){return this.showSubtext(e,t)||this.showandOrtext(e,t)||this.showandOrtwotext(e,t)},showSubtext:function(e,t){return!(!e.regSub||e.regSub!=t.subid||"1"!=t.valueType||e.tagValue!=t.value)},showandOrtext:function(e,t){return!!(e.regSub&&e.regSub==t.subid&&"2"==t.valueType&&"1"==t.andOr&&e.tagValue>=t.valueMin&&e.tagValue<=t.valueMax)},showandOrtwotext:function(e,t){return!(!e.regSub||e.regSub!=t.subid||"2"!=t.valueType||"2"!=t.andOr||!(e.tagValue<t.valueMin||e.tagValue>t.valueMax))}}},o=s,l=(n("6046"),n("2877")),c=Object(l["a"])(o,a,i,!1,null,"57d963f4",null);t["default"]=c.exports},"798e":function(e,t,n){},"79c5":function(e,t,n){"use strict";n("cd04")},"7a71":function(e,t,n){},"7c9f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"history_data"},[n("el-dialog",{attrs:{title:"历史数据",visible:e.historyDataVisible,width:"60%",modal:!1,"append-to-body":""},on:{"update:visible":function(t){e.historyDataVisible=t}}},[n("div",{staticClass:"history-data"},[n("div",{staticClass:"search-params"},[n("p",[n("span",[e._v("设备名:")]),e._v(" "),n("el-input",{attrs:{readonly:""},model:{value:e.drname,callback:function(t){e.drname=t},expression:"drname"}})],1),e._v(" "),n("p",[n("span",[e._v("开始时间:")]),e._v(" "),n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),e._v(" "),n("p",[n("span",[e._v("结束时间:")]),e._v(" "),n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.searchHisLine}},[e._v("查询")])],1),e._v(" "),n("div",{staticClass:"line-charts"},e._l(e.lineData,(function(e,t){return n("HistoryLine",{key:t,staticStyle:{width:"100%",height:"300px"},attrs:{id:"hisline"+t,hislineData:e}})})),1)])])],1)},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("ade3")),s=(n("c5f6"),n("2f62")),o=n("0345"),l=n("ed08"),c=n("5f5d");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={props:{visible:{type:Boolean,default:!1},drid:{type:Number,default:null},drname:{type:String,default:null}},components:{HistoryLine:c["default"]},data:function(){return{startTime:"",endTime:"",lineData:[]}},computed:d(d({},Object(s["b"])(["path"])),{},{historyDataVisible:{get:function(){return this.visible},set:function(e){this.$emit("updateVisible",e)}}}),watch:{},methods:{searchHisLine:function(){var e=this,t=new FormData;t.append("drid",this.drid),""!=this.startTime&&null!=this.startTime&&t.append("startTime",this.startTime),""!=this.endTime&&null!=this.endTime&&t.append("endTime",this.endTime),Object(o["c"])(this.path,t).then((function(t){e.lineData=t.data,e.lineData.forEach((function(e){for(var t in e)e[t].forEach((function(e){e.time=Object(l["c"])(e.time)}))}))})).catch(console.log)}},created:function(){},mounted:function(){}},f=p,h=(n("8f65"),n("2877")),m=Object(h["a"])(f,a,i,!1,null,"4347a8a9",null);t["default"]=m.exports},"818f":function(e,t,n){"use strict";n("fb12")},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},8587:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"virtualRef",staticClass:"infinite-list-container",on:{scroll:function(t){return e.scrollEvent(t)}}},[n("div",{staticClass:"infinite-list-phantom",style:{height:e.listHeight+"px"}}),e._v(" "),n("div",{staticClass:"infinite-list",style:{transform:e.getTransform}},e._l(e.visibleData,(function(t,a){return n("div",{key:a,ref:"items",refInFor:!0,staticClass:"infinite-list-item",style:{height:e.itemSize+"px",lineHeight:e.itemSize+"px"}},[n("div",{staticClass:"item-title"},[e._v(e._s(t.regName.split(":")[1])+"：")]),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showSubtext(t,a),expression:"showSubtext(param, sub)"}],key:"b"+i,staticClass:"item-input"},[n("el-select",{staticStyle:{width:"80px"},attrs:{size:"mini",disabled:e.modifyOrNot},model:{value:e.inputdata[t.originalIndex],callback:function(n){e.$set(e.inputdata,t.originalIndex,n)},expression:"inputdata[param.originalIndex]"}},e._l(e.optinosdata[t.originalIndex][0],(function(e,t){return n("el-option",{key:"g"+t,attrs:{label:e.value,value:e.id}})})),1)],1)})),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showText(t,a),expression:"showText(param, sub)"}],key:"l"+i,staticClass:"item-input"},[n("el-input",{attrs:{size:"mini",disabled:e.modifyOrNot},model:{value:e.inputdata[t.originalIndex],callback:function(n){e.$set(e.inputdata,t.originalIndex,n)},expression:"inputdata[param.originalIndex]"}})],1)})),e._v(" "),t.regSub?n("div",{staticClass:"supplement"},[n("div",{staticClass:"supplement-unit"})]):n("div",{staticClass:"supplement"},[n("el-input",{staticClass:"supplement-input",attrs:{size:"mini",disabled:e.modifyOrNot},model:{value:e.inputdata[t.originalIndex],callback:function(n){e.$set(e.inputdata,t.originalIndex,n)},expression:"inputdata[param.originalIndex]"}}),e._v(" "),n("div",{staticClass:"supplement-unit"},[e._v(e._s(t.regUnits))])],1)],2)})),0)])},i=[],r=n("ed08"),s={name:"EditableVirtualList",components:{},props:{listData:{type:Array,default:function(){return[]}},modifyOrNot:{typeof:Boolean,default:!0},inputdata:{type:Array,default:null},optinosdata:{type:Array,default:[]}},data:function(){return{screenHeight:0,startOffset:0,start:0,end:null,itemSize:40,columns:1}},computed:{listHeight:function(){return this.listData.length*this.itemSize/this.columns},visibleCount:function(){return Math.ceil(this.screenHeight/this.itemSize*this.columns)},getTransform:function(){return"translate3d(0,".concat(this.startOffset,"px,0)")},visibleData:function(){return this.listData.slice(this.start,Math.min(this.end,this.listData.length))}},mounted:function(){this.screenHeight=this.$el.clientHeight,this.start=0,this.end=this.start+this.visibleCount},methods:{scrollEvent:function(){var e=this.$refs.virtualRef.scrollTop||0;Object(r["f"])(this.calculationOffset(e),30)},calculationOffset:function(e){this.start=Math.floor(e/this.itemSize*this.columns),this.end=this.start+this.visibleCount,this.startOffset=e-e%this.itemSize},showSubtext:function(e,t){return!(!e.regSub||e.regSub!=t.subid||"1"!=t.valueType||e.tagValue!=t.value)},showText:function(e,t){return this.showandOrtext(e,t)||this.showandOrtwotext(e,t)},showandOrtext:function(e,t){return!!(e.regSub&&e.regSub==t.subid&&"2"==t.valueType&&"1"==t.andOr&&e.tagValue>=t.valueMin&&e.tagValue<=t.valueMax)},showandOrtwotext:function(e,t){return!(!e.regSub||e.regSub!=t.subid||"2"!=t.valueType||"2"!=t.andOr||!(e.tagValue<t.valueMin||e.tagValue>t.valueMax))}}},o=s,l=(n("c7cd"),n("2877")),c=Object(l["a"])(o,a,i,!1,null,"073d8d79",null);t["default"]=c.exports},"87a0":function(e,t,n){},8898:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:e.handleClick}},[e.config.component.startsWith("SVG")?n(e.config.component,{ref:"component",tag:"component",staticClass:"component",style:e.getSVGStyle(e.config.style),attrs:{"prop-value":e.config.propValue,element:e.config}}):n(e.config.component,{ref:"component",tag:"component",staticClass:"component",style:e.getStyle(e.config.style),attrs:{"prop-value":e.config.propValue,element:e.config}})],1)},i=[],r=(n("456d"),n("ac6a"),n("ab2a")),s=n("c530"),o=n("4425"),l={mixins:[o["b"]],props:{config:{type:Object,require:!0,default:function(){}}},data:function(){return{}},created:function(){},mounted:function(){this.$refs.component&&this.$refs.component.$el&&Object(s["a"])(this.$refs.component.$el,this.config.animations)},methods:{getStyle:r["e"],getSVGStyle:r["d"],handleClick:function(){var e=this,t=this.config.events;Object.keys(t).forEach((function(n){e[n](t[n])}))}}},c=l,u=(n("f36d"),n("2877")),d=Object(u["a"])(c,a,i,!1,null,"39439710",null);t["a"]=d.exports},"8f65":function(e,t,n){"use strict";n("3761")},"8f87":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"svg-container"},[n("svg",{attrs:{width:e.element.style.width,height:e.element.style.height}},[n("polygon",{ref:"polygon",attrs:{stroke:e.element.style.borderColor,"stroke-width":e.element.style.borderWidth,fill:e.element.style.backgroundColor}}),e._v(" "),n("g",e._l(e.lints,(function(t,a){return n("line",{key:a,staticStyle:{cursor:"pointer"},attrs:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stroke:e.element.style.borderColor,"stroke-width":e.element.style.borderWidth},on:{click:function(n){return e.addPoint(t,a)}}})})),0)])])},i=[],r=(n("8e6e"),n("456d"),n("ade3"));n("ac6a");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={props:{element:{type:Object,default:function(){}}},data:function(){return{points:[],lints:[]}},watch:{"element.style.points":{immediate:!0,deep:!0,handler:function(e){(null===e||void 0===e?void 0:e.length)>0&&this.draw(e)}}},mounted:function(){},methods:{draw:function(e){var t=this;this.$nextTick((function(){t.$refs.polygon.setAttribute("points",e),t.getLints(e)}))},getLints:function(e){var t=JSON.parse(JSON.stringify(e));t.push(t.shift());var n=[];e.forEach((function(e,a){n.push({x1:e[0],y1:e[1],x2:t[a][0],y2:t[a][1]})})),this.lints=n},addPoint:function(e,t){var n=e.x1,a=e.y1,i=e.x2,r=e.y2,s=(n+i)/2,l=(a+r)/2,c=JSON.parse(JSON.stringify(this.element.style.points));c.splice(t+1,0,[s,l]),this.$store.commit("drag/setShapeStyle",o(o({},this.element.style),{},{points:c}))}}},c=l,u=n("2877"),d=Object(u["a"])(c,a,i,!1,null,"7bebcb64",null);t["default"]=d.exports},"92aa":function(e,t,n){"use strict";n("f84b")},"93b9":function(e,t,n){},"94d9":function(e,t,n){"use strict";n("4eac")},a07f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("el-dialog",{attrs:{title:"报警记录",visible:e.alarminfoVisible,width:"70%","append-to-body":""},on:{"update:visible":function(t){e.alarminfoVisible=t}}},[n("div",{staticClass:"alarm-records"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini"}},[n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.alarmStartTime,callback:function(t){e.alarmStartTime=t},expression:"alarmStartTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"结束时间"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.alarmEndTime,callback:function(t){e.alarmEndTime=t},expression:"alarmEndTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"级别"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择报警级别"},model:{value:e.alarmLevel,callback:function(t){e.alarmLevel=t},expression:"alarmLevel"}},e._l(e.alarmLevelOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.alarmtypename,value:e.alarmtypelevel}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"应答"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择应答"},model:{value:e.respond,callback:function(t){e.respond=t},expression:"respond"}},e._l(e.respondOption,(function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.getAlarmRecordsApi}},[e._v("\n            查询\n          ")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.alarmTableData,"max-height":"500","default-sort":{prop:"time",order:"descending"}}},[n("el-table-column",{attrs:{prop:"time",label:"时间",sortable:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"drname",label:"设备名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"regName",label:"变量名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmvalue",label:"参数值"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmtypename",label:"级别"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmanswer",label:"应答"}}),e._v(" "),n("el-table-column",{attrs:{prop:"alarmhandle",label:"应答说明"}})],1)],1)])],1)},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("96cf"),n("1da1")),s=n("ade3"),o=(n("c5f6"),n("967e")),l=n.n(o),c=n("2f62"),u=n("ed08"),d=n("0345"),p=n("e465");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={props:{visible:{type:Boolean,default:!1},drid:{type:Number,default:""}},components:{},data:function(){return{alarmStartTime:"",alarmEndTime:"",alarmLevel:"",alarmLevelOptions:[],respond:"",respondOption:[{id:1,value:"报警"},{id:2,value:"误报"},{id:3,value:"测试"}],alarmTableData:[]}},computed:h(h({},Object(c["b"])(["path"])),{},{alarminfoVisible:{get:function(){return this.visible},set:function(e){this.$emit("updateVisible",e)}}}),watch:{},methods:{getAlarmRecordsApi:function(){var e=Object(r["a"])(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.alarmStartTime||!this.alarmEndTime){e.next=7;break}return t={drid:this.drid,startTime:this.alarmStartTime,endTime:this.alarmEndTime,alarmtypelevel:this.alarmLevel,alarmanswer:this.respond},e.next=4,Object(d["b"])(this.path,this.$formatJson(t));case 4:n=res,a=n.data,this.alarmTableData=a,this.alarmTableData.forEach((function(e){e.time=Object(u["c"])(e.time)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),findAlarmLevelApi:function(){var e=Object(r["a"])(l.a.mark((function e(){var t;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["b"])(this.path);case 2:t=e.sent,this.alarmLevelOptions=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getAlarmRecordsApi(),this.findAlarmLevelApi()},mounted:function(){}},v=m,b=(n("94d9"),n("2877")),g=Object(b["a"])(v,a,i,!1,null,"3bbb8962",null);t["default"]=g.exports},a140:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"parameter"},[n("div",{staticClass:"readonly"},[n("div",{staticClass:"readonly-name"},[e._v(e._s(e.drname))]),e._v(" "),n("el-scrollbar",{staticStyle:{width:"100%",height:"208px"}},[n("div",{staticClass:"readonly-list"},e._l(e.readParams,(function(t,a){return n("div",{key:"x"+a,staticClass:"readonly-list-params"},[n("p",{staticClass:"p1"},[e._v(e._s(t.regName.split(":")[1])+":")]),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.showSubtext(t,a),expression:"showSubtext(param, sub)"}],key:"w"+i,staticClass:"p2"},[e._v("\n            "+e._s(a.text)+"\n          ")])})),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.showandOrtext(t,a),expression:"showandOrtext(param, sub)"}],key:"s"+i,staticClass:"p2"},[e._v("\n            "+e._s(a.text)+"\n          ")])})),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.showandOrtwotext(t,a),expression:"showandOrtwotext(param, sub)"}],key:"t"+i,staticClass:"p2"},[e._v("\n            "+e._s(a.text)+"\n          ")])})),e._v(" "),t.regSub?e._e():n("p",{staticClass:"p2"},[e._v(e._s(t.tagValue))]),e._v(" "),t.regSub?e._e():n("p",{staticClass:"p3"},[e._v(e._s(t.regUnits))])],2)})),0)])],1),e._v(" "),n("div",{staticClass:"readwrite"},[n("div",{staticClass:"readwrite-btnbox"},[e.readAndWriteParams.length?n("el-button",{staticClass:"readwrite-btnbox-btn",attrs:{type:"primary",size:"mini"},on:{click:e.openModify}},[e._v("\n        "+e._s(e.modifyName)+"\n      ")]):e._e(),e._v(" "),e.readAndWriteParams.length?n("el-button",{staticClass:"readwrite-btnbox-btn",attrs:{type:"primary",size:"mini"},on:{click:e.changeReg}},[e._v("\n        提交\n      ")]):e._e()],1),e._v(" "),n("div",{staticClass:"readwrite-list"},[n("el-scrollbar",{staticStyle:{width:"100%",height:"248px"}},e._l(e.readAndWriteParams,(function(t,a){return n("div",{key:a,staticClass:"readwrite-list-params"},[n("p",{staticClass:"p1"},[e._v(e._s(t.regName.split(":")[1])+":")]),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.showSubtext(t,a),expression:"showSubtext(param, sub)"}],key:"b"+i,staticClass:"p2"},[n("el-select",{attrs:{size:"small",disabled:e.modifyOrNot},model:{value:e.inputdata[t.originalIndex],callback:function(n){e.$set(e.inputdata,t.originalIndex,n)},expression:"inputdata[param.originalIndex]"}},e._l(e.optinosdata[t.originalIndex][0],(function(e,t){return n("el-option",{key:"g"+t,attrs:{label:e.value,value:e.id}})})),1)],1)})),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.showandOrtext(t,a),expression:"showandOrtext(param, sub)"}],key:"l"+i,staticClass:"p2"},[n("el-input",{attrs:{disabled:e.modifyOrNot,size:"small"},model:{value:e.inputdata[t.originalIndex],callback:function(n){e.$set(e.inputdata,t.originalIndex,n)},expression:"inputdata[param.originalIndex]"}})],1)})),e._v(" "),e._l(t.subinfoList,(function(a,i){return n("p",{directives:[{name:"show",rawName:"v-show",value:e.showandOrtwotext(t,a),expression:"showandOrtwotext(param, sub)"}],key:"v"+i,staticClass:"p2"},[n("el-input",{attrs:{disabled:e.modifyOrNot,size:"small"},model:{value:e.inputdata[t.originalIndex],callback:function(n){e.$set(e.inputdata,t.originalIndex,n)},expression:"inputdata[param.originalIndex]"}})],1)})),e._v(" "),t.regSub?e._e():n("p",{staticClass:"p2"},[n("el-input",{attrs:{disabled:e.modifyOrNot,size:"small"},model:{value:e.inputdata[t.originalIndex],callback:function(n){e.$set(e.inputdata,t.originalIndex,n)},expression:"inputdata[param.originalIndex]"}})],1),e._v(" "),t.regSub?e._e():n("p",{staticClass:"p3"},[e._v("\n            "+e._s(t.regUnits)+"\n          ")])],2)})),0)],1)])])},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("ade3")),s=n("6c3c"),o=n("0345"),l=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={props:["readParams","readAndWriteParams","drname","inputdata","optinosdata"],components:{},data:function(){return{modifyOrNot:!0,modifyName:"开启"}},computed:u({},Object(l["b"])(["path"])),watch:{},methods:{openModify:function(){this.modifyOrNot=!this.modifyOrNot,!1===this.modifyOrNot?this.modifyName="关闭":this.modifyName="开启",this.$emit("openCPTimer",this.modifyOrNot)},changeReg:function(){var e=this,t=[];0!=this.inputdata.length&&this.readAndWriteParams.forEach((function(n,a){console.log(n,"ele"),null!=n.tagName&&""!=n.tagName?t.push(n.tagName+":"+Object(s["c"])(e.inputdata[a],e.optinosdata[a][0])):e.$message.warning("该变量没有绑定寄存器，无法控制")})),0!=t.length&&Object(o["e"])(this.path,parseInt(this.path),t.join(",")).then((function(t){2e4===t.status&&(e.$message.success("修改成功！"),e.openModify())})).catch(console.log),this.$emit("submitReg")},showSubtext:function(e,t){return!(!e.regSub||e.regSub!=t.subid||"1"!=t.valueType||e.tagValue!=t.value)},showandOrtext:function(e,t){return!!(e.regSub&&e.regSub==t.subid&&"2"==t.valueType&&"1"==t.andOr&&e.tagValue>=t.valueMin&&e.tagValue<=t.valueMax)},showandOrtwotext:function(e,t){return!(!e.regSub||e.regSub!=t.subid||"2"!=t.valueType||"2"!=t.andOr||!(e.tagValue<t.valueMin||e.tagValue>t.valueMax))}},created:function(){},mounted:function(){}},p=d,f=(n("d306e"),n("2877")),h=Object(f["a"])(p,a,i,!1,null,"f3dbe414",null);t["default"]=h.exports},a6be:function(e,t,n){},a980:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-line"})},i=[],r={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}}},s=r,o=(n("7300"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"2279c2a3",null);t["default"]=l.exports},a9d8:function(e,t,n){"use strict";n("59b0")},ac55:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{overflow:"hidden"}},[n("img",{attrs:{src:this.global.baseUrl+e.element.propValue}})])},i=[],r={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}}},s=r,o=(n("5c01"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"1ab24646",null);t["default"]=l.exports},b1f7:function(e,t,n){"use strict";n("b54a")},b3e3:function(e,t,n){},b48f:function(e,t,n){},b54a:function(e,t,n){},b756:function(e,t,n){},b7fb:function(e,t,n){"use strict";n("d20c")},bc74:function(e,t,n){},bd38:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"edit"==e.editMode?n("div",{staticClass:"v-text",on:{keydown:e.handleKeydown,keyup:e.handleKeyup}},[n("div",{ref:"text",class:{canEdit:e.canEdit},style:{verticalAlign:e.element.style.verticalAlign,fontFamily:e.element.style.fontFamily,lineHeight:e.element.style.height+"px"},attrs:{contenteditable:e.canEdit,tabindex:e.element.id},domProps:{innerHTML:e._s(e.element.propValue)},on:{dblclick:function(t){!e.ispage.includes("/device/index/")&&e.setEdit()},paste:e.clearStyle,mousedown:e.handleMousedown,blur:e.handleBlur,input:e.handleInput}})]):n("div",{staticClass:"v-text preview"},[n("div",{style:{verticalAlign:e.element.style.verticalAlign},domProps:{innerHTML:e._s(e.element.propValue)}})])},i=[],r=(n("6762"),n("2fdb"),n("2f62")),s=n("590f"),o={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:Object(r["c"])({editMode:function(e){return e.drag.editMode}}),methods:{handleInput:function(e){this.$emit("input",this.element,e.target.innerHTML)},handleKeydown:function(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&s["a"].includes(e.keyCode)||46==e.keyCode)&&e.stopPropagation()},handleKeyup:function(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown:function(e){this.canEdit&&e.stopPropagation()},clearStyle:function(e){e.preventDefault();var t=e.clipboardData,n=t.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,e.target.innerHTML)},handleBlur:function(e){var t=this;this.element.propValue=e.target.innerHTML||"&nbsp;";var n=e.target.innerHTML;""!==n?this.element.propValue=e.target.innerHTML:(this.element.propValue="",this.$nextTick((function(){t.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit:function(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText:function(e){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}},l=o,c=(n("e8bfc"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"3ad741a1",null);t["default"]=u.exports},bf27:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"circular"})},i=[],r={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}}},s=r,o=(n("ce70"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"e4d53c28",null);t["default"]=l.exports},c01d:function(e,t,n){},c530:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("96cf");var a=n("1da1"),i=n("967e"),r=n.n(i);function s(e){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(r.a.mark((function e(t){var n,a,i,s,o=arguments;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:[],a=function(e){return new Promise((function(n){var a=e.animationTime,i=e.value,r=void 0===i?"":i,s=e.isLoop;t.style.setProperty("--time",a+"s"),t.classList.add(r,"animated",l(s));var o=function e(){t.removeEventListener("animationend",e),t.removeEventListener("animationcancel",e),t.classList.remove(r,"animated",l(s)),t.style.removeProperty("--time"),n()};t.addEventListener("animationend",o),t.addEventListener("animationcancel",o)}))},i=0,s=n.length;case 3:if(!(i<s)){e.next=9;break}return e.next=6,a(n[i]);case 6:i++,e.next=3;break;case 9:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function l(e){return e?"infinite":"no-infinite"}},c7cd:function(e,t,n){"use strict";n("93b9")},c85b:function(e,t,n){"use strict";n("cfd7")},cd04:function(e,t,n){},cde9:function(e,t,n){"use strict";n("a6be")},ce70:function(e,t,n){"use strict";n("1f97")},cfd7:function(e,t,n){},cfd9:function(e,t,n){"use strict";n("e596")},d02c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"edit"==e.editMode?n("div",{staticClass:"v-text",on:{keydown:e.handleKeydown,keyup:e.handleKeyup}},[n("div",{ref:"text",class:{canEdit:e.canEdit},style:{verticalAlign:e.element.style.verticalAlign,fontFamily:e.element.style.fontFamily},attrs:{contenteditable:e.canEdit,tabindex:e.element.id},domProps:{innerHTML:e._s(e.element.propValue)},on:{dblclick:e.setEdit,paste:e.clearStyle,mousedown:e.handleMousedown,blur:e.handleBlur,input:e.handleInput}})]):n("div",{staticClass:"v-text preview"},[n("div",{style:{verticalAlign:e.element.style.verticalAlign},domProps:{innerHTML:e._s(e.element.propValue)}})])},i=[],r=(n("6762"),n("2fdb"),n("2f62")),s=n("590f"),o={props:{propValue:{type:String,require:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{canEdit:!1,ctrlKey:17,isCtrlDown:!1}},computed:Object(r["c"])({editMode:function(e){return e.drag.editMode}}),methods:{handleInput:function(e){this.$emit("input",this.element,e.target.innerHTML)},handleKeydown:function(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey?this.isCtrlDown=!0:(this.isCtrlDown&&this.canEdit&&s["a"].includes(e.keyCode)||46==e.keyCode)&&e.stopPropagation()},handleKeyup:function(e){this.canEdit&&e.stopPropagation(),e.keyCode==this.ctrlKey&&(this.isCtrlDown=!1)},handleMousedown:function(e){this.canEdit&&e.stopPropagation()},clearStyle:function(e){e.preventDefault();var t=e.clipboardData,n=t.getData("text/plain")||"";""!==n&&document.execCommand("insertText",!1,n),this.$emit("input",this.element,e.target.innerHTML)},handleBlur:function(e){var t=this;this.element.propValue=e.target.innerHTML||"&nbsp;";var n=e.target.innerHTML;""!==n?this.element.propValue=e.target.innerHTML:(this.element.propValue="",this.$nextTick((function(){t.element.propValue="&nbsp;"}))),this.canEdit=!1},setEdit:function(){this.element.isLock||(this.canEdit=!0,this.selectText(this.$refs.text))},selectText:function(e){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}}},l=o,c=(n("eef9"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"7e9ac4f6",null);t["default"]=u.exports},d20c:function(e,t,n){},d306e:function(e,t,n){"use strict";n("0ff8")},d42d:function(e,t,n){"use strict";n.d(t,"j",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"i",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"e",(function(){return m}));var a=n("b775");function i(e,t){return Object(a["a"])({url:"/pageStyle/insertOrUpdate",method:"post",data:t,headers:{database:e}})}function r(e,t){return Object(a["a"])({url:"/pageStyle/getByPicId",method:"post",data:t,headers:{database:e}})}function s(e,t){return Object(a["a"])({url:"/structureDiagramStyle/insertOrUpdate",method:"post",data:t,headers:{database:e}})}function o(e,t){return Object(a["a"])({url:"/structureDiagramStyle/getBydrtypeId",method:"post",data:t,headers:{database:e}})}function l(e,t){return Object(a["a"])({url:"pageStyle/getdrStartByPicId",method:"get",params:{picId:t},headers:{database:e}})}function c(e,t){return Object(a["a"])({url:"pageStyle/getIconTypeByPicId",method:"get",params:{picId:t},headers:{database:e}})}function u(e,t){return Object(a["a"])({url:"pageStyle/updatePageStle",method:"get",params:{drid:t},headers:{database:e}})}function d(e,t){return Object(a["a"])({url:"/pageStyle/deletePageStle",method:"get",params:{drid:t},headers:{database:e}})}function p(e,t){return Object(a["a"])({url:"/structureDiagramStyle/getBydrId",method:"get",params:{drId:t},headers:{database:e}})}function f(e){return Object(a["a"])({url:"/zsqy/console/getConsoleMode",method:"get",params:{},headers:{database:e}})}function h(e,t,n){return Object(a["a"])({url:"/zsqy/console/TemplateInstructionSend",method:"post",data:n,headers:{database:e,appId:t}})}function m(e,t,n){return Object(a["a"])({url:"/zsqy/drinfo/".concat(e,"/findAll"),method:"get",params:{drtypeid:t,floorId:n},headers:{database:e,appId:e}})}},d5b3:function(e,t,n){"use strict";n("bc74")},d807:function(e,t,n){"use strict";n("e4e4")},d8ad:function(e,t,n){"use strict";var a=n("2b0e"),i=new a["default"];t["a"]=i},dc7d:function(e,t,n){"use strict";n("87a0")},dcb2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"v-button",style:e.buttonStyle,on:{click:function(t){return e.eventButton(e.element.events)}}},[e._v("\n  "+e._s(e.propValue)+"\n")])},i=[],r={props:{propValue:{type:String,default:""},element:{type:Object,default:function(){}}},data:function(){return{baseUrl:this.global.baseUrl}},computed:{buttonStyle:function(){return this.element.style.backgroundImage?" background: url(".concat(this.baseUrl+this.element.style.backgroundImage,") 0 0 / 100% 100%"):this.element.style.backgroundColor?" background-color: ".concat(this.element.style.backgroundColor):void 0}},methods:{eventButton:function(e){}}},s=r,o=(n("a9d8"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"516e99fe",null);t["default"]=l.exports},dcfd:function(e,t,n){},df6a:function(e,t,n){"use strict";n("7a71")},df7a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"svg-triangle-container"},[n("svg",{attrs:{width:e.element.style.width,height:e.element.style.height}},[n("polygon",{attrs:{points:e.points,fill:e.element.style.backgroundColor}})])])},i=[],r=(n("6b54"),{props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default:function(){}}},data:function(){return{height:0,points:""}},watch:{"element.style.width":function(){this.draw()},"element.style.height":function(){this.draw()}},mounted:function(){this.draw()},methods:{draw:function(){var e=this.element.style,t=e.width,n=e.height;this.drawTriangle(t,n)},drawTriangle:function(e,t){var n=80,a=[[40/n,0/n],[80/n,20/n],[80/n,60/n],[40/n,80/n],[0/n,60/n],[0/n,20/n]],i=a.map((function(n){return e*n[0]+" "+t*n[1]}));this.points=i.toString()}}}),s=r,o=(n("d5b3"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"0088385a",null);t["default"]=l.exports},e465:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return c}));var a=n("b775");function i(e,t){return Object(a["a"])({url:"zsqy/qsAlarmlog/".concat(e,"/findObject"),method:"post",data:t})}function r(e){return Object(a["a"])({url:"zsqy/alarmtype/".concat(e,"/findAll"),method:"get"})}function s(e){return Object(a["a"])({url:"zsqy/qsAlarmlog/".concat(e,"/export"),method:"get",responseType:"blob"})}function o(e){return Object(a["a"])({url:"zsqy/qsAlarmlog/".concat(e,"/findEchars"),method:"get"})}function l(e,t){return Object(a["a"])({url:"zsqy/qsAlarmlog/".concat(e,"/update"),method:"post",data:t})}function c(e,t){return Object(a["a"])({url:"zsqy/qsAlarmlog/".concat(e,"/queryPicByDrid"),method:"get",params:{drid:t}})}},e4e4:function(e,t,n){},e596:function(e,t,n){},e8bfc:function(e,t,n){"use strict";n("09b5")},eef9:function(e,t,n){"use strict";n("5070")},ef7a:function(e,t,n){"use strict";n("c01d")},f1c4:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var a=n("b775");function i(e,t){return Object(a["a"])({url:"/zsqy/drinfo/".concat(e,"/findDrByDrIds"),method:"post",params:{drIds:t}})}function r(e,t,n,i){return Object(a["a"])({url:"/zsqy/drinfo/".concat(e,"/findPicDrByType"),method:"post",params:{picId:t,drtypeId:n,drname:i}})}function s(e,t){return Object(a["a"])({url:"/zsqy/reg/".concat(e,"/findImageRegSub"),method:"post",data:t})}},f25c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:e.isstyle,attrs:{id:e.id,config:e.config}})},i=[],r=(n("c5f6"),n("313e")),s=n.n(r),o={props:{totalNum:{type:Number,default:function(){return 20}},id:{type:String,default:""},isstyle:{},config:{type:Object}},data:function(){return{charts:"",value:null,pieconfig:null}},watch:{totalNum:{immediate:!0,handler:function(e,t){var n=this;this.$nextTick((function(){n.value=e,n.initChart(n.id)}))}},isstyle:{deep:!0,handler:function(e){this.initChart(this.id)}},config:{immediate:!0,deep:!0,handler:function(e,t){var n=this;console.log("🚀 ~fig",e),e!=t&&this.$nextTick((function(){n.pieconfig=e,n.initChart(n.id)}))}}},created:function(){var e=this;this.$nextTick((function(){e.initChart(e.id)}))},methods:{initChart:function(e){var t=this,n=!0,a=this.value,i=this.pieconfig,r=[i.pieZeroColor,i.pieOneHundredColor];this.charts=s.a.init(document.getElementById(e)),setTimeout((function(){t.$nextTick((function(){t.charts.resize()}))}),0),this.charts.setOption({backgroundColor:"",title:{text:"{a|"+a+"}{c|%}",x:"center",y:"center",textStyle:{rich:{a:{fontSize:i.pieFontSize,color:i.pieFontColor,fontWeight:"bold",fontFamily:"YouSheBiaoTiHei"},c:{fontSize:i.pieFontSize,color:i.pieFontColor,fontWeight:"normal",fontFamily:"YouSheBiaoTiHei"}}}},series:[{name:"",type:"pie",radius:["85%","70%"],silent:!0,clockwise:n,startAngle:90,z:0,zlevel:0,label:{normal:{position:"center"}},data:[{value:a,name:"",itemStyle:{normal:{borderWidth:.5,shadowBlur:20,color:{colorStops:[{offset:0,color:r[0]},{offset:1,color:r[1]}]}}}},{value:100-a,name:"",label:{normal:{show:!1}},itemStyle:{normal:{color:i.pieRemaining}}}]}]})}}},l=o,c=n("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);t["default"]=u.exports},f36d:function(e,t,n){"use strict";n("b3e3")},f84b:function(e,t,n){},fb12:function(e,t,n){}}]);