(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-698851e0"],{"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),Math.easeInOutQuad=function(e,t,i,a){return e/=a/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,i){var r=s(),o=e-r,l=20,c=0;t="undefined"===typeof t?500:t;var m=function e(){c+=l;var s=Math.easeInOutQuad(c,r,o,t);n(s),c<t?a(e):i&&"function"===typeof i&&i()};m()}},"4bcf":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{attrs:{action:"",accept:"image/png, image/gif, image/jpg, image/jpeg","list-type":"picture-card",limit:1,"on-success":e.uploadSuccess,"on-error":e.uploadError,"before-upload":e.beforeAvatarUpload,"on-change":e.uploadChange,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},n=[],s={name:"MyImgUpload",data:function(){return{fileList:[],editData:"",dialogImageUrl:"",dialogVisible:!1}},methods:{uploadChange:function(e){var t="image/jpeg"===e.raw.type||"image/png"===e.raw.type||"image/jpg"===e.raw.type||"image/gif"===e.raw.type,i=e.size/1024/1024<10;return t?i?void this.$emit("upload",e.raw):(this.$message.error("上传文件大小不能超过 10MB!"),!1):(this.$message.error("上传文件只能是图片格式!"),!1)},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeAvatarUpload:function(e){},uploadSuccess:function(e,t,i){this.editData.topicPic=e,this.$message.success("上传成功")},uploadError:function(e,t){this.$message.error("上传失败")}}},r=s,o=i("2877"),l=Object(o["a"])(r,a,n,!1,null,null,null);t["a"]=l.exports},"4d42":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"admin-container"},[i("div",{staticClass:"lay"},[i("div",{staticClass:"lay-left"},[e._m(0),e._v(" "),i("el-form",{ref:"form",staticClass:"admin-form",attrs:{"label-width":"80px","label-position":"left"}},[i("el-form-item",{attrs:{label:"图片名称",required:""}},[i("el-input",{attrs:{clear:"el-input",placeholder:"请输入图片名称",clearable:""},model:{value:e.imgName,callback:function(t){e.imgName=t},expression:"imgName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"图片类型",required:""}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择LOGO类型"},on:{change:e.valueChange},model:{value:e.imgType,callback:function(t){e.imgType=t},expression:"imgType"}},e._l(e.options,(function(e,t){return i("el-option",{key:t,attrs:{label:e.value,value:e.item}})})),1)],1)],1),e._v(" "),i("div",{staticClass:"img-upload"},[e.imgUrl?i("img",{staticClass:"show-img",attrs:{width:"100",height:"100",src:e.imgUrl}}):e._e(),e._v(" "),i("MyImgUpload",{on:{upload:e.uploadFile}})],1),e._v(" "),i("div",{staticClass:"form-btnbox",staticStyle:{"margin-top":"30px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.handelAdd}},[e._v("增加")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.updateImg}},[e._v("确认修改")])],1)],1),e._v(" "),i("div",{staticClass:"lay-right"},[i("div",{staticClass:"admin-header"},[e._m(1),e._v(" "),i("div",{staticClass:"admin-header-right"},[i("el-input",{staticClass:"headermr",attrs:{placeholder:"请输入图片名称",clearable:""},model:{value:e.handleimgName,callback:function(t){e.handleimgName=t},expression:"handleimgName"}}),e._v(" "),i("el-button",{staticClass:"headermr",attrs:{type:"primary"},on:{click:e.searchimgname}},[e._v("\n            查询\n          ")])],1)]),e._v(" "),i("div",{staticClass:"admin-tablebox"},[i("el-table",{staticClass:"admin-table",attrs:{data:e.tableDatas,border:""}},[i("af-table-column",{attrs:{prop:"imgid",label:"序号"}}),e._v(" "),i("af-table-column",{attrs:{prop:"imgname",label:"图片名称"}}),e._v(" "),i("af-table-column",{attrs:{prop:"imgtype",label:"图片类型"}}),e._v(" "),i("af-table-column",{attrs:{prop:"imgurl",label:"图片路径",width:"550"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(i){return e.handelEdit(t.$index,t.row)}}},[e._v("\n                编辑\n              ")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.handelDelete(t.$index,t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),e._v(" "),i("pages-pagination",{directives:[{name:"show",rawName:"v-show",value:e.filterObj.rowCount>0,expression:"filterObj.rowCount > 0"}],staticClass:"admin-pagination",attrs:{total:e.filterObj.rowCount,page:e.filterObj.pageCurrent,limit:e.filterObj.pageSize},on:{"update:page":function(t){return e.$set(e.filterObj,"pageCurrent",t)},"update:limit":function(t){return e.$set(e.filterObj,"pageSize",t)},pagination:e.getList}})],1)])])])},n=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"admin-header"},[i("div",{staticClass:"admin-header-left"},[i("div",{staticClass:"admin-header-left-tit"},[e._v("图片编辑")])]),e._v(" "),i("div",{staticClass:"admin-header-right"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"admin-header-left"},[i("div",{staticClass:"admin-header-left-tit"},[e._v("详细")])])}],s=(i("8e6e"),i("456d"),i("ac6a"),i("ade3")),r=i("2f62"),o=i("4bcf"),l=i("b775");function c(e,t,i,a,n){return Object(l["a"])({url:"zsqy/images/".concat(e,"/findObject"),method:"get",params:{pageCurrent:t,pageSize:i,imgtype:a,imgname:n}})}function m(e,t){return Object(l["a"])({url:"zsqy/images/".concat(e,"/save"),method:"post",data:t})}function u(e,t){return Object(l["a"])({url:"zsqy/images/".concat(e,"/update"),method:"put",data:t})}function p(e,t){return Object(l["a"])({url:"zsqy/images/".concat(e,"/delete"),method:"delete",params:{imgid:t}})}var d=i("b190");function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){Object(s["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f={name:"BuildingInformation",components:{PagesPagination:d["a"],MyImgUpload:o["a"]},computed:h({},Object(r["b"])(["path"])),data:function(){return{baseUrl:this.global.baseUrl,imgName:"",handleimgName:"",imgType:"",file:"",imgUrl:"",filterObj:{pageCurrent:1,pageCount:1,pageSize:10,rowCount:0},options:[{item:"picimage",value:"平面图"},{item:"systemicon",value:"结构图"},{item:"material",value:"可视化素材"},{item:"menuicon",value:"设备监控菜单图"},{item:"icon",value:"其他"}],tableDatas:[],editData:{}}},created:function(){this.getList()},methods:{searchimgname:function(){this.filterObj.pageCurrent=1,this.getList()},getList:function(){var e=this,t=this.imgType,i=this.handleimgName;t="其他"===t?"icon":"设备监控菜单图"===t?"menuicon":"平面图"===t?"picimage":"结构图"===t?"systemicon":"可视化素材"===t?"material":t,c(this.path,this.filterObj.pageCurrent,this.filterObj.pageSize,t,i).then((function(t){e.filterObj.rowCount=t.data.rowCount,e.tableDatas=t.data.records,e.tableDatas.forEach((function(e){"picimage"==e.imgtype?e.imgtype="平面图":"systemicon"==e.imgtype?e.imgtype="结构图":"menuicon"==e.imgtype?e.imgtype="设备监控菜单图":"material"==e.imgtype?e.imgtype="可视化素材":e.imgtype="其他"}))})).catch(console.log)},uploadFile:function(e){this.file=e},handelAdd:function(){var e=this;"其他"===this.imgType?this.imgType="icon":"设备监控菜单图"===this.imgType?this.imgType="menuicon":"平面图"===this.imgType?this.imgType="picimage":"结构图"===this.imgType?this.imgType="systemicon":"可视化素材"===this.imgType?this.imgType="material":this.imgType=this.imgType;var t=new FormData;t.append("imgname",this.imgName),t.append("imgtype",this.imgType),t.append("file",this.file),m(this.path,t).then((function(t){2e4===t.status&&(e.$message.success("新增成功!"),e.getList())})).catch(console.log)},handelEdit:function(e,t){this.editData=t,this.imgName=t.imgname,this.imgType=t.imgtype,this.imgUrl=this.global.baseUrl+t.imgurl},updateImg:function(){var e=this;"其他"===this.imgType?this.imgType="icon":"设备监控菜单图"===this.imgType?this.imgType="menuicon":"平面图"===this.imgType?this.imgType="picimage":"结构图"===this.imgType?this.imgType="systemicon":"可视化素材"===this.imgType?this.imgType="material":this.imgType=this.imgType;var t=new FormData;t.append("imgid",this.editData.imgid),t.append("imgname",this.imgName),t.append("imgtype",this.imgType),t.append("file",this.file),u(this.path,t).then((function(t){2e4===t.status&&(e.$message.success("修改成功!"),e.getList())})).catch(console.log)},handelDelete:function(e,t){var i=this,a=confirm("确定要删除该图片吗？");a&&p(this.path,t.imgid).then((function(e){2e4===e.status&&(i.$message.success("删除成功!"),i.getList())})).catch(console.log)},valueChange:function(){this.getList()}}},b=f,y=i("2877"),v=Object(y["a"])(b,a,n,!1,null,"8282a834",null);t["default"]=v.exports}}]);