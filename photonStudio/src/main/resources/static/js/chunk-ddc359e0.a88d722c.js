(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddc359e0"],{"0b4e":function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"j",(function(){return l})),a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return s})),a.d(t,"i",(function(){return u})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return p})),a.d(t,"k",(function(){return d})),a.d(t,"l",(function(){return m})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return h}));var n=a("b775");function i(e,t){return Object(n["a"])({url:"zsqy/user/findUser",method:"get",params:{pageCurrent:e,pageSize:t}})}function l(e){return Object(n["a"])({url:"zsqy/user/findUserByName",method:"get",params:{username:e}})}function r(){return Object(n["a"])({url:"zsqy/user/findAll",method:"get"})}function s(e){return Object(n["a"])({url:"zsqy/manager/findObjectByUser",method:"get",params:{userid:e}})}function u(e,t,a){return Object(n["a"])({url:"zsqy/appusergroup/findObject",method:"get",params:{pageCurrent:e,pageSize:t,userid:a}})}function o(e){return Object(n["a"])({url:"zsqy/usergroup/".concat(e,"/findAll"),method:"get"})}function c(e){return Object(n["a"])({url:"zsqy/user/saveUser",method:"post",data:e})}function p(e){return Object(n["a"])({url:"zsqy/appusergroup/save",method:"post",data:e})}function d(e){return Object(n["a"])({url:"zsqy/user/updateUser",method:"put",data:e})}function m(e){return Object(n["a"])({url:"zsqy/appusergroup/update",method:"put",data:e})}function f(e){return Object(n["a"])({url:"zsqy/user/deleteUser",method:"delete",params:{ids:e+","}})}function h(e,t,a,i){return Object(n["a"])({url:"zsqy/appusergroup/delete",method:"delete",params:{id:e,appid:t,appName:a,userid:i}})}},"6c3c":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));a("ac6a");function n(e,t){var a="";return isNaN(e)||null==e||"null"==e?""!=e&&null!=e&&"null"!=e?(t.forEach((function(t){e==t.value&&(a=t.id)})),a):a:e}function i(e,t){var a="";return null!=e&&"null"!=e&&""!==e?isNaN(parseInt(e))?e:(t.forEach((function(t){parseInt(e)==t.id&&(a=t.value)})),a):a}function l(e){return null===e||"null"===e?(e="",e):e}},c79e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-container"},[a("div",{staticClass:"lay"},[a("div",{staticClass:"lay-left"},[e._m(0),e._v(" "),a("div",{staticClass:"admin-tablebox"},[a("el-form",{ref:"ruleForm",staticClass:"admin-form",attrs:{model:e.ruleForm,"label-width":"120px","label-position":"left",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"input0",required:""}},[a("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入用户名",clearable:""},model:{value:e.ruleForm.input0,callback:function(t){e.$set(e.ruleForm,"input0",t)},expression:"ruleForm.input0"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型",required:""}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择用户类型"},model:{value:e.input1,callback:function(t){e.input1=t},expression:"input1"}},e._l(e.userOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"phone",required:""}},[a("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入邮箱",clearable:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"授权时间",required:""}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择授权时间"},model:{value:e.input2,callback:function(t){e.input2=t},expression:"input2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"App类型",required:""}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择App类型"},model:{value:e.permission,callback:function(t){e.permission=t},expression:"permission"}},e._l(e.applist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handelAdd}},[e._v("增加用户")])],1)]),e._v(" "),a("div",{staticClass:"lay-right"},[e._m(1),e._v(" "),a("div",{staticClass:"admin-tablebox"},[a("el-table",{staticClass:"admin-tree",attrs:{data:e.tableDatas1}},[a("af-table-column",{attrs:{prop:"id",label:"ID"}}),e._v(" "),a("af-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("af-table-column",{attrs:{prop:"licensetype",label:"授权类型"}}),e._v(" "),a("af-table-column",{attrs:{prop:"phonenum",label:"手机号"}}),e._v(" "),a("af-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("af-table-column",{attrs:{prop:"permission",formatter:e.faultTypestate,label:"App类型"}}),e._v(" "),a("af-table-column",{attrs:{prop:"licensetime",label:"授权时长"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("\n                编辑\n              ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),e._v(" "),a("div",{staticClass:"el-pagination admin-pagination"},[a("div",{staticClass:"btn"},[a("button",{on:{click:e.prev}},[e._v("上一页")]),e._v(" "),a("span",[e._v(e._s(e.currentPage1))]),e._v(" "),a("button",{on:{click:e.next}},[e._v("下一页")])]),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.currentPage1,"page-sizes":[5,10,20,40],"page-size":e.pageSize1,layout:"total, sizes, jumper",total:e.rowCount1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1)])]),e._v(" "),a("el-dialog",{attrs:{title:"修改用户管理",visible:e.updateVisible1},on:{"update:visible":function(t){e.updateVisible1=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.editData1,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{clearable:"",readonly:""},model:{value:e.editData1.username,callback:function(t){e.$set(e.editData1,"username",t)},expression:"editData1.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择用户类型"},model:{value:e.editData1.licensetype,callback:function(t){e.$set(e.editData1,"licensetype",t)},expression:"editData1.licensetype"}},e._l(e.userOption,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{clearable:""},model:{value:e.editData1.phonenum,callback:function(t){e.$set(e.editData1,"phonenum",t)},expression:"editData1.phonenum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{clearable:""},model:{value:e.editData1.email,callback:function(t){e.$set(e.editData1,"email",t)},expression:"editData1.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"授权时间"}},[a("el-date-picker",{attrs:{type:"date",clearable:"",placeholder:"选择授权时间"},model:{value:e.editData1.licensetime,callback:function(t){e.$set(e.editData1,"licensetime",t)},expression:"editData1.licensetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"App类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择App类型"},model:{value:e.editData1.permission,callback:function(t){e.$set(e.editData1,"permission",t)},expression:"editData1.permission"}},e._l(e.applist,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateTure}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-header"},[a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[e._v("用户编辑")])]),e._v(" "),a("div",{staticClass:"admin-header-right"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-header"},[a("div",{staticClass:"admin-header-left"},[a("div",{staticClass:"admin-header-left-tit"},[e._v("用户详细")])]),e._v(" "),a("div",{staticClass:"admin-header-right"})])}],l=(a("ac6a"),a("6c3c")),r=a("0b4e"),s=a("ed08"),u={inject:["reload"],name:"UserManage",data:function(){var e=function(e,t,a){""===t?a(new Error("用户名不能为空")):(Object(r["j"])(t).then((function(e){console.log(e)})).catch(console.log),a())};return{ruleForm:{input0:"",phone:""},rules:{input0:[{validator:e,trigger:"blur"}],phone:[{validator:e,trigger:"blur"}]},currentPage1:1,rowCount1:0,pageSize1:7,email:"",input1:"",input2:"",input3:"",input4:"",input5:"",permission:"",updateVisible1:!1,updateVisible2:!1,usernameOptions:[],applist:[{id:0,value:"维修端"},{id:1,value:"用户端"}],userOption:[{id:1,value:"临时用户"},{id:2,value:"管理员"}],editData1:{},tableDatas1:[]}},created:function(){var e=this;this.findUser(this.currentPage1,this.pageSize1),Object(r["e"])().then((function(t){e.usernameOptions=t.data})).catch(console.log)},methods:{faultTypestate:function(e,t){return 1==e.permission?"用户端":0==e.permission?"维修端":void 0},findUser:function(e,t){var a=this;Object(r["h"])(e,t).then((function(e){a.rowCount1=e.data.rowCount,a.tableDatas1=e.data.records,a.tableDatas1.forEach((function(e){null!=e.licensetime&&(e.licensetime=Object(s["d"])(e.licensetime)),e.licensetype=Object(l["a"])(e.licensetype,a.userOption)}))})).catch(console.log)},handleSizeChange:function(e){this.pageSize1=e,this.currentpage1=1,this.findUser(this.currentPage1,this.pageSize1)},handleCurrentChange:function(e){this.currentPage1=e,this.tableDatas1.length<this.rowCount1&&this.findUser(this.currentPage1,this.pageSize1)},prev:function(){1===this.currentPage1?this.currentPage1=1:(this.currentPage1--,this.tableDatas1.length<this.rowCount1&&this.findUser(this.currentPage1,this.pageSize1))},next:function(){var e=Math.ceil(this.rowCount1/this.pageSize1);this.currentPage1<e&&(this.currentPage1++,this.tableDatas1.length<this.rowCount1&&this.findUser(this.currentPage1,this.pageSize1))},handelAdd:function(){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return console.log("错误提交!!"),!1;var a=new FormData;a.append("username",e.ruleForm.input0),a.append("phonenum",e.ruleForm.phone),a.append("email",e.email),a.append("licensetype",e.input1),a.append("permission",e.permission),""!=e.input2&&a.append("licensetime",e.input2),Object(r["a"])(a).then((function(t){var a=t.msg;"OK"==a&&(e.$message.success("新增成功!"),e.reload())})).catch(console.log)}))},handleEdit:function(e,t){this.updateVisible1=!0,this.editData1=t},updateTure:function(){var e=this,t=new FormData;t.append("id",this.editData1.id),t.append("username",this.editData1.username),t.append("phonenum",this.editData1.phonenum),t.append("email",this.editData1.email),t.append("permission",this.editData1.permission),t.append("licensetype",Object(l["c"])(this.editData1.licensetype,this.userOption)),t.append("licensetime",new Date(this.editData1.licensetime)),Object(r["k"])(t).then((function(t){var a=t.msg;"OK"==a&&(e.$message.success("修改成功!"),e.reload())})).catch(console.log)},handleDelete:function(e,t){var a=this;Object(r["c"])(t.id).then((function(e){a.$confirm("此操作将删除用户信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.status;2e4==t&&(a.$message.success("删除成功!"),a.reload())})).catch((function(){}))})).catch(console.log)}}},o=u,c=a("2877"),p=Object(c["a"])(o,n,i,!1,null,null,null);t["default"]=p.exports}}]);