(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21d959e6"],{2071:function(e,t,n){"use strict";n("fb00")},"361d":function(e,t,n){"use strict";n("b562")},9993:function(e,t,n){"use strict";n("edd0")},b562:function(e,t,n){},ce0d:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-container"},[n("el-row",[n("el-col",{attrs:{xs:4,sm:6,md:8,lg:9,xl:7}},[n("div",{staticClass:"admin-header"},[n("div",{staticClass:"admin-header-left"},[n("div",{staticClass:"admin-header-left-tit"},[e._v("系统菜单")])]),e._v(" "),n("div",{staticClass:"admin-header-right"})]),e._v(" "),n("div",{staticClass:"admin-tablebox"},[n("div",{staticClass:"menu-manage"},[n("ul",[n("li",[n("p",[n("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n                菜单名称\n              ")]),e._v(" "),n("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入菜单名称",clearable:""},model:{value:e.input0,callback:function(t){e.input0=t},expression:"input0"}})],1),e._v(" "),n("li",[n("p",[e._v("隶属菜单")]),e._v(" "),n("MyInput",{attrs:{Finput:e.input1,inputData:e.menus},on:{handleFocus:e.focus,handleSelect:e.select}})],1),e._v(" "),n("li",[n("p",[n("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n                页面路径\n              ")]),e._v(" "),n("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入建筑名称",clearable:""},model:{value:e.input2,callback:function(t){e.input2=t},expression:"input2"}})],1),e._v(" "),n("li",[n("p",[n("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v("\n                排列顺序\n              ")]),e._v(" "),n("el-input",{staticClass:"el-input",attrs:{placeholder:"请输入排列顺序",clearable:""},model:{value:e.input3,callback:function(t){e.input3=t},expression:"input3"}})],1)]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handelAdd}},[e._v("增加")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.updateTrue}},[e._v("确认修改")])],1)])]),e._v(" "),n("el-col",{attrs:{xs:20,sm:18,md:16,lg:15,xl:17}},[n("div",{staticClass:"admin-header"},[n("div",{staticClass:"admin-header-left"},[n("div",{staticClass:"admin-header-left-tit"},[e._v("菜单详细")])]),e._v(" "),n("div",{staticClass:"admin-header-right"})]),e._v(" "),n("div",{staticClass:"admin-tablebox"},[n("MyTree",{staticClass:"admin-table",attrs:{"tree-data":e.treeData},on:{more:e.getCurrentId,update:e.updateMenu,delete:e.deleteMenu}})],1)])],1)],1)},r=[],s=(n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu-tree"},[n("el-tree",{ref:"rootData",attrs:{data:e.treeData,props:e.defaultProps,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick}})],1)}),o=[],a=(n("20d6"),{props:["treeData"],data:function(){return{defaultProps:{children:"children",label:"menuName"}}},methods:{handleNodeClick:function(e){this.$emit("more",e.id)},update:function(e,t){this.$emit("update",e,t)},remove:function(e,t){var n=e.parent,i=n.data.children||n.data,r=i.findIndex((function(e){return e.id===t.id})),s=confirm("该目录下的子目录将全部删除，确定要删除吗？");s&&(i.splice(r,1),this.$emit("delete",t))},renderContent:function(e,t){var n=this,i=t.node,r=t.data;t.store;return e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;"},[e("span",[e("span",[i.label])]),e("span",[e("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(){return n.update(i,r)}}},["修改"]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(){return n.remove(i,r)}}},["删除"])])])}}}),u=a,c=(n("9993"),n("2877")),l=Object(c["a"])(u,s,o,!1,null,null,null),d=l.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.querySearch,placeholder:"请选择内容"},on:{focus:e.handleFocus,select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"name"},[e._v(e._s(t.item.value))])]}}]),model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},[n("i",{staticClass:"el-icon-edit el-input__icon",attrs:{slot:"suffix"},on:{click:e.handleIconClick},slot:"suffix"})])},f=[],h={name:"MyInput",props:["inputData","Finput"],data:function(){return{restaurants:[],input:""}},watch:{inputData:function(e){this.restaurants=e},Finput:function(e){console.log(e),this.input=e}},methods:{querySearch:function(e,t){var n=this.restaurants,i=e?n.filter(this.createFilter(e)):n;t(i)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleFocus:function(){this.$emit("handleFocus")},handleSelect:function(e){this.input=e.value,this.$emit("handleSelect",e)},handleIconClick:function(e){console.log(e)}}},v=h,m=(n("361d"),Object(c["a"])(v,p,f,!1,null,"058a1a3b",null)),y=m.exports,g=n("b775");function _(e){return Object(g["a"])({url:"zsqy/menu/findmenu",method:"get",params:{apptypeid:e}})}function b(e){return Object(g["a"])({url:"zsqy/menu/findmenu",method:"get",params:{parentId:e}})}function L(e){return Object(g["a"])({url:"zsqy/menu/savemenu",method:"post",data:e})}function w(e){return Object(g["a"])({url:"zsqy/menu/update",method:"put",data:e})}function C(e){return Object(g["a"])({url:"zsqy/menu/delete",method:"delete",params:{id:e}})}function x(e,t,n){return null!=t&&""!=t&&t!=[]&&(n.forEach((function(n){n.id===e?n.children=t:n.children.forEach((function(n){n.id===e?n.children=t:n.children.forEach((function(n){n.id===e&&(n.children=t)}))}))})),console.log(n)),null}n("faa1");var O={inject:["reload"],name:"MenuManage",components:{MyInput:y,MyTree:d},data:function(){return{input0:"",input1:"",input1PID:"",input2:"",input3:"",updatData:"",item:{},menus:[],projectType:[{id:"",value:""}],treeData:[]}},created:function(){this.findMenu()},methods:{findMenu:function(){var e=this;_().then((function(t){var n=t.data,i=void 0===n?[]:n,r=[];i.forEach((function(e){var t={children:[],id:e.id,menuLevel:e.menuLevel,menuName:e.menuName,menuPath:e.menuPath,parentId:e.parentId,projectTypeId:e.apptypeid};r.push(t)})),e.treeData=r})).catch(console.log)},getCurrentId:function(e){var t=this;b(e).then((function(n){var i=n.data;x(e,i,t.treeData)})).catch(console.log)},focus:function(){var e=[];this.treeData.forEach((function(t){var n={id:t.id,value:t.menuName};e.push(n),t.children&&t.children.forEach((function(t){var n={id:t.id,value:t.menuName};e.push(n),t.children&&t.children.forEach((function(t){var n={id:t.id,value:t.menuName};e.push(n)}))}))})),this.menus=e},select:function(e){this.item=e},handelAdd:function(){var e=this;if(""===this.input0||""===this.input2||""===this.input3)this.$message.error("*为必填项，请重新填写！");else{var t="";t=void 0==this.item.id?0:this.item.id;var n=new FormData;n.append("menuName",this.input0),n.append("parentId",t),n.append("menuPath",this.input2),n.append("menuLevel",this.input3),L(n).then((function(t){var n=t.msg;"OK"==n&&(e.$message.success("新增成功!"),e.reload())})).catch(console.log)}},updateMenu:function(e,t){var n=e.parent;this.updatData=t,this.input0=t.menuName,this.input1=n.data.menuName,this.input1PID=t.parentId,this.input2=t.menuPath,this.input3=t.menuLevel},updateTrue:function(){var e=this,t="";if(t=void 0==this.item.id?this.input1PID:this.item.id,""===this.input0||""===this.input2||""===this.input3)this.$message.error("*为必填项，请重新填写！");else{var n=new FormData;n.append("id",this.updatData.id),n.append("menuName",this.input0),n.append("parentId",t),n.append("menuPath",this.input2),n.append("menuLevel",this.input3),w(n).then((function(t){var n=t.msg;"OK"==n&&(e.$message.success("修改成功!"),e.reload())})).catch(console.log)}},deleteMenu:function(e){var t=this;C(e.id).then((function(e){var n=e.msg;"OK"==n&&(t.$message.success("删除成功!"),t.reload())})).catch(console.log)}}},E=O,j=(n("2071"),Object(c["a"])(E,i,r,!1,null,"002e8dc6",null));t["default"]=j.exports},edd0:function(e,t,n){},faa1:function(e,t,n){"use strict";var i,r="object"===typeof Reflect?Reflect:null,s=r&&"function"===typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function o(e){console&&console.warn&&console.warn(e)}i=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}e.exports=u,e.exports.once=b,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function p(e,t,n,i){var r,s,a;if(l(n),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),void 0===a)a=s[t]=n,++e._eventsCount;else if("function"===typeof a?a=s[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),r=d(e),r>0&&a.length>r&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,o(u)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=f.bind(i);return r.listener=n,i.wrapFn=r,r}function v(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?_(r):y(r,r.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function _(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function b(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,s),i(n)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}w(e,t,s,{once:!0}),"error"!==t&&L(e,r,{once:!0})}))}function L(e,t,n){"function"===typeof e.on&&w(e,"error",t,n)}function w(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(s){i.once&&e.removeEventListener(t,r),n(s)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return d(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=r[e];if(void 0===u)return!1;if("function"===typeof u)s(u,this,t);else{var c=u.length,l=y(u,c);for(n=0;n<c;++n)s(l[n],this,t)}return!0},u.prototype.addListener=function(e,t){return p(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return p(this,e,t,!0)},u.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,i,r,s,o;if(l(t),i=this._events,void 0===i)return this;if(n=i[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,r=s;break}if(r<0)return this;0===r?n.shift():g(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,s=Object.keys(n);for(i=0;i<s.length;++i)r=s[i],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},u.prototype.listeners=function(e){return v(this,e,!0)},u.prototype.rawListeners=function(e){return v(this,e,!1)},u.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},u.prototype.listenerCount=m,u.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},fb00:function(e,t,n){}}]);