(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d0e0532"],{"0749":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pages-container"},[a("div",{staticClass:"pages-header"},[e._v("工单信息")]),e._v(" "),a("div",{staticClass:"pages-filter"},[a("div",{staticClass:"filter-btn"},[a("el-button",{staticClass:"btn-add",on:{click:function(t){e.addVisible=!0}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.handleDeletes}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{type:"info",icon:"el-icon-warning"},on:{click:function(t){return e.finish(1)}}},[e._v("\n        待处理工单\n      ")]),e._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-time"},on:{click:function(t){return e.finish(2)}}},[e._v("\n        处理中工单\n      ")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-success"},on:{click:function(t){return e.finish(3)}}},[e._v("\n        已完成工单\n      ")]),e._v(" "),a("el-button",{staticClass:"btn-add",on:{click:e.exportOrder}},[e._v("导出工单")])],1)]),e._v(" "),a("div",{staticClass:"pages-tablebox"},[a("el-table",{staticClass:"pages-table",attrs:{size:"mini",data:e.tableDatas},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"70",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"drtypename",label:"设备类型",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"drname",label:"设备",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"worktime",label:"派单时间",width:"180px",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workuser",label:"派单人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"worklevel",label:"工单级别",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"executeuser",label:"接单人",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"executetime",label:"工单处理时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"finishtime",label:"工单完成时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"工单状态",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workexplain",label:"工单描述",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("\n            编辑\n          ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1),e._v(" "),a("pages-pagination",{directives:[{name:"show",rawName:"v-show",value:e.filterObj.rowCount>0,expression:"filterObj.rowCount > 0"}],staticClass:"pages-pagination",attrs:{total:e.filterObj.rowCount,page:e.filterObj.pageCurrent,limit:e.filterObj.pageSize},on:{"update:page":function(t){return e.$set(e.filterObj,"pageCurrent",t)},"update:limit":function(t){return e.$set(e.filterObj,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增工单信息",visible:e.addVisible,width:"30%",modal:!1},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{attrs:{"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.deviceTypeId,callback:function(t){e.deviceTypeId=t},expression:"deviceTypeId"}},[a("el-option",{staticStyle:{height:"auto"},attrs:{label:e.deviceType,value:e.deviceTypeId}},[a("el-tree",{ref:"tree",attrs:{data:e.deviceTypeData,"node-key":"drtypeid","highlight-current":"",props:e.defaultProps},on:{"node-click":e.handleCheck}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备"}},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:e.deviceName,callback:function(t){e.deviceName=t},expression:"deviceName"}},e._l(e.deviceOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.drname,value:e.drid}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"派单时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择派单时间"},model:{value:e.dispatchTime,callback:function(t){e.dispatchTime=t},expression:"dispatchTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"派单人"}},[a("el-input",{attrs:{type:"text",readonly:""},model:{value:e.dispatchMan,callback:function(t){e.dispatchMan=t},expression:"dispatchMan"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工单级别"}},[a("el-select",{attrs:{placeholder:"请选择工单状态"},model:{value:e.orderLevel,callback:function(t){e.orderLevel=t},expression:"orderLevel"}},e._l(e.orderLevelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接单人"}},[a("el-select",{attrs:{placeholder:"请选择接单人"},model:{value:e.acceptMan,callback:function(t){e.acceptMan=t},expression:"acceptMan"}},e._l(e.acceptManOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.username,value:e.username}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工单描述"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入工单描述"},model:{value:e.orderInfo,callback:function(t){e.orderInfo=t},expression:"orderInfo"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改工单信息",visible:e.updateVisible,width:"30%",modal:!1},on:{"update:visible":function(t){e.updateVisible=t}}},[a("el-form",{attrs:{"label-position":"left","label-width":"130px"}},[a("el-form-item",{attrs:{label:"设备类型"}},[a("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.editData.drtypeid,callback:function(t){e.$set(e.editData,"drtypeid",t)},expression:"editData.drtypeid"}},[a("el-option",{staticStyle:{height:"auto"},attrs:{label:e.editData.drtypename,value:e.editData.drtypeid}},[a("el-tree",{ref:"tree",attrs:{data:e.deviceTypeData,"node-key":"drtypeid","highlight-current":"",props:e.defaultProps},on:{"node-click":e.handleCheck}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设备"}},[a("el-select",{attrs:{placeholder:"请选择设备"},model:{value:e.editData.drname,callback:function(t){e.$set(e.editData,"drname",t)},expression:"editData.drname"}},e._l(e.deviceOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.drname,value:e.drid}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"派单时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择派单时间"},model:{value:e.editData.worktime,callback:function(t){e.$set(e.editData,"worktime",t)},expression:"editData.worktime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"派单人"}},[a("el-input",{attrs:{type:"text",readonly:""},model:{value:e.editData.workuser,callback:function(t){e.$set(e.editData,"workuser",t)},expression:"editData.workuser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工单级别"}},[a("el-select",{attrs:{placeholder:"请选择工单级别"},model:{value:e.editData.worklevel,callback:function(t){e.$set(e.editData,"worklevel",t)},expression:"editData.worklevel"}},e._l(e.orderLevelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"接单人"}},[a("el-select",{attrs:{placeholder:"请选择接单人"},model:{value:e.editData.executeuser,callback:function(t){e.$set(e.editData,"executeuser",t)},expression:"editData.executeuser"}},e._l(e.acceptManOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.username,value:e.username}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工单处理时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择工单处理时间"},model:{value:e.editData.executetime,callback:function(t){e.$set(e.editData,"executetime",t)},expression:"editData.executetime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工单完成时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择工单完成时间"},model:{value:e.editData.finishtime,callback:function(t){e.$set(e.editData,"finishtime",t)},expression:"editData.finishtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"工单状态"}},[a("el-select",{attrs:{placeholder:"请选择工单状态"},model:{value:e.editData.state,callback:function(t){e.$set(e.editData,"state",t)},expression:"editData.state"}},e._l(e.orderStatusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"工单描述"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入工单描述"},model:{value:e.editData.workexplain,callback:function(t){e.$set(e.editData,"workexplain",t)},expression:"editData.workexplain"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateTrue}},[e._v("确 定")])],1)],1)],1)},n=[],r=(a("8e6e"),a("456d"),a("ac6a"),a("ade3")),l=a("2f62"),o=a("d36f"),c=a("ed08"),s=a("cd77"),d=a("6c3c"),u=a("b190");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{PagesPagination:u["a"]},computed:f({},Object(l["b"])(["path","userName"])),data:function(){var e;return e={filterObj:{pageCurrent:1,pageCount:1,pageSize:8,rowCount:0},deviceTypeId:"",deviceType:"",deviceName:"",dispatchTime:"",dispatchMan:"",orderLevel:"",acceptMan:""},Object(r["a"])(e,"dispatchTime",""),Object(r["a"])(e,"finishTime",""),Object(r["a"])(e,"orderStatus",""),Object(r["a"])(e,"orderInfo",""),Object(r["a"])(e,"deviceTypeData",[]),Object(r["a"])(e,"deviceOptions",[]),Object(r["a"])(e,"acceptManOptions",[]),Object(r["a"])(e,"orderLevelOptions",[{id:1,value:"紧急"},{id:2,value:"中等"},{id:3,value:"一般"}]),Object(r["a"])(e,"orderStatusOptions",[{id:1,value:"待处理"},{id:2,value:"处理中"},{id:3,value:"已完成"}]),Object(r["a"])(e,"tableDatas",[]),Object(r["a"])(e,"editData",{}),Object(r["a"])(e,"addVisible",!1),Object(r["a"])(e,"updateVisible",!1),Object(r["a"])(e,"defaultProps",{children:"drtypeinfoList",label:"drtypename"}),Object(r["a"])(e,"orderIds",[]),Object(r["a"])(e,"exportlist",[]),e},created:function(){var e=this;this.getList(),Object(o["f"])(this.path).then((function(t){e.deviceTypeData=t.data})).catch(console.log),this.dispatchMan=this.userName,Object(o["c"])(this.path).then((function(t){e.acceptManOptions=t.data})).catch(console.log)},methods:{getList:function(){var e=this;Object(o["g"])(this.path,this.filterObj.pageCurrent,this.filterObj.pageSize,this.state).then((function(t){e.filterObj.rowCount=t.data.rowCount,e.tableDatas=t.data.records,e.tableDatas.forEach((function(t){t.worktime=Object(c["c"])(t.worktime),null!=t.executetime&&(t.executetime=Object(c["c"])(t.executetime)),null!=t.finishtime&&(t.finishtime=Object(c["c"])(t.finishtime)),t.worklevel=Object(d["a"])(t.worklevel,e.orderLevelOptions),t.state=Object(d["a"])(t.state,e.orderStatusOptions)}))})).catch(console.log)},finish:function(e){this.findOrder(this.path,this.currentPage,this.pageSize,e)},handleCheck:function(e){var t=this;this.deviceType=e.drtypename,this.deviceTypeId=e.drtypeid,this.editData!={}&&(this.editData.drtypeid=e.drtypeid,this.editData.drtypename=e.drtypename,this.editData.drname=""),""!=this.deviceTypeId&&Object(o["e"])(this.path,this.deviceTypeId).then((function(e){t.deviceOptions=e.data})).catch(console.log),""!=this.editData.drtypeid&&Object(o["e"])(this.path,this.editData.drtypeid).then((function(e){t.deviceOptions=e.data})).catch(console.log)},handleAdd:function(){var e=this,t=new FormData;t.append("drtypeid",this.deviceTypeId),t.append("drid",this.deviceName),t.append("worktime",this.dispatchTime),t.append("workuser",this.dispatchMan),t.append("worklevel",this.orderLevel),t.append("executeuser",this.acceptMan),t.append("state",1),t.append("workexplain",this.orderInfo),Object(o["a"])(this.path,t).then((function(t){var a=t.msg;"OK"==a&&(e.$message.success("新增成功!"),e.reload())})).catch(console.log)},handleEdit:function(e,t){this.updateVisible=!0,this.editData=t},updateTrue:function(){var e=this,t=new FormData;t.append("id",this.editData.id),t.append("drtypeid",this.editData.drtypeid),t.append("drid",Object(d["c"])(this.editData.drname,this.deviceOptions)),t.append("worktime",new Date(this.editData.worktime)),t.append("workuser",this.editData.workuser),t.append("worklevel",Object(d["c"])(this.editData.worklevel,this.orderLevelOptions)),t.append("executeuser",this.editData.executeuser),null!=this.editData.executetime&&t.append("executetime",new Date(this.editData.executetime)),null!=this.editData.finishtime&&t.append("finishtime",new Date(this.editData.finishtime)),t.append("state",Object(d["c"])(this.editData.state,this.orderStatusOptions)),t.append("workexplain",this.editData.workexplain),Object(o["i"])(this.path,t).then((function(t){var a=t.msg;"OK"==a&&(e.$message.success("修改成功!"),e.reload())})).catch(console.log)},handleDelete:function(e,t){var a=this;Object(o["b"])(this.path,t.id).then((function(e){var t=e.msg;"OK"==t&&(a.$message.success("删除成功!"),a.reload())})).catch(console.log)},handleSelectionChange:function(e){var t=this;this.orderIds=[],this.exportlist=[],this.storeIds=e,e.forEach((function(e){t.orderIds.push(e.id),t.exportlist.push(e.drid)}))},handleDeletes:function(){var e=this;console.log(this.orderIds),Object(o["b"])(this.path,this.orderIds.join(",")).then((function(t){var a=t.msg;"OK"==a&&(e.$message.success("批量删除成功!"),e.reload())})).catch(console.log)},exportOrder:function(){Object(o["h"])(this.path,this.exportlist.join(",")).then((function(e){var t=Object(c["c"])(new Date),a="工单信息"+t+".xls";Object(s["a"])(e,a)})).catch(console.log)}}},b=h,m=(a("81c8"),a("2877")),v=Object(m["a"])(b,i,n,!1,null,"fec62b90",null);t["default"]=v.exports},"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var l=r(),o=e-l,c=20,s=0;t="undefined"===typeof t?500:t;var d=function e(){s+=c;var r=Math.easeInOutQuad(s,l,o,t);n(r),s<t?i(e):a&&"function"===typeof a&&a()};d()}},"0f9c":function(e,t,a){},"6c3c":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));a("ac6a");function i(e,t){var a="";return isNaN(e)||null==e||"null"==e?""!=e&&null!=e&&"null"!=e?(t.forEach((function(t){e==t.value&&(a=t.id)})),a):a:e}function n(e,t){var a="";return null!=e&&"null"!=e&&""!==e?isNaN(parseInt(e))?e:(t.forEach((function(t){parseInt(e)==t.id&&(a=t.value)})),a):a}function r(e){return null===e||"null"===e?(e="",e):e}},"81c8":function(e,t,a){"use strict";a("0f9c")},cd77:function(e,t,a){"use strict";function i(e,t){var a=new Blob([e]),i=document.createElement("a");i.download=t,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}a.d(t,"a",(function(){return i}))},d36f:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"i",(function(){return s})),a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"h",(function(){return p}));var i=a("b775");function n(e){return Object(i["a"])({url:"zsqy/Drtypeinfo/".concat(e,"/findAllDrtypeAndDr"),method:"get"})}function r(e,t){return Object(i["a"])({url:"zsqy/drinfo/".concat(e,"/findAll"),method:"get",params:{drtypeid:t}})}function l(e){return Object(i["a"])({url:"zsqy/appuser/".concat(e,"/findAll"),method:"get"})}function o(e,t,a,n){return Object(i["a"])({url:"zsqy/qsworkorder/".concat(e,"/findObject"),method:"get",params:{pageCurrent:t,pageSize:a,state:n}})}function c(e,t){return Object(i["a"])({url:"zsqy/qsworkorder/".concat(e,"/save"),method:"post",data:t})}function s(e,t){return Object(i["a"])({url:"zsqy/qsworkorder/".concat(e,"/update"),method:"put",data:t})}function d(e,t){return Object(i["a"])({url:"zsqy/qsworkorder/".concat(e,"/delete"),method:"delete",params:{ids:t}})}function u(e,t){return Object(i["a"])({url:"zsqy/qsworkorder/".concat(e,"/finddrcehcklog"),method:"post",data:t})}function p(e,t){return Object(i["a"])({url:"/zsqy/qsworkorder/".concat(e,"/export"),method:"get",responseType:"blob",params:{ids:t}})}}}]);