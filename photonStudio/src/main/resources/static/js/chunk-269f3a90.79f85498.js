(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-269f3a90"],{"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,n){var o=a(),s=e-o,c=20,u=0;t="undefined"===typeof t?500:t;var l=function e(){u+=c;var a=Math.easeInOutQuad(u,o,s,t);i(a),u<t?r(e):n&&"function"===typeof n&&n()};l()}},"0de9":function(e,t,n){},"487c":function(e,t,n){"use strict";n("0de9")},"7c72":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("b775");function i(e,t,n){return Object(r["a"])({url:"zsqy/usergroup/".concat(e,"/findObject"),method:"get",params:{pageCurrent:t,pageSize:n}})}function a(e,t){return Object(r["a"])({url:"zsqy/usergroup/".concat(e,"/save"),method:"post",data:t})}function o(e,t){return Object(r["a"])({url:"zsqy/usergroup/".concat(e,"/update"),method:"put",data:t})}function s(e,t){return Object(r["a"])({url:"zsqy/usergroup/".concat(e,"/delete"),method:"delete",params:{ids:t}})}},"9c8f":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));var r=n("b775");function i(e){return Object(r["a"])({url:"zsqy/menu/findAllMenu",method:"get",params:{apptypeid:e}})}function a(e){return Object(r["a"])({url:"zsqy/sysmenuinfo/".concat(e,"/findAllMenu"),method:"get"})}function o(e){return Object(r["a"])({url:"zsqy/pic/".concat(e,"/findObjectInPicmodeid"),method:"get"})}function s(e,t){return Object(r["a"])({url:"zsqy/sysmenuinfo/".concat(e,"/save"),method:"post",data:t})}},ba5f:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-container"},[n("div",{staticClass:"admin-header"},[e._m(0),e._v(" "),n("div",{staticClass:"admin-header-right"},[n("el-button",{attrs:{type:"primary"},on:{click:e.showDialog}},[e._v("增加")]),e._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:e.deletePermissions}},[e._v("批量删除")])],1)]),e._v(" "),n("div",{staticClass:"admin-tablebox"},[n("el-table",{staticClass:"admin-tree",attrs:{data:e.tableDatas,border:""},on:{"selection-change":e.selectPermission}},[n("el-table-column",{attrs:{type:"selection",width:"60"}}),e._v(" "),n("af-table-column",{attrs:{prop:"id",label:"ID",width:"55"}}),e._v(" "),n("af-table-column",{attrs:{prop:"usergroupname",label:"用户组"}}),e._v(" "),n("af-table-column",{attrs:{prop:"qx",label:"权限",width:"600"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return e.editePermission(t.$index,t.row)}}},[e._v("\n            编辑\n          ")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.deletePermission(t.$index,t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1),e._v(" "),n("pages-pagination",{directives:[{name:"show",rawName:"v-show",value:e.filterObj.rowCount>0,expression:"filterObj.rowCount > 0"}],staticClass:"admin-pagination",attrs:{total:e.filterObj.rowCount,page:e.filterObj.pageCurrent,limit:e.filterObj.pageSize},on:{"update:page":function(t){return e.$set(e.filterObj,"pageCurrent",t)},"update:limit":function(t){return e.$set(e.filterObj,"pageSize",t)},pagination:e.getList}})],1),e._v(" "),n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addDialog},on:{"update:visible":function(t){e.addDialog=t},close:e.closeDialog}},[n("el-form",{attrs:{"label-width":"90px","label-position":"left",model:e.formdata,rules:e.rules}},[n("el-form-item",{attrs:{label:"用户组",prop:"usergroupname"}},[n("el-input",{attrs:{clearable:""},model:{value:e.formdata.usergroupname,callback:function(t){e.$set(e.formdata,"usergroupname",t)},expression:"formdata.usergroupname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"菜单权限",prop:"qx"}},[n("div",{staticClass:"treebox"},[n("el-tree",{ref:"permissionTree",staticClass:"tree",attrs:{data:e.permissionTreeData,"show-checkbox":"","highlight-current":"","default-expand-all":"","node-key":"id",props:e.permissionProps},on:{check:e.currentChecked}})],1)])],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-header-left"},[n("div",{staticClass:"admin-header-left-tit"},[e._v("用户菜单权限")])])}],a=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("15fd")),o=n("2909"),s=(n("28a5"),n("ac6a"),n("96cf"),n("1da1")),c=n("ade3"),u=n("967e"),l=n.n(u),d=n("2f62"),f=n("b190"),h=n("7c72"),p=n("9c8f"),m=["children"];function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function g(e,t){if(e){if("string"===typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={components:{PagesPagination:f["a"]},inject:["reload"],data:function(){return{tableDatas:[],addDialog:!1,dialogTitle:"",rules:{usergroupname:[{required:!0,message:"请输入用户组名称",trigger:"blur"}]},formdata:{id:"",usergroupname:""},filterObj:{pageCurrent:1,pageCount:1,pageSize:10,rowCount:0},permissions:[],permissionTreeData:[],permissionProps:{children:"children",label:"menuName"},treeKeys:[],checkedKeys:[],halfCheckedKeys:[]}},computed:O({},Object(d["b"])(["path"])),created:function(){this.getList(),this.findObjMenuApi()},methods:{getList:function(){var e=this;Object(h["c"])(this.path,this.filterObj.pageCurrent,this.filterObj.pageSize).then((function(t){e.filterObj.rowCount=t.data.rowCount,e.tableDatas=t.data.records})).catch(console.log)},findObjMenuApi:function(){var e=Object(s["a"])(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["b"])(this.path);case 2:t=e.sent,n=t.data,r=[],n.forEach((function(e){var t={id:e.id,menuName:e.menuName};e.children&&e.children.length&&(t=O(O({},t),{},{children:e.children})),r.push(t)})),this.permissionTreeData=r;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),closeDialog:function(){this.dialogTitle="",this.addDialog=!1,this.formdata={id:"",usergroupname:""},this.treeKeys=[],this.checkedKeys=[],this.halfCheckedKeys=[]},showDialog:function(){this.dialogTitle="添加用户组",this.addDialog=!0,this.initTree()},editePermission:function(e,t){this.dialogTitle="修改用户组",this.addDialog=!0,this.formdata=t;var n=t.qx.split(","),r=[];n.forEach((function(e){r.push(parseInt(e))})),this.treeKeys=r,this.checkedKeys=r,this.initTree()},save:function(){var e=this,t=[].concat(Object(o["a"])(this.checkedKeys),Object(o["a"])(this.halfCheckedKeys)),n=new FormData;n.append("usergroupname",this.formdata.usergroupname),n.append("qx",t.join(",")),this.formdata.id?(n.append("id",this.formdata.id),Object(h["d"])(this.path,n).then((function(t){2e4===t.status&&(e.$message.success("修改成功!"),e.addDialog=!1,e.getList())})).catch(console.log)):Object(h["a"])(this.path,n).then((function(t){2e4===t.status&&(e.$message.success("新增成功!"),e.addDialog=!1,e.getList())})).catch(console.log)},selectPermission:function(e){this.permissions=e},deletePermission:function(e,t){var n=this;this.$confirm("此操作将删除用户组菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(h["b"])(n.path,t.id).then((function(e){2e4===e.status&&(n.$message.success("删除成功!"),n.getList())})).catch(console.log),n.getList()})).catch((function(){}))},deletePermissions:function(){var e=this,t=[];this.permissions.forEach((function(e){t.push(e.id)})),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(h["b"])(e.path,t.join(",")).then((function(t){2e4===t.status&&(e.$message.success("批量删除成功!"),e.getList())})).catch(console.log)})).catch((function(){}))},getNewTree:function(e,t){var n,r=[],i=b(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.children,c=Object(a["a"])(o,m);(null===s||void 0===s?void 0:s.length)>0&&(r=r.concat(this.getNewTree(s,t))),t.includes(o.id)&&r.push(c)}}catch(u){i.e(u)}finally{i.f()}return r},getTypeList:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.forEach((function(e){var r;(null===(r=e.children)||void 0===r?void 0:r.length)>0?t.getTypeList(e.children,n):n.push({id:e.id,label:e.menuName})}))},initTree:function(){var e=this;console.log(this.treeKeys,"this.treeKeys");var t=this.getNewTree(this.permissionTreeData,this.treeKeys),n=[];this.getTypeList(t,n),console.log(n,"**list************"),this.$nextTick((function(){e.$refs.permissionTree.setCheckedNodes(n)}))},currentChecked:function(e,t){this.checkedKeys=t.checkedKeys,this.halfCheckedKeys=t.halfCheckedKeys}}},j=w,T=(n("487c"),n("2877")),k=Object(T["a"])(j,r,i,!1,null,"b072ce1e",null);t["default"]=k.exports}}]);