# 提供给第三方接口文档


## 获取所有设备类型信息   

**接口地址**:`/dataupload/finDrTypeInfo`


**请求方式**:

**Headers:**
- `database: 数据库名称`（需要找工程师获取具体名称）
`GET`


**请求数据类型**:`application/x-www-form-urlencoded`

**响应数据类型**:`*/*`


**接口描述**:


**请求参数**:


暂无


**响应状态**:


| 状态码 | 说明         | schema                 |
| ------ | ------------ | ---------------------- |
| 200    | OK           | Result«List«设备类型»» |
| 401    | Unauthorized |                        |
| 403    | Forbidden    |                        |
| 404    | Not Found    |                        |


**响应参数**:


| 参数名称               | 参数说明     | 类型           | schema         |
| ---------------------- | ------------ | -------------- | -------------- |
| data                   | 数据         | array          | 设备类型       |
| &emsp;&emsp;drtypeid   | 设备类型id   | integer(int32) |                |
| &emsp;&emsp;drtypename | 设备类型名称 | string         |                |
| errorMsg               | 错误详细消息 | string         |                |
| msg                    | 消息         | string         |                |
| status                 | 状态码       | integer(int32) | integer(int32) |


**响应示例**:

```javascript
{
	"data": [
		{
			"drtypeid": 0,
			"drtypename": ""
		}
	],
	"errorMsg": "",
	"msg": "",
	"status": 0
}
```


## 分页查询所有设备信息


**接口地址**:`/dataupload/findDevicePage`


**请求方式**:

**Headers:**
- `database: 数据库名称`（需要找工程师获取具体名称）
`POST`


**请求数据类型**:`application/x-www-form-urlencoded,application/json`


**响应数据类型**:`*/*`


**接口描述**:


**请求示例**:


```javascript
{
  "drtypeid": 0,
  "pageNum": 0,
  "pageSize": 0
}
```


**请求参数**:


| 参数名称             | 参数说明   | 请求类型 | 是否必须 | 数据类型       | schema   |
| -------------------- | ---------- | -------- | -------- | -------------- | -------- |
| 请求参数             | 请求参数   | body     | true     | 请求参数       | 请求参数 |
| &emsp;&emsp;drtypeid | 设备类型id |          | false    | integer(int32) |          |
| &emsp;&emsp;pageNum  | 页码       |          | true     | integer(int32) |          |
| &emsp;&emsp;pageSize | 每页条数   |          | true     | integer(int32) |          |


**响应状态**:


| 状态码 | 说明         | schema                     |
| ------ | ------------ | -------------------------- |
| 200    | OK           | Result«PageInfo«设备信息»» |
| 201    | Created      |                            |
| 401    | Unauthorized |                            |
| 403    | Forbidden    |                            |
| 404    | Not Found    |                            |


**响应参数**:


| 参数名称                                     | 参数说明     | 类型               | schema             |
| -------------------------------------------- | ------------ | ------------------ | ------------------ |
| data                                         | 数据         | PageInfo«设备信息» | PageInfo«设备信息» |
| &emsp;&emsp;endRow                           |              | integer(int64)     |                    |
| &emsp;&emsp;hasNextPage                      |              | boolean            |                    |
| &emsp;&emsp;hasPreviousPage                  |              | boolean            |                    |
| &emsp;&emsp;isFirstPage                      |              | boolean            |                    |
| &emsp;&emsp;isLastPage                       |              | boolean            |                    |
| &emsp;&emsp;list                             |              | array              | 设备信息           |
| &emsp;&emsp;&emsp;&emsp;drInstallPhone       | 生产厂家电话 | string             |                    |
| &emsp;&emsp;&emsp;&emsp;drManufactureFactory | 设备生产厂家 | string             |                    |
| &emsp;&emsp;&emsp;&emsp;drManufactureStyle   | 设备型号     | string             |                    |
| &emsp;&emsp;&emsp;&emsp;drid                 | 设备id       | integer            |                    |
| &emsp;&emsp;&emsp;&emsp;drname               | 设备名称     | string             |                    |
| &emsp;&emsp;&emsp;&emsp;drtypeid             | 设备类型id   | integer            |                    |
| &emsp;&emsp;&emsp;&emsp;mdcode               | 设备编号     | string             |                    |
| &emsp;&emsp;&emsp;&emsp;spid                 | 视频id       | string             |                    |
| &emsp;&emsp;navigateFirstPage                |              | integer(int32)     |                    |
| &emsp;&emsp;navigateLastPage                 |              | integer(int32)     |                    |
| &emsp;&emsp;navigatePages                    |              | integer(int32)     |                    |
| &emsp;&emsp;navigatepageNums                 |              | array              | integer            |
| &emsp;&emsp;nextPage                         |              | integer(int32)     |                    |
| &emsp;&emsp;pageNum                          |              | integer(int32)     |                    |
| &emsp;&emsp;pageSize                         |              | integer(int32)     |                    |
| &emsp;&emsp;pages                            |              | integer(int32)     |                    |
| &emsp;&emsp;prePage                          |              | integer(int32)     |                    |
| &emsp;&emsp;size                             |              | integer(int32)     |                    |
| &emsp;&emsp;startRow                         |              | integer(int64)     |                    |
| &emsp;&emsp;total                            |              | integer(int64)     |                    |
| errorMsg                                     | 错误详细消息 | string             |                    |
| msg                                          | 消息         | string             |                    |
| status                                       | 状态码       | integer(int32)     | integer(int32)     |


**响应示例**:

```javascript
{
	"data": {
		"endRow": 0,
		"hasNextPage": true,
		"hasPreviousPage": true,
		"isFirstPage": true,
		"isLastPage": true,
		"list": [
			{
				"drInstallPhone": "",
				"drManufactureFactory": "",
				"drManufactureStyle": "",
				"drid": 0,
				"drname": "",
				"drtypeid": 0,
				"mdcode": "",
				"spid": ""
			}
		],
		"navigateFirstPage": 0,
		"navigateLastPage": 0,
		"navigatePages": 0,
		"navigatepageNums": [],
		"nextPage": 0,
		"pageNum": 0,
		"pageSize": 0,
		"pages": 0,
		"prePage": 0,
		"size": 0,
		"startRow": 0,
		"total": 0
	},
	"errorMsg": "",
	"msg": "",
	"status": 0
}
```


## 分页查询所有设备变量信息


**接口地址**:`/dataupload/findDeviceRegInfoPage`


**请求方式**:

**Headers:**
- `database: 数据库名称`（需要找工程师获取具体名称）
`POST`


**请求数据类型**:`application/x-www-form-urlencoded,application/json`


**响应数据类型**:`*/*`


**接口描述**:


**请求示例**:


```javascript
{
  "drId": 0,
  "drtypeid": 0,
  "pageNum": 0,
  "pageSize": 0
}
```


**请求参数**:


| 参数名称             | 参数说明   | 请求类型 | 是否必须 | 数据类型       | schema |
| -------------------- | ---------- | -------- | -------- | -------------- | ------ |
| regReq               | RegReq     | body     | true     | RegReq         | RegReq |
| &emsp;&emsp;drId     | 设备id     |          | false    | integer(int32) |        |
| &emsp;&emsp;drtypeid | 设备类型id |          | false    | integer(int32) |        |
| &emsp;&emsp;pageNum  | 页码       |          | true     | integer(int32) |        |
| &emsp;&emsp;pageSize | 每页条数   |          | true     | integer(int32) |        |


**响应状态**:


| 状态码 | 说明         | schema                         |
| ------ | ------------ | ------------------------------ |
| 200    | OK           | Result«PageInfo«设备变量信息»» |
| 201    | Created      |                                |
| 401    | Unauthorized |                                |
| 403    | Forbidden    |                                |
| 404    | Not Found    |                                |


**响应参数**:


| 参数名称                             | 参数说明             | 类型                   | schema                 |
| ------------------------------------ | -------------------- | ---------------------- | ---------------------- |
| data                                 | 数据                 | PageInfo«设备变量信息» | PageInfo«设备变量信息» |
| &emsp;&emsp;endRow                   |                      | integer(int64)         |                        |
| &emsp;&emsp;hasNextPage              |                      | boolean                |                        |
| &emsp;&emsp;hasPreviousPage          |                      | boolean                |                        |
| &emsp;&emsp;isFirstPage              |                      | boolean                |                        |
| &emsp;&emsp;isLastPage               |                      | boolean                |                        |
| &emsp;&emsp;list                     |                      | array                  | 设备变量信息           |
| &emsp;&emsp;&emsp;&emsp;drId         | 设备id               | integer                |                        |
| &emsp;&emsp;&emsp;&emsp;drtypeid     | 设备类型id           | integer                |                        |
| &emsp;&emsp;&emsp;&emsp;newtagvalue  | 实时值               | string                 |                        |
| &emsp;&emsp;&emsp;&emsp;regId        | id                   | integer                |                        |
| &emsp;&emsp;&emsp;&emsp;regName      | 变量名称             | string                 |                        |
| &emsp;&emsp;&emsp;&emsp;regReadWrite | 读写属性 1只读 2读写 | string                 |                        |
| &emsp;&emsp;&emsp;&emsp;regSub       |                      | string                 |                        |
| &emsp;&emsp;&emsp;&emsp;regUnits     | 单位                 | string                 |                        |
| &emsp;&emsp;&emsp;&emsp;subname      | 值说明               | string                 |                        |
| &emsp;&emsp;&emsp;&emsp;tagName      | 寄存器名称           | string                 |                        |
| &emsp;&emsp;&emsp;&emsp;tagValue     | 初始值               | string                 |                        |
| &emsp;&emsp;navigateFirstPage        |                      | integer(int32)         |                        |
| &emsp;&emsp;navigateLastPage         |                      | integer(int32)         |                        |
| &emsp;&emsp;navigatePages            |                      | integer(int32)         |                        |
| &emsp;&emsp;navigatepageNums         |                      | array                  | integer                |
| &emsp;&emsp;nextPage                 |                      | integer(int32)         |                        |
| &emsp;&emsp;pageNum                  |                      | integer(int32)         |                        |
| &emsp;&emsp;pageSize                 |                      | integer(int32)         |                        |
| &emsp;&emsp;pages                    |                      | integer(int32)         |                        |
| &emsp;&emsp;prePage                  |                      | integer(int32)         |                        |
| &emsp;&emsp;size                     |                      | integer(int32)         |                        |
| &emsp;&emsp;startRow                 |                      | integer(int64)         |                        |
| &emsp;&emsp;total                    |                      | integer(int64)         |                        |
| errorMsg                             | 错误详细消息         | string                 |                        |
| msg                                  | 消息                 | string                 |                        |
| status                               | 状态码               | integer(int32)         | integer(int32)         |


**响应示例**:

```javascript
{
	"data": {
		"endRow": 0,
		"hasNextPage": true,
		"hasPreviousPage": true,
		"isFirstPage": true,
		"isLastPage": true,
		"list": [
			{
				"drId": 0,
				"drtypeid": 0,
				"newtagvalue": "",
				"regId": 0,
				"regName": "",
				"regReadWrite": "",
				"regSub": "",
				"regUnits": "",
				"subname": "",
				"tagName": "",
				"tagValue": ""
			}
		],
		"navigateFirstPage": 0,
		"navigateLastPage": 0,
		"navigatePages": 0,
		"navigatepageNums": [],
		"nextPage": 0,
		"pageNum": 0,
		"pageSize": 0,
		"pages": 0,
		"prePage": 0,
		"size": 0,
		"startRow": 0,
		"total": 0
	},
	"errorMsg": "",
	"msg": "",
	"status": 0
}
```


## 设备控制


**接口地址**:`/dataupload/implement`


**请求方式**:

**Headers:**

- `database: 数据库名称`（需要找工程师获取具体名称）
`GET`


**请求数据类型**:`application/x-www-form-urlencoded`


**响应数据类型**:`*/*`


**接口描述**:


**请求参数**:


| 参数名称 | 参数说明                        | 请求类型 | 是否必须 | 数据类型       | schema |
| -------- | ------------------------------- | -------- | -------- | -------------- | ------ |
| appid    | 项目id 需要找工程师获取具体 id  | query    | true     | integer(int32) |        |
| tagname  | 寄存器 通过分页查询设备变量获取 | query    | true     | string         |        |
| tagvalue | 下发值                          | query    | true     | string         |        |


**响应状态**:


| 状态码 | 说明         | schema    |
| ------ | ------------ | --------- |
| 200    | OK           | SysResult |
| 401    | Unauthorized |           |
| 403    | Forbidden    |           |
| 404    | Not Found    |           |


**响应参数**:


| 参数名称 | 参数说明 | 类型           | schema         |
| -------- | -------- | -------------- | -------------- |
| data     |          | object         |                |
| msg      |          | string         |                |
| ok       |          | boolean        |                |
| status   |          | integer(int32) | integer(int32) |


**响应示例**:

```javascript
{
	"data": {},
	"msg": "",
	"ok": true,
	"status": 0
}
```

# 门禁卡信息


## 分页查询门禁卡信息


**接口地址**:`/cardInfo/findByPage`


**请求方式**:`POST`

**请求数据类型**:`,application/json`

**Headers:**

- `database: 数据库名称`（需要找工程师获取具体名称）


**响应数据类型**:`*/*`


**接口描述**:


**请求示例**:


```javascript
{
  "cardNumber": "",
  "endPassTime": "",
  "fullName": "",
  "pageNum": 0,
  "pageSize": 0,
  "startPassTime": ""
}
```


**请求参数**:


| 参数名称                  | 参数说明       | 请求类型 | 是否必须 | 数据类型       | schema         |
| ------------------------- | -------------- | -------- | -------- | -------------- | -------------- |
| 门禁卡信息参数            | 门禁卡信息参数 | body     | true     | 门禁卡信息参数 | 门禁卡信息参数 |
| &emsp;&emsp;cardNumber    | 卡号           |          | false    | string         |                |
| &emsp;&emsp;endPassTime   | 结束刷卡时间   |          | false    | string         |                |
| &emsp;&emsp;fullName      | 姓名           |          | false    | string         |                |
| &emsp;&emsp;pageNum       | 页码           |          | true     | integer(int32) |                |
| &emsp;&emsp;pageSize      | 每页条数       |          | true     | integer(int32) |                |
| &emsp;&emsp;startPassTime | 开始刷卡时间   |          | false    | string         |                |


**响应状态**:


| 状态码 | 说明         | schema                       |
| ------ | ------------ | ---------------------------- |
| 200    | OK           | Result«PageInfo«门禁卡信息»» |
| 201    | Created      |                              |
| 401    | Unauthorized |                              |
| 403    | Forbidden    |                              |
| 404    | Not Found    |                              |


**响应参数**:


| 参数名称                           | 参数说明     | 类型                 | schema               |
| ---------------------------------- | ------------ | -------------------- | -------------------- |
| data                               | 数据         | PageInfo«门禁卡信息» | PageInfo«门禁卡信息» |
| &emsp;&emsp;endRow                 |              | integer(int64)       |                      |
| &emsp;&emsp;hasNextPage            |              | boolean              |                      |
| &emsp;&emsp;hasPreviousPage        |              | boolean              |                      |
| &emsp;&emsp;isFirstPage            |              | boolean              |                      |
| &emsp;&emsp;isLastPage             |              | boolean              |                      |
| &emsp;&emsp;list                   |              | array                | 门禁卡信息           |
| &emsp;&emsp;&emsp;&emsp;cardNumber | 卡号         | string               |                      |
| &emsp;&emsp;&emsp;&emsp;fullName   | 用户全称     | string               |                      |
| &emsp;&emsp;&emsp;&emsp;id         |              | integer              |                      |
| &emsp;&emsp;&emsp;&emsp;passTime   | 刷卡时间     | string               |                      |
| &emsp;&emsp;&emsp;&emsp;rp         | 地址         | string               |                      |
| &emsp;&emsp;navigateFirstPage      |              | integer(int32)       |                      |
| &emsp;&emsp;navigateLastPage       |              | integer(int32)       |                      |
| &emsp;&emsp;navigatePages          |              | integer(int32)       |                      |
| &emsp;&emsp;navigatepageNums       |              | array                | integer              |
| &emsp;&emsp;nextPage               |              | integer(int32)       |                      |
| &emsp;&emsp;pageNum                |              | integer(int32)       |                      |
| &emsp;&emsp;pageSize               |              | integer(int32)       |                      |
| &emsp;&emsp;pages                  |              | integer(int32)       |                      |
| &emsp;&emsp;prePage                |              | integer(int32)       |                      |
| &emsp;&emsp;size                   |              | integer(int32)       |                      |
| &emsp;&emsp;startRow               |              | integer(int64)       |                      |
| &emsp;&emsp;total                  |              | integer(int64)       |                      |
| errorMsg                           | 错误详细消息 | string               |                      |
| msg                                | 消息         | string               |                      |
| status                             | 状态码       | integer(int32)       | integer(int32)       |


**响应示例**:

```javascript
{
	"data": {
		"endRow": 0,
		"hasNextPage": true,
		"hasPreviousPage": true,
		"isFirstPage": true,
		"isLastPage": true,
		"list": [
			{
				"cardNumber": "",
				"fullName": "",
				"id": 0,
				"passTime": "",
				"rp": ""
			}
		],
		"navigateFirstPage": 0,
		"navigateLastPage": 0,
		"navigatePages": 0,
		"navigatepageNums": [],
		"nextPage": 0,
		"pageNum": 0,
		"pageSize": 0,
		"pages": 0,
		"prePage": 0,
		"size": 0,
		"startRow": 0,
		"total": 0
	},
	"errorMsg": "",
	"msg": "",
	"status": 0
}
```
